{% extends 'base.html' %}

{% block title %}æƒ…ä¾£ç¤¾åŒº - æ¶ˆæ¯ä¸­å¿ƒ{% endblock %}

{% block extra_css %}
<style type="text/tailwindcss">
    @layer utilities {
        .message-unread {
            border-left: 3px solid #FF6B8B;
        }
        .message-read {
            border-left: 3px solid transparent;
        }
        .message-hover {
            transition: all 0.2s ease;
        }
        .message-hover:hover {
            background-color: #f8f8f8;
            transform: translateX(2px);
        }
        .badge-pulse {
            animation: badge-pulse 2s infinite;
        }
        @keyframes badge-pulse {
            0% {
                box-shadow: 0 0 0 0 rgba(255, 107, 139, 0.4);
            }
            70% {
                box-shadow: 0 0 0 6px rgba(255, 107, 139, 0);
            }
            100% {
                box-shadow: 0 0 0 0 rgba(255, 107, 139, 0);
            }
        }
    }
</style>
{% endblock %}

{% block content %}
<!-- èƒŒæ™¯è£…é¥°å…ƒç´  -->
<div class="absolute top-0 left-0 w-full h-full overflow-hidden pointer-events-none">
    <div class="absolute -top-40 -left-40 w-80 h-80 bg-primary/10 rounded-full filter blur-3xl float-animation">
    </div>
    <div class="absolute -bottom-20 -right-20 w-80 h-80 bg-secondary/10 rounded-full filter blur-3xl float-animation"
        style="animation-delay: -2s;"></div>
    <div class="absolute top-1/3 right-1/4 w-40 h-40 bg-primary/5 rounded-full filter blur-2xl float-animation"
        style="animation-delay: -4s;"></div>
</div>

<!-- ä¸»å†…å®¹åŒº -->
<main class="flex-grow pt-24 pb-16 relative z-10">
    <div class="container mx-auto px-4">
        <!-- å·¦ä¾§æ¶ˆæ¯åˆ—è¡¨ -->
        <div class="w-full space-y-6">
            <!-- é¡µé¢æ ‡é¢˜ -->
            <div class="bg-white rounded-xl shadow-lg p-6 hover-scale">
                <h2 class="text-2xl font-bold text-neutral-900">æ¶ˆæ¯ä¸­å¿ƒ</h2>
                <p class="text-neutral-500 mt-1">æŸ¥çœ‹ä½ çš„è¯„è®ºã€å›å¤å’Œç³»ç»Ÿé€šçŸ¥</p>
            </div>

            <!-- æ¶ˆæ¯åˆ†ç±»æ ‡ç­¾ -->
            <div class="bg-white rounded-xl shadow-lg p-4 flex flex-wrap gap-2">
                <button class="px-4 py-2 rounded-full bg-primary text-white text-sm font-medium">
                    å…¨éƒ¨æ¶ˆæ¯ <span class="ml-1 bg-white text-primary text-xs px-2 py-0.5 rounded-full">24</span>
                </button>
                <button
                    class="px-4 py-2 rounded-full bg-neutral-100 text-neutral-700 text-sm font-medium hover:bg-neutral-200 transition-custom">
                    è¯„è®º <span class="ml-1 bg-primary text-white text-xs px-2 py-0.5 rounded-full">12</span>
                </button>
                <button
                    class="px-4 py-2 rounded-full bg-neutral-100 text-neutral-700 text-sm font-medium hover:bg-neutral-200 transition-custom">
                    å›å¤ <span class="ml-1 bg-primary text-white text-xs px-2 py-0.5 rounded-full">8</span>
                </button>
                <button
                    class="px-4 py-2 rounded-full bg-neutral-100 text-neutral-700 text-sm font-medium hover:bg-neutral-200 transition-custom">
                    ç³»ç»Ÿé€šçŸ¥ <span class="ml-1 bg-primary text-white text-xs px-2 py-0.5 rounded-full">4</span>
                </button>
            </div>

            <!-- æ¶ˆæ¯æœç´¢æ¡† -->
            <div class="bg-white rounded-xl shadow-lg p-4 hover-scale">
                <div class="relative">
                    <input type="text" placeholder="æœç´¢æ¶ˆæ¯..."
                        class="w-full pl-10 pr-4 py-3 rounded-lg border border-neutral-200 focus:outline-none focus:ring-2 focus:ring-primary/50 form-input-focus">
                    <i class="fa-solid fa-search absolute left-4 top-1/2 -translate-y-1/2 text-neutral-400"></i>
                </div>
            </div>

            <!-- æ¶ˆæ¯åˆ—è¡¨ -->
            <div class="bg-white rounded-xl shadow-lg overflow-hidden">
                <!-- æ¶ˆæ¯1 - æœªè¯»è¯„è®º -->
                <div class="p-4 border-b border-neutral-100 message-unread message-hover cursor-pointer">
                    <div class="flex">
                        <div class="w-10 h-10 rounded-full overflow-hidden mr-4">
                            <img src="https://picsum.photos/200/200?random=101" alt="è¯„è®ºè€…å¤´åƒ"
                                class="w-full h-full object-cover">
                        </div>
                        <div class="flex-1">
                            <div class="flex justify-between">
                                <h4 class="font-semibold text-neutral-900">å°ç”œç”œå’Œå°å¸…å¸…</h4>
                                <span class="text-neutral-400 text-xs">2å°æ—¶å‰</span>
                            </div>
                            <p class="text-neutral-700 mt-1">è¯„è®ºäº†ä½ çš„åŠ¨æ€ï¼š"ä»Šå¤©æ˜¯æˆ‘ä»¬æ‹çˆ±ä¸€å‘¨å¹´çš„æ—¥å­ï¼Œä¸€èµ·å»äº†æˆ‘ä»¬ç¬¬ä¸€æ¬¡çº¦ä¼šçš„é¤å…ï¼Œå›å¿†æ»¡æ»¡ğŸ’•"</p>
                            <p class="text-neutral-600 mt-1 bg-neutral-50 p-3 rounded-lg text-sm">
                                å¥½ç¾¡æ…•ä½ ä»¬å‘€ï¼ä¸€å‘¨å¹´å¿«ä¹ï¼å¸Œæœ›ä½ ä»¬èƒ½ä¸€ç›´å¹¸ç¦ä¸‹å»~</p>
                            <div class="mt-2 flex items-center">
                                <span class="bg-primary/10 text-primary text-xs px-2 py-0.5 rounded-full">è¯„è®º</span>
                                <span class="ml-2 text-xs text-neutral-500">æ¥è‡ª æ‹çˆ±ä¸€å‘¨å¹´çºªå¿µ</span>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- æ¶ˆæ¯2 - æœªè¯»å›å¤ -->
                <div class="p-4 border-b border-neutral-100 message-unread message-hover cursor-pointer">
                    <div class="flex">
                        <div class="w-10 h-10 rounded-full overflow-hidden mr-4">
                            <img src="https://picsum.photos/200/200?random=102" alt="å›å¤è€…å¤´åƒ"
                                class="w-full h-full object-cover">
                        </div>
                        <div class="flex-1">
                            <div class="flex justify-between">
                                <h4 class="font-semibold text-neutral-900">æ‹çˆ±å°åŠ©æ‰‹</h4>
                                <span class="text-neutral-400 text-xs">3å°æ—¶å‰</span>
                            </div>
                            <p class="text-neutral-700 mt-1">å›å¤äº†ä½ çš„è¯„è®ºï¼š"é¤å…çœ‹èµ·æ¥å¾ˆä¸é”™å•Šï¼Œæ˜¯å“ªå®¶å‘¢ï¼Ÿä¹Ÿæƒ³å’Œå¦ä¸€åŠå»ä½“éªŒä¸€ä¸‹~"</p>
                            <p class="text-neutral-600 mt-1 bg-neutral-50 p-3 rounded-lg text-sm">
                                æ˜¯å¸‚ä¸­å¿ƒçš„é‚£å®¶"åˆè§"é¤å…ï¼Œç¯å¢ƒå¾ˆæµªæ¼«ï¼Œå¾ˆé€‚åˆæƒ…ä¾£çº¦ä¼šå“¦~</p>
                            <div class="mt-2 flex items-center">
                                <span class="bg-primary/10 text-primary text-xs px-2 py-0.5 rounded-full">å›å¤</span>
                                <span class="ml-2 text-xs text-neutral-500">æ¥è‡ª æƒ…ä¾£æ—…è¡Œ</span>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- æ¶ˆæ¯3 - å·²è¯»ç³»ç»Ÿé€šçŸ¥ -->
                <div class="p-4 border-b border-neutral-100 message-read message-hover cursor-pointer">
                    <div class="flex">
                        <div class="w-10 h-10 rounded-full overflow-hidden mr-4">
                            <img src="https://picsum.photos/200/200?random=103" alt="ç³»ç»Ÿå¤´åƒ"
                                class="w-full h-full object-cover">
                        </div>
                        <div class="flex-1">
                            <div class="flex justify-between">
                                <h4 class="font-semibold text-neutral-900">ç¤¾åŒºå°åŠ©æ‰‹</h4>
                                <span class="text-neutral-400 text-xs">æ˜¨å¤©</span>
                            </div>
                            <p class="text-neutral-700 mt-1">ä½ çš„åŠ¨æ€"ç¬¬ä¸€æ¬¡ä¸€èµ·å‡ºå›½æ—…è¡Œï¼Œæ³°å›½æ™®å‰å²›çœŸçš„å¤ªç¾äº†ï¼..."è·å¾—äº†100+ç‚¹èµ</p>
                            <div class="mt-2 flex items-center">
                                <span
                                    class="bg-secondary/10 text-secondary text-xs px-2 py-0.5 rounded-full">ç³»ç»Ÿé€šçŸ¥</span>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- æ¶ˆæ¯4 - æœªè¯»è¯„è®º -->
                <div class="p-4 border-b border-neutral-100 message-unread message-hover cursor-pointer">
                    <div class="flex">
                        <div class="w-10 h-10 rounded-full overflow-hidden mr-4">
                            <img src="https://picsum.photos/200/200?random=104" alt="è¯„è®ºè€…å¤´åƒ"
                                class="w-full h-full object-cover">
                        </div>
                        <div class="flex-1">
                            <div class="flex justify-between">
                                <h4 class="font-semibold text-neutral-900">ç¾é£Ÿçˆ±å¥½è€…</h4>
                                <span class="text-neutral-400 text-xs">æ˜¨å¤©</span>
                            </div>
                            <p class="text-neutral-700 mt-1">è¯„è®ºäº†ä½ çš„åŠ¨æ€ï¼š"å‘¨æœ«ä¸€èµ·å­¦åšäº†ä¸€é“èœï¼Œè™½ç„¶è¿‡ç¨‹æœ‰ç‚¹æ›²æŠ˜ï¼Œä½†æˆå“è¿˜ä¸é”™å“¦ï¼ç¬¬ä¸€æ¬¡åˆä½œä¸‹å¨ï¼Œå¾ˆå¼€å¿ƒ~"</p>
                            <p class="text-neutral-600 mt-1 bg-neutral-50 p-3 rounded-lg text-sm">
                                è¿™é“èœçœ‹èµ·æ¥å¤ªç¾å‘³äº†ï¼è¯·é—®æœ‰é£Ÿè°±å—ï¼Ÿæƒ³å’Œæˆ‘çš„å¦ä¸€åŠä¸€èµ·å°è¯•ä¸€ä¸‹~</p>
                            <div class="mt-2 flex items-center">
                                <span class="bg-primary/10 text-primary text-xs px-2 py-0.5 rounded-full">è¯„è®º</span>
                                <span class="ml-2 text-xs text-neutral-500">æ¥è‡ª æƒ…ä¾£æ—¥å¸¸</span>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- æ¶ˆæ¯5 - å·²è¯»ç³»ç»Ÿé€šçŸ¥ -->
                <div class="p-4 border-b border-neutral-100 message-read message-hover cursor-pointer">
                    <div class="flex">
                        <div class="w-10 h-10 rounded-full overflow-hidden mr-4">
                            <img src="https://picsum.photos/200/200?random=105" alt="ç³»ç»Ÿå¤´åƒ"
                                class="w-full h-full object-cover">
                        </div>
                        <div class="flex-1">
                            <div class="flex justify-between">
                                <h4 class="font-semibold text-neutral-900">ç¤¾åŒºæ´»åŠ¨</h4>
                                <span class="text-neutral-400 text-xs">3å¤©å‰</span>
                            </div>
                            <p class="text-neutral-700 mt-1">ä¸ƒå¤•æƒ…ä¾£æ‘„å½±å¤§èµ›å¼€å§‹å•¦ï¼åˆ†äº«ä½ ä»¬çš„ç”œèœœç…§ç‰‡ï¼Œèµ¢å–æµªæ¼«å¥–å“</p>
                            <div class="mt-2 flex items-center">
                                <span
                                    class="bg-secondary/10 text-secondary text-xs px-2 py-0.5 rounded-full">ç³»ç»Ÿé€šçŸ¥</span>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- åŠ è½½æ›´å¤š -->
                <div class="p-4 text-center">
                    <button class="text-primary hover:text-primary/80 transition-custom">
                        åŠ è½½æ›´å¤šæ¶ˆæ¯ <i class="fa-solid fa-chevron-down ml-1"></i>
                    </button>
                </div>
            </div>
        </div>
    </div>
</main>
{% endblock %}

{% block extra_js %}
<script>
    // æ¶ˆæ¯è¯¦æƒ…å±•ç¤º
    function showMessageDetail(messageId) {
        // è¿™é‡Œå¯ä»¥æ ¹æ®æ¶ˆæ¯IDåŠ è½½ä¸åŒçš„æ¶ˆæ¯å†…å®¹
        // ä¸ºç®€åŒ–ç¤ºä¾‹ï¼Œæˆ‘ä»¬åªæ˜¾ç¤ºä¸€ä¸ªå›ºå®šçš„æ¶ˆæ¯è¯¦æƒ…
        const messageContent = document.getElementById('messageContent');
        const messageDetail = document.getElementById('messageDetail');

        if (messageDetail && messageContent) {
            messageDetail.classList.remove('hidden');
            messageContent.classList.remove('hidden');

            // æ ¹æ®ä¸åŒçš„æ¶ˆæ¯IDè®¾ç½®ä¸åŒçš„å†…å®¹
            // è¿™é‡Œåªæ˜¯ä¸€ä¸ªç¤ºä¾‹ï¼Œå®é™…é¡¹ç›®ä¸­åº”è¯¥ä»æ•°æ®åº“æˆ–APIè·å–æ•°æ®
            const messageData = {
                message1: {
                    avatar: 'https://picsum.photos/200/200?random=101',
                    name: 'å°ç”œç”œå’Œå°å¸…å¸…',
                    time: '2å°æ—¶å‰',
                    text: 'è¯„è®ºäº†ä½ çš„åŠ¨æ€ï¼š"ä»Šå¤©æ˜¯æˆ‘ä»¬æ‹çˆ±ä¸€å‘¨å¹´çš„æ—¥å­ï¼Œä¸€èµ·å»äº†æˆ‘ä»¬ç¬¬ä¸€æ¬¡çº¦ä¼šçš„é¤å…ï¼Œå›å¿†æ»¡æ»¡ğŸ’•"',
                    comment: 'å¥½ç¾¡æ…•ä½ ä»¬å‘€ï¼ä¸€å‘¨å¹´å¿«ä¹ï¼å¸Œæœ›ä½ ä»¬èƒ½ä¸€ç›´å¹¸ç¦ä¸‹å»~'
                },
                message2: {
                    avatar: 'https://picsum.photos/200/200?random=102',
                    name: 'æ‹çˆ±å°åŠ©æ‰‹',
                    time: '3å°æ—¶å‰',
                    text: 'å›å¤äº†ä½ çš„è¯„è®ºï¼š"é¤å…çœ‹èµ·æ¥å¾ˆä¸é”™å•Šï¼Œæ˜¯å“ªå®¶å‘¢ï¼Ÿä¹Ÿæƒ³å’Œå¦ä¸€åŠå»ä½“éªŒä¸€ä¸‹~"',
                    comment: 'æ˜¯å¸‚ä¸­å¿ƒçš„é‚£å®¶"åˆè§"é¤å…ï¼Œç¯å¢ƒå¾ˆæµªæ¼«ï¼Œå¾ˆé€‚åˆæƒ…ä¾£çº¦ä¼šå“¦~'
                },
                // å…¶ä»–æ¶ˆæ¯æ•°æ®...
            };

            // æ›´æ–°æ¶ˆæ¯è¯¦æƒ…å†…å®¹
            if (messageData[messageId]) {
                document.getElementById('detailAvatar').src = messageData[messageId].avatar;
                document.getElementById('detailName').textContent = messageData[messageId].name;
                document.getElementById('detailTime').textContent = messageData[messageId].time;
                document.getElementById('detailText').textContent = messageData[messageId].text;
                document.getElementById('detailComment').textContent = messageData[messageId].comment;
            }
        }
    }

    // è¿”å›æ¶ˆæ¯åˆ—è¡¨
    document.getElementById('backToList')?.addEventListener('click', function () {
        const messageContent = document.getElementById('messageContent');
        if (messageContent) {
            messageContent.classList.add('hidden');
        }
    });
</script>
{% endblock %}