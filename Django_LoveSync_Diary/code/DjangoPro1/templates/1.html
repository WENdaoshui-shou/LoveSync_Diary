<!DOCTYPE html>
        <html lang = "zh-CN" >
        <head >
            <meta charset = "UTF-8" >
            <meta name = "viewport" content = "width=device-width, initial-scale=1.0" >
            <title >LoveSync 情侣商城 - 购物车</title >
            <script src = "https://cdn.tailwindcss.com" ></script >
            <link href = "https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.7.2/css/all.min.css"
                  rel = "stylesheet" >
            <link href = "https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap"
                  rel = "stylesheet" >
            <script >
                tailwind.config = {
                    theme: {
                        extend: {
                            colors: {
                                primary: '#FF6B8B', // 爱情粉色作为主色调
                                secondary: '#722ED1', // 紫色作为辅助色
                                neutral: {
                                    100: '#F9F9F9',
                                    200: '#F0F0F0',
                                    300: '#E0E0E0',
                                    400: '#BDBDBD',
                                    500: '#9E9E9E',
                                    600: '#757575',
                                    700: '#616161',
                                    800: '#424242',
                                    900: '#212121',
                                }
                            },
                            fontFamily: {
                                inter: ['Inter', 'sans-serif'],
                            },
                        },
                    }
                }
            </script >
            <style type = "text/tailwindcss" >
                @layer utilities {
                    .transition-custom {
                        transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
                    }

                    .bg-gradient-love {
                        background: linear-gradient(135deg, #FF6B8B 0%, #722ED1 100%);
                    }

                    .hover-scale {
                        transition: transform 0.3s ease;
                    }

                    .hover-scale:hover {
                        transform: scale(1.03);
                    }

                    .form-input-focus {
                        transition: all 0.3s ease;
                    }

                    .form-input-focus:focus {
                        transform: translateY(-2px);
                        box-shadow: 0 10px 25px -5px rgba(255, 107, 139, 0.1), 0 10px 10px -5px rgba(255, 107, 139, 0.04);
                    }

                    .btn-pulse {
                        animation: pulse 2s infinite;
                    }

                    @keyframes pulse {
                        0% {
                            box-shadow: 0 0 0 0 rgba(255, 107, 139, 0.4);
                        }
                        70% {
                            box-shadow: 0 0 0 10px rgba(255, 107, 139, 0);
                        }
                        100% {
                            box-shadow: 0 0 0 0 rgba(255, 107, 139, 0);
                        }
                    }

                    .float-animation {
                        animation: float 6s ease-in-out infinite;
                    }

                    @keyframes float {
                        0% {
                            transform: translateY(0px);
                        }
                        50% {
                            transform: translateY(-20px);
                        }
                        100% {
                            transform: translateY(0px);
                        }
                    }

                    .product-card {
                        transition: all 0.3s ease;
                    }

                    .product-card:hover {
                        box-shadow: 0 15px 30px rgba(0, 0, 0, 0.1);
                        transform: translateY(-5px);
                    }

                    .scrollbar-hide::-webkit-scrollbar {
                        display: none;
                    }

                    .scrollbar-hide {
                        -ms-overflow-style: none;
                        scrollbar-width: none;
                    }

                    .text-shadow {
                        text-shadow: 0 2px 4px rgba(0, 0, 0, 0.1);
                    }

                    .text-gradient {
                        background-clip: text;
                        -webkit-background-clip: text;
                        color: transparent;
                        background-image: linear-gradient(135deg, #FF6B8B 0%, #722ED1 100%);
                    }

                    .card-shadow {
                        box-shadow: 0 10px 25px -5px rgba(0, 0, 0, 0.05), 0 10px 10px -5px rgba(0, 0, 0, 0.01);
                    }
                }
            </style >
</head >
    <body class = "font-inter bg-neutral-100 text-neutral-800 min-h-screen flex flex-col overflow-x-hidden relative" >
            <!-- 背景装饰元素 -->
            <div class = "absolute top-0 left-0 w-full h-full overflow-hidden pointer-events-none" >
                <div class = "absolute -top-40 -left-40 w-80 h-80 bg-primary/10 rounded-full filter blur-3xl float-animation" >
                </div >
                <div class = "absolute -bottom-20 -right-20 w-80 h-80 bg-secondary/10 rounded-full filter blur-3xl float-animation"
                     style = "animation-delay: -2s;" ></div >
                <div class = "absolute top-1/3 right-1/4 w-40 h-40 bg-primary/5 rounded-full filter blur-2xl float-animation"
                     style = "animation-delay: -4s;" ></div >
            </div >

            <!-- 导航栏 -->
            <header class = "fixed w-full top-0 z-50 transition-all duration-300 bg-white/95 backdrop-blur-md shadow-sm py-3" >
                <div class = "container mx-auto px-4 flex items-center justify-between" >
                    <!-- 品牌标识 -->
                    <a href = "{% url 'index' %}" class = "flex items-center space-x-2" >
                        <div
                                class = "w-10 h-10 rounded-full bg-gradient-love flex items-center justify-center text-white shadow-md" >
                            <i class = "fa-solid fa-heart text-xl" ></i >
                        </div >
                        <span class = "text-xl font-bold text-neutral-800 tracking-tight" >LoveSync</span >
                    </a >

                    <!-- 桌面端导航菜单 -->
                    <nav class = "hidden md:flex items-center space-x-6" >
                        <a href = "{% url 'community' %}"
                           class = "text-neutral-700 hover:text-primary transition-custom font-medium px-1 py-2 border-b-2 border-transparent hover:border-primary" >爱享公社</a >
                        <a href = "{% url 'moments' %}"
                           class = "text-neutral-700 hover:text-primary transition-custom font-medium px-1 py-2 border-b-2 border-transparent hover:border-primary" >心动轨迹</a >
                        <a href = "{% url 'photo_album' %}"
                           class = "text-neutral-700 hover:text-primary transition-custom font-medium px-1 py-2 border-b-2 border-transparent hover:border-primary" >心跳相簿</a >
                        <a href = "{% url 'lovesync' %}"
                           class = "text-neutral-700 hover:text-primary transition-custom font-medium px-1 py-2 border-b-2 border-transparent hover:border-primary" >双人日记</a >

                        <!-- 更多下拉菜单 -->
                        <div class = "relative" id = "moreDropdown" >
                            <button
                                    class = "text-neutral-700 hover:text-primary transition-custom font-medium flex items-center px-1 py-2"
                                    id = "moreButton" >
                                更多 <i class = "fa-solid fa-chevron-down ml-1 text-xs" ></i >
                            </button >
                            <div class = "absolute right-0 mt-2 w-48 bg-white rounded-lg shadow-xl py-2 z-50 hidden"
                                 id = "moreOptions" >
                                <a href = "#"
                                   class = "block px-4 py-2 text-neutral-700 hover:bg-neutral-50 transition-custom flex items-center" >
                                    <i class = "fa-solid fa-calendar-heart mr-2 w-5 text-center" ></i >纪念日提醒
                                </a >
                                <a href = "#"
                                   class = "block px-4 py-2 text-neutral-700 hover:bg-neutral-50 transition-custom flex items-center" >
                                    <i class = "fa-solid fa-gift mr-2 w-5 text-center" ></i >礼物推荐
                                </a >
                                <a href = "#"
                                   class = "block px-4 py-2 text-neutral-700 hover:bg-neutral-50 transition-custom flex items-center" >
                                    <i class = "fa-solid fa-map-marker-heart mr-2 w-5 text-center" ></i >情侣地点
                                </a >
                                <a href = "#"
                                   class = "block px-4 py-2 text-neutral-700 hover:bg-neutral-50 transition-custom flex items-center" >
                                    <i class = "fa-solid fa-question-circle mr-2 w-5 text-center" ></i >爱情测试
                                </a >
                            </div >
                        </div >
                    </nav >

                    <!-- 内容过滤器 -->
                    <div class = "bg-white/95 backdrop-blur-md rounded-xl shadow-lg p-2 flex justify-between items-center hover-scale" >
                        <div class = "relative w-full" >
                            <input type = "text" placeholder = "搜索情侣商品..."
                                   class = "pl-10 pr-40 py-2 rounded-full border border-neutral-200 focus:outline-none focus:ring-2 focus:ring-primary/50 form-input-focus text-sm w-full" >
                            <i class = "fa-solid fa-search absolute left-4 top-1/2 -translate-y-1/2 text-neutral-400" ></i >

                            <!-- 搜索热词下拉菜单 -->
                            <div id = "searchSuggestions"
                                 class = "absolute left-0 right-0 top-full mt-1 bg-white rounded-xl shadow-xl z-40 invisible opacity-0 transform -translate-y-2 transition-all duration-200" >
                                <div class = "p-3" >
                                    <div class = "flex justify-between items-center mb-2" >
                                        <h4 class = "font-medium text-neutral-800" >热门搜索</h4 >
                                        <button class = "text-xs text-neutral-500 hover:text-primary" >清除历史</button >
                                    </div >

                                    <div class = "space-y-2" >
                                        <a href = "#"
                                           class = "flex items-center p-2 rounded-lg hover:bg-neutral-50 transition-custom" >
                                            <i class = "fa-solid fa-fire text-primary mr-3 w-5 text-center" ></i >
                                            <span >情侣T恤夏季新款</span >
                                            <span class = "ml-auto text-xs font-medium text-primary" >2.5万+</span >
                                        </a >

                                        <a href = "#"
                                           class = "flex items-center p-2 rounded-lg hover:bg-neutral-50 transition-custom" >
                                            <i class = "fa-solid fa-fire text-primary mr-3 w-5 text-center" ></i >
                                            <span >纯银情侣手链</span >
                                            <span class = "ml-auto text-xs font-medium text-primary" >1.8万+</span >
                                        </a >

                                        <a href = "#"
                                           class = "flex items-center p-2 rounded-lg hover:bg-neutral-50 transition-custom" >
                                            <i class = "fa-solid fa-fire text-primary mr-3 w-5 text-center" ></i >
                                            <span >情侣保温杯</span >
                                            <span class = "ml-auto text-xs font-medium text-primary" >1.2万+</span >
                                        </a >

                                        <a href = "#"
                                           class = "flex items-center p-2 rounded-lg hover:bg-neutral-50 transition-custom" >
                                            <i class = "fa-solid fa-star text-yellow-400 mr-3 w-5 text-center" ></i >
                                            <span >情侣手机壳定制</span >
                                            <span class = "ml-auto text-xs font-medium text-primary" >9.8千+</span >
                                        </a >

                                        <a href = "#"
                                           class = "flex items-center p-2 rounded-lg hover:bg-neutral-50 transition-custom" >
                                            <i class = "fa-solid fa-star text-yellow-400 mr-3 w-5 text-center" ></i >
                                            <span >情侣睡衣套装</span >
                                            <span class = "ml-auto text-xs font-medium text-primary" >8.7千+</span >
                                        </a >
                                    </div >

                                    <div class = "border-t border-neutral-100 my-3 pt-3" >
                                        <h4 class = "font-medium text-neutral-800 mb-2" >搜索历史</h4 >
                                        <div class = "space-y-2" >
                                            <a href = "#"
                                               class = "flex items-center p-2 rounded-lg hover:bg-neutral-50 transition-custom" >
                                                <i class = "fa-solid fa-clock-rotate-left text-neutral-400 mr-3 w-5 text-center" ></i >
                                                <span >情侣手表</span >
                                            </a >

                                            <a href = "#"
                                               class = "flex items-center p-2 rounded-lg hover:bg-neutral-50 transition-custom" >
                                                <i class = "fa-solid fa-clock-rotate-left text-neutral-400 mr-3 w-5 text-center" ></i >
                                                <span >情侣马克杯</span >
                                            </a >

                                            <a href = "#"
                                               class = "flex items-center p-2 rounded-lg hover:bg-neutral-50 transition-custom" >
                                                <i class = "fa-solid fa-clock-rotate-left text-neutral-400 mr-3 w-5 text-center" ></i >
                                                <span >情侣睡衣</span >
                                            </a >
                                        </div >
                                    </div >
                                </div >
                            </div >
                        </div >
                    </div >


                    <!-- 用户操作区 -->
                    <div class = "flex items-center space-x-4" >
                        <!-- 收藏按钮-->
                        <a href = "{% url 'mallmark' %}"
                           class = "hidden md:flex items-center space-x-2 px-5 py-2 rounded-full bg-neutral-100 text-neutral-700 hover:bg-neutral-200 transition-custom shadow-sm hover:shadow-md" >
                            <i class = "fa-solid fa-heart" ></i >
                            <span class = "relative" >
                                <span class = "absolute -top-2 -right-3 bg-primary text-white text-xs w-5 h-5 rounded-full flex items-center justify-center" >3</span >
                            </span >
                        </a >

                        <!-- 购物车按钮-->
                        <a href = "{% url 'mallcart' %}"
                           class = "flex items-center space-x-2 px-5 py-2 rounded-full bg-primary/10 text-primary hover:bg-primary/20 transition-custom shadow-sm hover:shadow-md" >
                            <i class = "fa-solid fa-solid fa-shopping-cart" ></i >
                            <span class = "relative" >
                                <span class = "absolute -top-2 -right-3 bg-primary text-white text-xs w-5 h-5 rounded-full flex items-center justify-center" >5</span >
                            </span >
                        </a >

                        <!-- 用户头像与下拉菜单 -->
                        <div class = "relative" id = "userDropdown" >
                            <div class = "w-10 h-10 rounded-full overflow-hidden border-2 border-primary cursor-pointer shadow-sm"
                                 id = "userAvatar" >
                                <img src = "{{ user.profile.userAvatar.url }}" alt = "用户头像"
                                     class = "w-full h-full object-cover" >
                            </div >
                            <div class = "absolute right-0 mt-2 w-48 bg-white rounded-lg shadow-xl py-2 z-50 hidden"
                                 id = "userOptions" >
                                <a href = "{% url 'personal_center' %}"
                                   class = "block px-4 py-2 text-neutral-700 hover:bg-neutral-50 transition-custom flex items-center" >
                                    <i class = "fa-solid fa-user mr-2 w-5 text-center" ></i >主页
                                </a >
                                <a href = "{% url 'message' %}"
                                   class = "block px-4 py-2 text-neutral-700 hover:bg-neutral-50 transition-custom flex items-center" >
                                    <i class = "fa-solid fa-bookmark mr-2 w-5 text-center" ></i >消息
                                </a >
                                <a href = "{% url 'settings' %}"
                                   class = "block px-4 py-22 text-neutral-700 hover:bg-neutral-50 transition-custom flex items-center" >
                                    <i class = "fa-solid fa-cog mr-2 w-5 text-center" ></i >设置
                                </a >
                                <div class = "border-t border-neutral-200 my-1" ></div >
                                <a href = "{% url 'logout' %}"
                                   class = "block px-4 py-2 text-red-500 hover:bg-red-50 transition-custom flex items-center" >
                                    <i class = "fa-solid fa-sign-out mr-2 w-5 text-center" ></i >退出登录
                                </a >
                            </div >
                        </div >

                        <!-- 移动端菜单按钮 -->
                        <button class = "md:hidden text-neutral-700 focus:outline-none" id = "menu-toggle" >
                            <i class = "fa-solid fa-bars text-xl" ></i >
                        </button >
                    </div >
                </div >

                <!-- 移动端菜单 -->
                <div id = "mobile-menu"
                     class = "hidden md:hidden bg-white shadow-lg absolute w-full transform -translate-y-2 opacity-0 transition-all duration-200 ease-in-out"
                     style = "top: 100%;" >
                    <div class = "container mx-auto px-4 py-3 flex flex-col space-y-3" >
                        <a href = "{% url 'community' %}"
                           class = "text-neutral-700 hover:text-primary py-2 transition-custom font-medium flex items-center" >
                            <i class = "fa-solid fa-users mr-3 w-5 text-center" ></i >爱享公社
                        </a >
                        <a href = "{% url 'moments' %}"
                           class = "text-neutral-700 hover:text-primary py-2 transition-custom font-medium flex items-center" >
                            <i class = "fa-solid fa-bolt mr-3 w-5 text-center" ></i >心动轨迹
                        </a >
                        <a href = "{% url 'photo_album' %}"
                           class = "text-neutral-700 hover:text-primary py-2 transition-custom font-medium flex items-center" >
                            <i class = "fa-solid fa-images mr-3 w-5 text-center" ></i >心跳相簿
                        </a >
                        <a href = "{% url 'lovesync' %}"
                           class = "text-neutral-700 hover:text-primary py-2 transition-custom font-medium flex items-center" >
                            <i class = "fa-solid fa-bookmark mr-3 w-5 text-center" ></i >双人日记
                        </a >
                        <div class = "border-t border-neutral-200 my-1" ></div >
                        <a href = "#" class = "text-neutral-700 py-2 transition-custom flex items-center" >
                            <i class = "fa-solid fa-calendar-heart mr-3 w-5 text-center" ></i >纪念日提醒
                        </a >
                        <a href = "#" class = "text-neutral-700 py-2 transition-custom flex items-center" >
                            <i class = "fa-solid fa-gift mr-3 w-5 text-center" ></i >礼物推荐
                        </a >
                        <a href = "#" class = "text-neutral-700 py-2 transition-custom flex items-center" >
                            <i class = "fa-solid fa-map-marker-heart mr-3 w-5 text-center" ></i >情侣地点
                        </a >
                        <a href = "#" class = "text-neutral-700 py-2 transition-custom flex items-center" >
                            <i class = "fa-solid fa-question-circle mr-3 w-5 text-center" ></i >爱情测试
                        </a >
                        <div class = "border-t border-neutral-200 my-1" ></div >
                        <a href = "{% url 'personal_center' %}"
                           class = "text-neutral-700 py-2 transition-custom flex items-center" >
                            <i class = "fa-solid fa-user mr-3 w-5 text-center" ></i >主页
                        </a >
                        <a href = "{% url 'message' %}"
                           class = "text-neutral-700 py-2 transition-custom flex items-center" >
                            <i class = "fa-solid fa-bookmark mr-3 w-5 text-center" ></i >消息
                        </a >
                        <a href = "{% url 'message' %}"
                           class = "text-neutral-700 py-2 transition-custom flex items-center" >
                            <i class = "fa-solid fa-cog mr-3 w-5 text-center" ></i >设置
                        </a >
                        <div class = "border-t border-neutral-200 my-1" ></div >
                        <a href = "{% url 'logout' %}" class = "text-red-500 py-2 transition-custom flex items-center" >
                            <i class = "fa-solid fa-sign-out mr-3 w-5 text-center" ></i >退出登录
                        </a >
                    </div >
                </div >
            </header >

            <!-- 主内容区 -->
            <main class = "flex-grow pt-32 pb-16 relative z-10" >
                <div class = "container mx-auto px-4" >
                    <!-- 页面标题 -->
                    <div class = "mb-8" >
                        <h1 class = "text-[clamp(1.5rem,3vw,2.5rem)] font-bold text-neutral-800" >我的购物车</h1 >
                    </div >

                    <!-- 购物车内容 -->
                    <div class = "grid grid-cols-1 lg:grid-cols-3 gap-8" >
                        <!-- 商品列表 -->
                        <div class = "lg:col-span-2" >
                            <div class = "bg-white rounded-xl shadow-sm overflow-hidden" >
                                <!-- 购物车头部 -->
                                <div class = "px-6 py-4 border-b border-neutral-200 flex items-center justify-between" >
                                    <h2 class = "font-semibold text-lg" >已选商品</h2 >
                                    <p class = "text-neutral-600 mt-2" >共5件商品</p >
                                    <div class = "flex items-center space-x-4" >
                                    </div >
                                </div >

                                <!-- 商品项 -->
                                <div class = "divide-y divide-neutral-200" >
                                    <!-- 商品1 -->
                                    <div class = "px-6 py-5 flex items-start" >
                                        <label class = "mt-6 mr-4" >
                                            <input type = "checkbox"
                                                   class = "form-checkbox h-5 w-5 text-primary rounded border-neutral-300 focus:ring-primary"
                                                   checked >
                                        </label >
                                        <div class = "flex-shrink-0 w-20 h-20 rounded-lg overflow-hidden" >
                                            <img src = "https://picsum.photos/id/1005/100/100"
                                                 alt = "情侣夏季纯棉短袖T恤" class = "w-full h-full object-cover" >
                                        </div >
                                        <div class = "ml-4 flex-grow" >
                                            <div class = "flex justify-between" >
                                                <div >
                                                    <h3 class = "font-medium text-neutral-800" >情侣夏季纯棉短袖T恤</h3 >
                                                    <p class = "text-neutral-500 text-sm mt-1" >颜色: 白色/黑色 | 尺码: M/L</p >
                                                </div >
                                                <div class = "text-right" >
                                                    <p class = "font-bold text-primary" >¥899</p >
                                                    <button class = "text-neutral-400 hover:text-red-500 mt-2 transition-custom" >
                                                        <i class = "fa-solid fa-trash" ></i >
                                                    </button >
                                                </div >
                                            </div >
                                            <div class = "mt-4 flex items-center justify-between" >
                                                <div class = "text-neutral-500 text-sm" >
                                                    <span >已减: ¥100</span >
                                                </div >
                                                <div class = "flex items-center border border-neutral-300 rounded-lg w-32" >
                                                    <button class = "px-3 py-1 text-neutral-500 hover:bg-neutral-100 transition-custom" >
                                                        <i class = "fa-solid fa-minus" ></i >
                                                    </button >
                                                    <input type = "number" value = "1" min = "1"
                                                           class = "w-full text-center border-x border-neutral-300 focus:outline-none" >
                                                    <button class = "px-3 py-1 text-neutral-500 hover:bg-neutral-100 transition-custom" >
                                                        <i class = "fa-solid fa-plus" ></i >
                                                    </button >
                                                </div >
                                            </div >
                                        </div >
                                    </div >

                                    <!-- 商品2 -->
                                    <div class = "px-6 py-5 flex items-start" >
                                        <label class = "mt-6 mr-4" >
                                            <input type = "checkbox"
                                                   class = "form-checkbox h-5 w-5 text-primary rounded border-neutral-300 focus:ring-primary"
                                                   checked >
                                        </label >
                                        <div class = "flex-shrink-0 w-20 h-20 rounded-lg overflow-hidden" >
                                            <img src = "https://picsum.photos/id/1025/100/100" alt = "情侣纯银手链"
                                                 class = "w-full h-full object-cover" >
                                        </div >
                                        <div class = "ml-4 flex-grow" >
                                            <div class = "flex justify-between" >
                                                <div >
                                                    <h3 class = "font-medium text-neutral-800" >情侣纯银手链</h3 >
                                                    <p class = "text-neutral-500 text-sm mt-1" >款式: 心型 | 尺寸: 均码</p >
                                                </div >
                                                <div class = "text-right" >
                                                    <p class = "font-bold text-primary" >¥299</p >
                                                    <button class = "text-neutral-400 hover:text-red-500 mt-2 transition-custom" >
                                                        <i class = "fa-solid fa-trash" ></i >
                                                    </button >
                                                </div >
                                            </div >
                                            <div class = "mt-4 flex items-center justify-between" >
                                                <div class = "text-neutral-500 text-sm" >
                                                    <span >已减: ¥100</span >
                                                </div >
                                                <div class = "flex items-center border border-neutral-300 rounded-lg w-32" >
                                                    <button class = "px-3 py-1 text-neutral-500 hover:bg-neutral-100 transition-custom" >
                                                        <i class = "fa-solid fa-minus" ></i >
                                                    </button >
                                                    <input type = "number" value = "1" min = "1"
                                                           class = "w-full text-center border-x border-neutral-300 focus:outline-none" >
                                                    <button class = "px-3 py-1 text-neutral-500 hover:bg-neutral-100 transition-custom" >
                                                        <i class = "fa-solid fa-plus" ></i >
                                                    </button >
                                                </div >
                                            </div >
                                        </div >
                                    </div >

                                    <!-- 商品3 -->
                                    <div class = "px-6 py-5 flex items-start" >
                                        <label class = "mt-6 mr-4" >
                                            <input type = "checkbox"
                                                   class = "form-checkbox h-5 w-5 text-primary rounded border-neutral-300 focus:ring-primary"
                                                   checked >
                                        </label >
                                        <div class = "flex-shrink-0 w-20 h-20 rounded-lg overflow-hidden" >
                                            <img src = "https://picsum.photos/id/1062/100/100" alt = "情侣陶瓷马克杯"
                                                 class = "w-full h-full object-cover" >
                                        </div >
                                        <div class = "ml-4 flex-grow" >
                                            <div class = "flex justify-between" >
                                                <div >
                                                    <h3 class = "font-medium text-neutral-800" >情侣陶瓷马克杯</h3 >
                                                    <p class = "text-neutral-500 text-sm mt-1" >款式: 经典款 | 颜色: 白色</p >
                                                </div >
                                                <div class = "text-right" >
                                                    <p class = "font-bold text-primary" >¥129</p >
                                                    <button class = "text-neutral-400 hover:text-red-500 mt-2 transition-custom" >
                                                        <i class = "fa-solid fa-trash" ></i >
                                                    </button >
                                                </div >
                                            </div >
                                            <div class = "mt-4 flex items-center justify-between" >
                                                <div class = "text-neutral-500 text-sm" >
                                                    <span >已减: ¥40</span >
                                                </div >
                                                <div class = "flex items-center border border-neutral-300 rounded-lg w-32" >
                                                    <button class = "px-3 py-1 text-neutral-500 hover:bg-neutral-100 transition-custom" >
                                                        <i class = "fa-solid fa-minus" ></i >
                                                    </button >
                                                    <input type = "number" value = "1" min = "1"
                                                           class = "w-full text-center border-x border-neutral-300 focus:outline-none" >
                                                    <button class = "px-3 py-1 text-neutral-500 hover:bg-neutral-100 transition-custom" >
                                                        <i class = "fa-solid fa-plus" ></i >
                                                    </button >
                                                </div >
                                            </div >
                                        </div >
                                    </div >

                                    <!-- 商品4 -->
                                    <div class = "px-6 py-5 flex items-start" >
                                        <label class = "mt-6 mr-4" >
                                            <input type = "checkbox"
                                                   class = "form-checkbox h-5 w-5 text-primary rounded border-neutral-300 focus:ring-primary"
                                                   checked >
                                        </label >
                                        <div class = "flex-shrink-0 w-20 h-20 rounded-lg overflow-hidden" >
                                            <img src = "https://picsum.photos/id/1063/100/100" alt = "情侣定制手机壳"
                                                 class = "w-full h-full object-cover" >
                                        </div >
                                        <div class = "ml-4 flex-grow" >
                                            <div class = "flex justify-between" >
                                                <div >
                                                    <h3 class = "font-medium text-neutral-800" >情侣定制手机壳</h3 >
                                                    <p class = "text-neutral-500 text-sm mt-1" >款式: 照片定制 | 机型: iPhone 14</p >
                                                </div >
                                                <div class = "text-right" >
                                                    <p class = "font-bold text-primary" >¥79</p >
                                                    <button class = "text-neutral-400 hover:text-red-500 mt-2 transition-custom" >
                                                        <i class = "fa-solid fa-trash" ></i >
                                                    </button >
                                                </div >
                                            </div >
                                            <div class = "mt-4 flex items-center justify-between" >
                                                <div class = "text-neutral-500 text-sm" >
                                                    <span >已减: ¥20</span >
                                                </div >
                                                <div class = "flex items-center border border-neutral-300 rounded-lg w-32" >
                                                    <button class = "px-3 py-1 text-neutral-500 hover:bg-neutral-100 transition-custom" >
                                                        <i class = "fa-solid fa-minus" ></i >
                                                    </button >
                                                    <input type = "number" value = "2" min = "1"
                                                           class = "w-full text-center border-x border-neutral-300 focus:outline-none" >
                                                    <button class = "px-3 py-1 text-neutral-500 hover:bg-neutral-100 transition-custom" >
                                                        <i class = "fa-solid fa-plus" ></i >
                                                    </button >
                                                </div >
                                            </div >
                                        </div >
                                    </div >
                                </div >

                                <!-- 购物车底部 -->
                                <div class = "px-6 py-4 bg-neutral-50 flex items-center justify-between" >
                                    <div class = "flex items-center space-x-4" >
                                        <button class = "text-neutral-500 hover:text-primary transition-custom" >
                                            <i class = "fa-solid fa-heart mr-1" ></i > 加入收藏
                                        </button >
                                        <button class = "text-neutral-500 hover:text-red-500 transition-custom" >
                                            <i class = "fa-solid fa-trash mr-1" ></i > 删除选中
                                        </button >
                                    </div >
                                    <div class = "flex items-center space-x-4" >
                                        <span class = "text-neutral-600" >已选 <span
                                                class = "text-primary font-medium" >4</span > 件</span >
                                        <label class = "flex items-center cursor-pointer" >
                                            <input type = "checkbox"
                                                   class = "form-checkbox h-5 w-5 text-primary rounded border-neutral-300 focus:ring-primary"
                                                   checked >
                                            <span class = "ml-2 text-sm" >全选</span >
                                        </label >
                                    </div >
                                </div >
                            </div >

                            <!-- 推荐商品 -->
                            <div class = "mt-8 bg-white rounded-xl shadow-sm overflow-hidden" >
                                <div class = "px-6 py-4 border-b border-neutral-200" >
                                    <h2 class = "font-semibold text-lg" >猜你喜欢</h2 >
                                </div >
                                <div class = "p-4" >
                                    <div class = "grid grid-cols-2 sm:grid-cols-3 md:grid-cols-4 gap-4" >
                                        <!-- 推荐商品1 -->
                                        <div class = "rounded-lg overflow-hidden hover-scale" >
                                            <div class = "relative" >
                                                <img src = "https://picsum.photos/id/1074/200/200"
                                                     alt = "情侣纯棉睡衣套装" class = "w-full h-36 object-cover" >
                                                <div class = "absolute top-2 right-2" >
                                                    <button class = "w-7 h-7 rounded-full bg-white/80 backdrop-blur-sm flex items-center justify-center text-neutral-500 hover:text-primary transition-custom" >
                                                        <i class = "fa-regular fa-heart" ></i >
                                                    </button >
                                                </div >
                                            </div >
                                            <div class = "p-2" >
                                                <h3 class = "font-medium text-sm line-clamp-1" >情侣纯棉睡衣套装</h3 >
                                                <div class = "flex items-center justify-between mt-1" >
                                                    <span class = "text-primary font-bold text-sm" >¥259</span >
                                                    <button class = "w-7 h-7 rounded-full bg-primary/10 text-primary flex items-center justify-center hover:bg-primary hover:text-white transition-custom" >
                                                        <i class = "fa-solid fa-shopping-cart" ></i >
                                                    </button >
                                                </div >
                                            </div >
                                        </div >

                                        <!-- 推荐商品2 -->
                                        <div class = "rounded-lg overflow-hidden hover-scale" >
                                            <div class = "relative" >
                                                <img src = "https://picsum.photos/id/1080/200/200" alt = "情侣手表"
                                                     class = "w-full h-36 object-cover" >
                                                <div class = "absolute top-2 right-2" >
                                                    <button class = "w-7 h-7 rounded-full bg-white/80 backdrop-blur-sm flex items-center justify-center text-neutral-500 hover:text-primary transition-custom" >
                                                        <i class = "fa-regular fa-heart" ></i >
                                                    </button >
                                                </div >
                                            </div >
                                            <div class = "p-2" >
                                                <h3 class = "font-medium text-sm line-clamp-1" >情侣手表</h3 >
                                                <div class = "flex items-center justify-between mt-1" >
                                                    <span class = "text-primary font-bold text-sm" >¥599</span >
                                                    <button class = "w-7 h-7 rounded-full bg-primary/10 text-primary flex items-center justify-center hover:bg-primary hover:text-white transition-custom" >
                                                        <i class = "fa-solid fa-shopping-cart" ></i >
                                                    </button >
                                                </div >
                                            </div >
                                        </div >

                                        <!-- 推荐商品3 -->
                                        <div class = "rounded-lg overflow-hidden hover-scale" >
                                            <div class = "relative" >
                                                <img src = "https://picsum.photos/id/1082/200/200" alt = "情侣蓝牙音箱"
                                                     class = "w-full h-36 object-cover" >
                                                <div class = "absolute top-2 right-2" >
                                                    <button class = "w-7 h-7 rounded-full bg-white/80 backdrop-blur-sm flex items-center justify-center text-neutral-500 hover:text-primary transition-custom" >
                                                        <i class = "fa-regular fa-heart" ></i >
                                                    </button >
                                                </div >
                                            </div >
                                            <div class = "p-2" >
                                                <h3 class = "font-medium text-sm line-clamp-1" >情侣蓝牙音箱</h3 >
                                                <div class = "flex items-center justify-between mt-1" >
                                                    <span class = "text-primary font-bold text-sm" >¥399</span >
                                                    <button class = "w-7 h-7 rounded-full bg-primary/10 text-primary flex items-center justify-center hover:bg-primary hover:text-white transition-custom" >
                                                        <i class = "fa-solid fa-shopping-cart" ></i >
                                                    </button >
                                                </div >
                                            </div >
                                        </div >

                                        <!-- 推荐商品4 -->
                                        <div class = "rounded-lg overflow-hidden hover-scale" >
                                            <div class = "relative" >
                                                <img src = "https://picsum.photos/id/1083/200/200" alt = "情侣保温杯"
                                                     class = "w-full h-36 object-cover" >
                                                <div class = "absolute top-2 right-2" >
                                                    <button class = "w-7 h-7 rounded-full bg-white/80 backdrop-blur-sm flex items-center justify-center text-neutral-500 hover:text-primary transition-custom" >
                                                        <i class = "fa-regular fa-heart" ></i >
                                                    </button >
                                                </div >
                                            </div >
                                            <div class = "p-2" >
                                                <h3 class = "font-medium text-sm line-clamp-1" >情侣保温杯</h3 >
                                                <div class = "flex items-center justify-between mt-1" >
                                                    <span class = "text-primary font-bold text-sm" >¥159</span >
                                                    <button class = "w-7 h-7 rounded-full bg-primary/10 text-primary flex items-center justify-center hover:bg-primary hover:text-white transition-custom" >
                                                        <i class = "fa-solid fa-shopping-cart" ></i >
                                                    </button >
                                                </div >
                                            </div >
                                        </div >
                                    </div >
                                </div >
                            </div >
                        </div >

                        <!-- 订单摘要 -->
                        <div class = "lg:col-span-1" >
                            <div class = "bg-white rounded-xl shadow-sm overflow-hidden sticky top-24" >
                                <div class = "px-6 py-4 border-b border-neutral-200" >
                                    <h2 class = "font-semibold text-lg" >订单摘要</h2 >
                                </div >

                                <div class = "px-6 py-4 space-y-3" >
                                    <div class = "flex justify-between" >
                                        <span class = "text-neutral-600" >商品总价</span >
                                        <span class = "font-medium" >¥1,064</span >
                                    </div >
                                    <div class = "flex justify-between" >
                                        <span class = "text-neutral-600" >优惠折扣</span >
                                        <span class = "font-medium text-red-500" >-¥260</span >
                                    </div >
                                    <div class = "flex justify-between" >
                                        <span class = "text-neutral-600" >运费</span >
                                        <span class = "font-medium text-green-500" >免运费</span >
                                    </div >
                                    <div class = "flex justify-between" >
                                        <span class = "text-neutral-600" >税费</span >
                                        <span class = "font-medium" >¥0</span >
                                    </div >
                                    <div class = "border-t border-neutral-200 pt-4" >
                                        <div class = "flex justify-between" >
                                            <span class = "font-semibold" >实付款</span >
                                            <span class = "font-bold text-xl text-primary" >¥804</span >
                                        </div >
                                    </div >

                                    <div class = "mt-4" >
                                        <button class = "w-full py-3 bg-gradient-love text-white rounded-lg font-medium hover:opacity-90 transition-custom shadow-sm btn-pulse" >
                                            提交订单
                                        </button >
                                    </div >

                                    <div class = "mt-3 text-center" >
                                        <span class = "text-neutral-500 text-sm" >支持多种支付方式</span >
                                        <div class = "flex justify-center space-x-3 mt-2" >
                                            <i class = "fa-brands fa-alipay text-blue-500 text-xl" ></i >
                                            <i class = "fa-brands fa-weixin text-green-500 text-xl" ></i >
                                            <i class = "fa-brands fa-cc-visa text-blue-700 text-xl" ></i >
                                            <i class = "fa-brands fa-cc-mastercard text-red-600 text-xl" ></i >
                                        </div >
                                    </div >
                                </div >

                                <!-- 优惠券 -->
                                <div class = "px-6 py-4 border-t border-neutral-200" >
                                    <button class = "flex justify-between items-center w-full text-left" >
                                        <div class = "flex items-center" >
                                            <i class = "fa-solid fa-ticket text-primary mr-2" ></i >
                                            <span >优惠券</span >
                                        </div >
                                        <div class = "flex items-center" >
                                            <span class = "text-primary mr-1" >2张可用</span >
                                            <i class = "fa-solid fa-chevron-right text-neutral-400" ></i >
                                        </div >
                                    </button >
                                </div >

                                <!-- 收货地址 -->
                                <div class = "px-6 py-4 border-t border-neutral-200" >
                                    <button class = "flex justify-between items-center w-full text-left" >
                                        <div class = "flex items-center" >
                                            <i class = "fa-solid fa-map-marker text-primary mr-2" ></i >
                                            <span >收货地址</span >
                                        </div >
                                        <div class = "flex items-center" >
                                            <span class = "text-neutral-600 mr-1" >张先生 · 138****6789</span >
                                            <i class = "fa-solid fa-chevron-right text-neutral-400" ></i >
                                        </div >
                                    </button >
                                </div >
                            </div >
                        </div >
                    </div >
                </div >
            </main >

            <!-- 页脚 -->
            <footer class = "bg-white py-12 border-t border-neutral-200" >
                <div class = "container mx-auto px-4" >
                    <div class = "grid grid-cols-1 md:grid-cols-4 gap-8" >
                        <div >
                            <div class = "flex items-center space-x-2 mb-4" >
                                <div class = "w-10 h-10 rounded-full bg-gradient-love flex items-center justify-center text-white" >
                                    <i class = "fa-solid fa-heart" ></i >
                                </div >
                                <span class = "text-xl font-bold text-neutral-800" >LoveSync</span >
                            </div >
                            <p class = "text-neutral-600 mb-4" >为爱定制，共享美好。打造专属于你们的情侣生活。</p >
                            <div class = "flex space-x-4" >
                                <a href = "#"
                                   class = "w-8 h-8 rounded-full bg-neutral-100 flex items-center justify-center text-neutral-600 hover:bg-primary hover:text-white transition-custom" >
                                    <i class = "fa-brands fa-weibo" ></i >
                                </a >
                                <a href = "#"
                                   class = "w-8 h-8 rounded-full bg-neutral-100 flex items-center justify-center text-neutral-600 hover:bg-primary hover:text-white transition-custom" >
                                    <i class = "fa-brands fa-weixin" ></i >
                                </a >
                                <a href = "#"
                                   class = "w-8 h-8 rounded-full bg-neutral-100 flex items-center justify-center text-neutral-600 hover:bg-primary hover:text-white transition-custom" >
                                    <i class = "fa-brands fa-instagram" ></i >
                                </a >
                                <a href = "#"
                                   class = "w-8 h-8 rounded-full bg-neutral-100 flex items-center justify-center text-neutral-600 hover:bg-primary hover:text-white transition-custom" >
                                    <i class = "fa-brands fa-twitter" ></i >
                                </a >
                            </div >
                        </div >

                        <div >
                            <h3 class = "font-semibold text-lg mb-4" >关于我们</h3 >
                            <ul class = "space-y-2" >
                                <li ><a href = "#"
                                        class = "text-neutral-600 hover:text-primary transition-custom" >公司简介</a ></li >
                                <li ><a href = "#"
                                        class = "text-neutral-600 hover:text-primary transition-custom" >加入我们</a ></li >
                                <li ><a href = "#"
                                        class = "text-neutral-600 hover:text-primary transition-custom" >联系方式</a ></li >
                                <li ><a href = "#"
                                        class = "text-neutral-600 hover:text-primary transition-custom" >隐私政策</a ></li >
                                <li ><a href = "#"
                                        class = "text-neutral-600 hover:text-primary transition-custom" >服务条款</a ></li >
                            </ul >
                        </div >

                        <div >
                            <h3 class = "font-semibold text-lg mb-4" >帮助中心</h3 >
                            <ul class = "space-y-2" >
                                <li ><a href = "#"
                                        class = "text-neutral-600 hover:text-primary transition-custom" >常见问题</a ></li >
                                <li ><a href = "#"
                                        class = "text-neutral-600 hover:text-primary transition-custom" >购物指南</a ></li >
                                <li ><a href = "#"
                                        class = "text-neutral-600 hover:text-primary transition-custom" >支付方式</a ></li >
                                <li ><a href = "#"
                                        class = "text-neutral-600 hover:text-primary transition-custom" >配送说明</a ></li >
                                <li ><a href = "#"
                                        class = "text-neutral-600 hover:text-primary transition-custom" >退换政策</a ></li >
                            </ul >
                        </div >

                        <div >
                            <h3 class = "font-semibold text-lg mb-4" >客户服务</h3 >
                            <ul class = "space-y-2" >
                                <li ><a href = "#"
                                        class = "text-neutral-600 hover:text-primary transition-custom" >在线客服</a ></li >
                                <li ><a href = "#"
                                        class = "text-neutral-600 hover:text-primary transition-custom" >客服电话</a ></li >
                                <li ><a href = "#"
                                        class = "text-neutral-600 hover:text-primary transition-custom" >工作时间</a ></li >
                                <li ><a href = "#"
                                        class = "text-neutral-600 hover:text-primary transition-custom" >意见反馈</a ></li >
                            </ul >
                        </div >

                        </div >

                        <div class = "border-t border-neutral-200 mt-8 pt-8 flex flex-col md:flex-row justify-between items-center" >
                            <p class = "text-neutral-500 text-sm mb-4 md:mb-0" >© 2025 LoveSync. 保留所有权利。</p >
                            <div class = "flex space-x-4" >
                                <a href = "#" class = "text-neutral-500 hover:text-primary text-sm transition-custom" >隐私政策</a >
                                <a href = "#" class = "text-neutral-500 hover:text-primary text-sm transition-custom" >服务条款</a >
                                <a href = "#" class = "text-neutral-500 hover:text-primary text-sm transition-custom" >网站地图</a >
                            </div >
                        </div >
                </div >
            </footer >

<script >
    // 导航栏滚动效果
    window.addEventListener('scroll', function () {
        const header = document.querySelector('header');
        if (window.scrollY > 50) {
            header.classList.add('shadow-md');
            header.classList.remove('shadow-sm');
        } else {
            header.classList.remove('shadow-md');
            header.classList.add('shadow-sm');
        }
    });

    // 用户下拉菜单
    const userAvatar = document.getElementById('userAvatar');
    const userOptions = document.getElementById('userOptions');
    const userDropdown = document.getElementById('userDropdown');

    let userCloseTimer;

    // 鼠标经过头像时打开菜单
    userAvatar.addEventListener('mouseenter', function () {
        clearTimeout(userCloseTimer);
        userOptions.classList.remove('hidden');
    });

    // 鼠标悬停在下拉菜单时保持菜单打开
    userDropdown.addEventListener('mouseenter', function () {
        clearTimeout(userCloseTimer);
        userOptions.classList.remove('hidden');
    });

    // 鼠标离开下拉菜单时关闭菜单
    userDropdown.addEventListener('mouseleave', function () {
        userCloseTimer = setTimeout(() => {
            userOptions.classList.add('hidden');
        }, 500);
    });

    // 更多下拉菜单
    document.addEventListener('DOMContentLoaded', function () {
        const moreButton = document.getElementById('moreButton');
        const moreOptions = document.getElementById('moreOptions');
        const moreDropdown = document.getElementById('moreDropdown');

        let moreCloseTimer;

        // 鼠标经过按钮时打开菜单
        moreButton.addEventListener('mouseenter', function () {
            clearTimeout(moreCloseTimer);
            moreOptions.classList.remove('hidden');
        });

        // 鼠标悬停在下拉菜单时保持菜单打开
        moreDropdown.addEventListener('mouseenter', function () {
            clearTimeout(moreCloseTimer);
            moreOptions.classList.remove('hidden');
        });

        // 鼠标离开下拉菜单时关闭菜单
        moreDropdown.addEventListener('mouseleave', function () {
            moreCloseTimer = setTimeout(() => {
                moreOptions.classList.add('hidden');
            }, 500);
        });
    });

    // 移动端菜单切换
    const menuToggle = document.getElementById('menu-toggle');
    const mobileMenu = document.getElementById('mobile-menu');

    menuToggle.addEventListener('click', function (e) {
        e.stopPropagation();
        if (mobileMenu.classList.contains('hidden')) {
            mobileMenu.classList.remove('hidden');
            setTimeout(() => {
                mobileMenu.classList.remove('opacity-0', '-translate-y-2');
            }, 10);
        } else {
            mobileMenu.classList.add('opacity-0', '-translate-y-2');
            setTimeout(() => {
                mobileMenu.classList.add('hidden');
            }, 200);
        }
    });

    // 商品数量调整
    const quantityInputs = document.querySelectorAll('input[type="number"]');
    quantityInputs.forEach(input => {
        const minusBtn = input.parentElement.querySelector('button:first-child');
        const plusBtn = input.parentElement.querySelector('button:last-child');

        minusBtn.addEventListener('click', () => {
            if (parseInt(input.value) > 1) {
                input.value = parseInt(input.value) - 1;
                updateTotal();
            }
        });

        plusBtn.addEventListener('click', () => {
            input.value = parseInt(input.value) + 1;
            updateTotal();
        });

        input.addEventListener('change', updateTotal);
    });

    // 全选/取消全选
    const selectAllCheckbox = document.querySelector('.bg-neutral-50 input[type="checkbox"]');
    const itemCheckboxes = document.querySelectorAll('.divide-y input[type="checkbox"]');

    selectAllCheckbox.addEventListener('change', function () {
        itemCheckboxes.forEach(checkbox => {
            checkbox.checked = this.checked;
        });
        updateTotal();
    });

    // 监听商品复选框变化
    itemCheckboxes.forEach(checkbox => {
        checkbox.addEventListener('change', updateTotal);
    });

    // 删除商品
    const deleteButtons = document.querySelectorAll('.fa-trash');
    deleteButtons.forEach(button => {
        button.parentElement.addEventListener('click', function () {
            const productCard = this.closest('.flex.items-start');
            productCard.classList.add('opacity-0');
            setTimeout(() => {
                productCard.remove();
                updateTotal();
                updateSelectedCount();
            }, 300);
        });
    });

    // 更新已选商品数量
    function updateSelectedCount() {
        const checkedCount = document.querySelectorAll('.divide-y input[type="checkbox"]:checked').length;
        document.querySelector('.bg-neutral-50 .text-primary.font-medium').textContent = checkedCount;
    }

    // 收藏商品
    const favoriteButtons = document.querySelectorAll('.fa-heart');
    favoriteButtons.forEach(button => {
        button.parentElement.addEventListener('click', function () {
            this.classList.toggle('text-primary');
            this.classList.toggle('text-neutral-500');
            this.querySelector('i').classList.toggle('fa-regular');
            this.querySelector('i').classList.toggle('fa-solid');
        });
    });

    // 更新购物车总计
    function updateTotal() {
        let totalItems = 0;
        let subtotal = 0;

        itemCheckboxes.forEach((checkbox, index) => {
            if (checkbox.checked && quantityInputs[index]) {
                const quantity = parseInt(quantityInputs[index].value) || 1;
                totalItems += quantity;

                const priceText = checkbox.closest('.flex.items-start')?.querySelector('.font-bold.text-primary')?.textContent || '¥0';
                const price = parseFloat(priceText.replace('¥', '')) || 0;
                subtotal += price * quantity;
            }
        });

        document.querySelector('.bg-neutral-50 .text-neutral-600 span').textContent = totalItems;
        document.querySelector('.sticky .flex.justify-between:nth-child(1) .font-medium').textContent = `¥${subtotal.toFixed(2)}`;

        // 计算优惠折扣
        const discountRules = [
            {min: 1000, discount: 300},
            {min: 500, discount: 150},
            {min: 200, discount: 50}
        ];

        let discount = 0;
        for (const rule of discountRules) {
            if (subtotal >= rule.min) {
                discount = rule.discount;
                break;
            }
        }

        document.querySelector('.sticky .flex.justify-between:nth-child(2) .text-red-500').textContent = `-¥${discount.toFixed(2)}`;

        // 计算最终价格
        const total = subtotal - discount;
        document.querySelector('.sticky .font-bold.text-xl.text-primary').textContent = `¥${total.toFixed(2)}`;
    }

    // 优惠券下拉菜单修复
    function setupCouponDropdown() {
        // 更精确的选择器定位优惠券按钮
        const couponButton = document.querySelector('.fa-ticket').closest('button');
        if (!couponButton) return;

        // 创建优惠券下拉菜单
        const couponDropdown = document.createElement('div');
        couponDropdown.className = 'absolute right-0 left-0 mt-2 bg-white rounded-lg shadow-xl z-50 invisible opacity-0 transform -translate-y-2 transition-all duration-200';
        couponDropdown.innerHTML = `
    <div class="p-4">
        <h4 class="font-medium mb-3">选择优惠券</h4>
        <div class="space-y-3">
            <div class="border border-primary rounded-lg p-3 flex items-center">
                <input type="radio" name="coupon" id="coupon1" class="mr-3" checked>
                <label for="coupon1">
                    <div class="flex justify-between">
                        <span class="font-medium">满200减50</span>
                        <span class="text-red-500 font-medium">已选择</span>
                    </div>
                    <p class="text-sm text-neutral-500 mt-1">有效期至: 2025-07-31</p>
                </label>
            </div>
            <div class="border border-neutral-200 rounded-lg p-3 flex items-center hover:border-primary transition-custom">
                <input type="radio" name="coupon" id="coupon2" class="mr-3">
                <label for="coupon2">
                    <div class="flex justify-between">
                        <span class="font-medium">满500减150</span>
                        <span class="text-neutral-400 text-sm">未使用</span>
                    </div>
                    <p class="text-sm text-neutral-500 mt-1">有效期至: 2025-07-20</p>
                </label>
            </div>
            <div class="border border-neutral-200 rounded-lg p-3 flex items-center hover:border-primary transition-custom">
                <input type="radio" name="coupon" id="coupon3" class="mr-3">
                <label for="coupon3">
                    <div class="flex justify-between">
                        <span class="font-medium">满1000减300</span>
                        <span class="text-neutral-400 text-sm">未使用</span>
                    </div>
                    <p class="text-sm text-neutral-500 mt-1">有效期至: 2025-08-15</p>
                </label>
            </div>
        </div>
        <button class="w-full mt-4 py-2 border border-primary text-primary rounded-lg hover:bg-primary hover:text-white transition-custom">
            查看更多优惠券
        </button>
    </div>
    `;

        // 设置父容器为相对定位，确保下拉菜单定位正确
        couponButton.parentNode.style.position = 'relative';
        couponButton.parentNode.appendChild(couponDropdown);

        // 优惠券按钮点击事件
        couponButton.addEventListener('click', function (e) {
            e.stopPropagation();
            // 切换优惠券下拉菜单显示状态
            couponDropdown.classList.toggle('invisible');
            couponDropdown.classList.toggle('opacity-0');
            couponDropdown.classList.toggle('-translate-y-2');

            // 关闭其他下拉菜单
            addressDropdown?.classList.add('invisible', 'opacity-0', '-translate-y-2');
            searchSuggestions?.classList.add('invisible', 'opacity-0', '-translate-y-2');
        });

        // 优惠券单选按钮事件 - 更新总价
        const couponRadios = couponDropdown.querySelectorAll('input[type="radio"]');
        couponRadios.forEach(radio => {
            radio.addEventListener('change', function () {
                updateTotal();
            });
        });

        return couponDropdown;
    }

    // 收货地址下拉菜单修复
    function setupAddressDropdown() {
        // 更精确的选择器定位地址按钮
        const addressButton = document.querySelector('.fa-map-marker').closest('button');
        if (!addressButton) return;

        // 创建地址下拉菜单
        const addressDropdown = document.createElement('div');
        addressDropdown.className = 'absolute right-0 left-0 mt-2 bg-white rounded-lg shadow-xl z-50 invisible opacity-0 transform -translate-y-2 transition-all duration-200';
        addressDropdown.innerHTML = `
    <div class="p-4">
        <div class="flex justify-between items-center mb-4">
            <h4 class="font-medium">收货地址</h4>
            <button class="text-primary text-sm">添加新地址</button>
        </div>
        <div class="space-y-3">
            <div class="border-2 border-primary rounded-lg p-3 relative">
                <div class="absolute -top-1 -right-1 bg-primary text-white text-xs px-2 py-0.5 rounded">默认</div>
                <p class="font-medium">张先生 · 138****6789</p>
                <p class="text-sm text-neutral-600 mt-1">北京市朝阳区建国路88号爱思大厦15层1501</p>
                <div class="flex justify-between mt-2">
                    <button class="text-sm text-neutral-500 hover:text-primary">编辑</button>
                    <button class="text-sm text-neutral-500 hover:text-primary">设为默认</button>
                </div>
            </div>
            <div class="border border-neutral-200 rounded-lg p-3 hover:border-primary transition-custom">
                <p class="font-medium">李女士 · 139****8765</p>
                <p class="text-sm text-neutral-600 mt-1">上海市浦东新区张江高科技园区博云路2号</p>
                <div class="flex justify-between mt-2">
                    <button class="text-sm text-neutral-500 hover:text-primary">编辑</button>
                    <button class="text-sm text-neutral-500 hover:text-primary">设为默认</button>
                </div>
            </div>
        </div>
    </div>
    `;

        // 设置父容器为相对定位，确保下拉菜单定位正确
        addressButton.parentNode.style.position = 'relative';
        addressButton.parentNode.appendChild(addressDropdown);

        // 地址按钮点击事件
        addressButton.addEventListener('click', function (e) {
            e.stopPropagation();
            // 切换地址下拉菜单显示状态
            addressDropdown.classList.toggle('invisible');
            addressDropdown.classList.toggle('opacity-0');
            addressDropdown.classList.toggle('-translate-y-2');

            // 关闭其他下拉菜单
            couponDropdown?.classList.add('invisible', 'opacity-0', '-translate-y-2');
            searchSuggestions?.classList.add('invisible', 'opacity-0', '-translate-y-2');
        });

        return addressDropdown;
    }

    // 搜索建议下拉菜单
    const searchInput = document.querySelector('input[placeholder="搜索情侣商品..."]');
    const searchSuggestions = document.getElementById('searchSuggestions');

    if (searchInput && searchSuggestions) {
        searchInput.addEventListener('focus', function () {
            searchSuggestions.classList.remove('invisible', 'opacity-0', '-translate-y-2');
            // 关闭其他下拉菜单
            couponDropdown?.classList.add('invisible', 'opacity-0', '-translate-y-2');
            addressDropdown?.classList.add('invisible', 'opacity-0', '-translate-y-2');
        });

        searchInput.addEventListener('blur', function () {
            setTimeout(() => {
                searchSuggestions.classList.add('invisible', 'opacity-0', '-translate-y-2');
            }, 200);
        });
    }

    // 点击页面其他区域关闭所有下拉菜单
    document.addEventListener('click', function (e) {
        const couponButton = document.querySelector('.fa-ticket').closest('button');
        const addressButton = document.querySelector('.fa-map-marker').closest('button');

        // 检查点击是否在优惠券按钮或下拉菜单内
        const isCouponClick = couponButton && (couponButton.contains(e.target) || couponDropdown?.contains(e.target));
        // 检查点击是否在地址按钮或下拉菜单内
        const isAddressClick = addressButton && (addressButton.contains(e.target) || addressDropdown?.contains(e.target));
        // 检查点击是否在搜索区域内
        const isSearchClick = searchInput && (searchInput.contains(e.target) || searchSuggestions?.contains(e.target));

        // 如果点击不在这些区域内，关闭所有下拉菜单
        if (!isCouponClick && !isAddressClick && !isSearchClick) {
            couponDropdown?.classList.add('invisible', 'opacity-0', '-translate-y-2');
            addressDropdown?.classList.add('invisible', 'opacity-0', '-translate-y-2');
            searchSuggestions?.classList.add('invisible', 'opacity-0', '-translate-y-2');
        }
    });

    // 初始化下拉菜单
    let couponDropdown, addressDropdown;
    document.addEventListener('DOMContentLoaded', function () {
        couponDropdown = setupCouponDropdown();
        addressDropdown = setupAddressDropdown();
        updateTotal();
    });
</script >

</body >
</html >
