<!DOCTYPE html>
<html lang = "zh-CN" >
<head >
    <meta charset = "UTF-8" >
    <meta name = "viewport" content = "width=device-width, initial-scale=1.0" >
    <title >LoveSync 情侣商城 - 购物车</title >
    <script src = "https://cdn.tailwindcss.com" ></script >
    <link href = "https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.7.2/css/all.min.css" rel = "stylesheet" >
    <link href = "https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap"
          rel = "stylesheet" >
    <script >
        tailwind.config = {
            theme: {
                extend: {
                    colors: {
                        primary: '#FF6B8B', // 爱情粉色作为主色调
                        secondary: '#722ED1', // 紫色作为辅助色
                        neutral: {
                            100: '#F9F9F9',
                            200: '#F0F0F0',
                            300: '#E0E0E0',
                            400: '#BDBDBD',
                            500: '#9E9E9E',
                            600: '#757575',
                            700: '#616161',
                            800: '#424242',
                            900: '#212121',
                        }
                    },
                    fontFamily: {
                        inter: ['Inter', 'sans-serif'],
                    },
                }
            }
        }
    </script >
    <style type = "text/tailwindcss" >
        @layer utilities {
            .transition-custom {
                transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
            }

            .bg-gradient-love {
                background: linear-gradient(135deg, #FF6B8B 0%, #722ED1 100%);
            }

            .hover-scale {
                transition: transform 0.3s ease;
            }

            .hover-scale:hover {
                transform: scale(1.03);
            }

            .form-input-focus {
                transition: all 0.3s ease;
            }

            .form-input-focus:focus {
                transform: translateY(-2px);
                box-shadow: 0 10px 25px -5px rgba(255, 107, 139, 0.1), 0 10px 10px -5px rgba(255, 107, 139, 0.04);
            }

            .btn-pulse {
                animation: pulse 2s infinite;
            }

            @keyframes pulse {
                0% {
                    box-shadow: 0 0 0 0 rgba(255, 107, 139, 0.4);
                }
                70% {
                    box-shadow: 0 0 0 10px rgba(255, 107, 139, 0);
                }
                100% {
                    box-shadow: 0 0 0 0 rgba(255, 107, 139, 0);
                }
            }

            .float-animation {
                animation: float 6s ease-in-out infinite;
            }

            @keyframes float {
                0% {
                    transform: translateY(0px);
                }
                50% {
                    transform: translateY(-20px);
                }
                100% {
                    transform: translateY(0px);
                }
            }

            .product-card {
                transition: all 0.3s ease;
            }

            .product-card:hover {
                box-shadow: 0 15px 30px rgba(0, 0, 0, 0.1);
                transform: translateY(-5px);
            }

            .scrollbar-hide::-webkit-scrollbar {
                display: none;
            }

            .scrollbar-hide {
                -ms-overflow-style: none;
                scrollbar-width: none;
            }

            .text-shadow {
                text-shadow: 0 2px 4px rgba(0, 0, 0, 0.1);
            }

            .text-gradient {
                background-clip: text;
                -webkit-background-clip: text;
                color: transparent;
                background-image: linear-gradient(135deg, #FF6B8B 0%, #722ED1 100%);
            }

            .card-shadow {
                box-shadow: 0 10px 25px -5px rgba(0, 0, 0, 0.05), 0 10px 10px -5px rgba(0, 0, 0, 0.01);
            }
        }
    </style >
</head >
<body class = "font-inter bg-neutral-100 text-neutral-800 min-h-screen flex flex-col overflow-x-hidden relative" >
    <!-- 背景装饰元素 -->
    <div class = "absolute top-0 left-0 w-full h-full overflow-hidden pointer-events-none" >
        <div class = "absolute -top-40 -left-40 w-80 h-80 bg-primary/10 rounded-full filter blur-3xl float-animation" ></div >
        <div class = "absolute -bottom-20 -right-20 w-80 h-80 bg-secondary/10 rounded-full filter blur-3xl float-animation"
             style = "animation-delay: -2s;" ></div >
        <div class = "absolute top-1/3 right-1/4 w-40 h-40 bg-primary/5 rounded-full filter blur-2xl float-animation"
             style = "animation-delay: -4s;" ></div >
    </div >

    <!-- 导航栏 -->
    <header class = "fixed w-full top-0 z-50 transition-all duration-300 bg-white/95 backdrop-blur-md shadow-sm py-3" >
        <div class = "container mx-auto px-4 flex items-center justify-between" >
            <!-- 品牌标识 -->
            <a href = "{% url 'index' %}" class = "flex items-center space-x-2" >
                <div class = "w-10 h-10 rounded-full bg-gradient-love flex items-center justify-center text-white shadow-md" >
                    <i class = "fa-solid fa-heart text-xl" ></i >
                </div >
                <span class = "text-xl font-bold text-neutral-800 tracking-tight" >LoveSync</span >
            </a >

            <!-- 桌面端导航菜单 -->
            <nav class = "hidden md:flex items-center space-x-6" >
                <a href = "{% url 'community' %}"
                   class = "text-neutral-700 hover:text-primary transition-custom font-medium px-1 py-2 border-b-2 border-transparent hover:border-primary" >爱享公社</a >
                <a href = "{% url 'moments' %}"
                   class = "text-neutral-700 hover:text-primary transition-custom font-medium px-1 py-2 border-b-2 border-transparent hover:border-primary" >心动轨迹</a >
                <a href = "{% url 'photo_album' %}"
                   class = "text-neutral-700 hover:text-primary transition-custom font-medium px-1 py-2 border-b-2 border-transparent hover:border-primary" >心跳相簿</a >
                <a href = "{% url 'lovesync' %}"
                   class = "text-neutral-700 hover:text-primary transition-custom font-medium px-1 py-2 border-b-2 border-transparent hover:border-primary" >双人日记</a >

                <!-- 更多下拉菜单 -->
                <div class = "relative" id = "moreDropdown" >
                    <button class = "text-neutral-700 hover:text-primary transition-custom font-medium flex items-center px-1 py-2"
                            id = "moreButton" >
                        更多 <i class = "fa-solid fa-chevron-down ml-1 text-xs" ></i >
                    </button >
                    <div class = "absolute right-0 mt-2 w-48 bg-white rounded-lg shadow-xl py-2 z-50 hidden"
                         id = "moreOptions" >
                        <a href = "#"
                           class = "block px-4 py-2 text-neutral-700 hover:bg-neutral-50 transition-custom flex items-center" >
                            <i class = "fa-solid fa-calendar-heart mr-2 w-5 text-center" ></i >纪念日提醒
                        </a >
                        <a href = "#"
                           class = "block px-4 py-2 text-neutral-700 hover:bg-neutral-50 transition-custom flex items-center" >
                            <i class = "fa-solid fa-gift mr-2 w-5 text-center" ></i >礼物推荐
                        </a >
                        <a href = "#"
                           class = "block px-4 py-2 text-neutral-700 hover:bg-neutral-50 transition-custom flex items-center" >
                            <i class = "fa-solid fa-map-marker-heart mr-2 w-5 text-center" ></i >情侣地点
                        </a >
                        <a href = "#"
                           class = "block px-4 py-2 text-neutral-700 hover:bg-neutral-50 transition-custom flex items-center" >
                            <i class = "fa-solid fa-question-circle mr-2 w-5 text-center" ></i >爱情测试
                        </a >
                    </div >
                </div >
            </nav >

            <!-- 内容过滤器 -->
            <div class = "bg-white/95 backdrop-blur-md rounded-xl shadow-lg p-2 flex justify-between items-center hover-scale" >
                <div class = "relative w-full" >
                    <input type = "text" placeholder = "搜索情侣商品..."
                           class = "pl-10 pr-40 py-2 rounded-full border border-neutral-200 focus:outline-none focus:ring-2 focus:ring-primary/50 form-input-focus text-sm w-full" >
                    <i class = "fa-solid fa-search absolute left-4 top-1/2 -translate-y-1/2 text-neutral-400" ></i >

                    <!-- 搜索热词下拉菜单 -->
                    <div id = "searchSuggestions"
                         class = "absolute left-0 right-0 top-full mt-1 bg-white rounded-xl shadow-xl z-40 invisible opacity-0 transform -translate-y-2 transition-all duration-200" >
                        <div class = "p-3" >
                            <div class = "flex justify-between items-center mb-2" >
                                <h4 class = "font-medium text-neutral-800" >热门搜索</h4 >
                                <button class = "text-xs text-neutral-500 hover:text-primary" >清除历史</button >
                            </div >

                            <div class = "space-y-2" >
                                <a href = "#"
                                   class = "flex items-center p-2 rounded-lg hover:bg-neutral-50 transition-custom" >
                                    <i class = "fa-solid fa-fire text-primary mr-3 w-5 text-center" ></i >
                                    <span >情侣T恤夏季新款</span >
                                    <span class = "ml-auto text-xs font-medium text-primary" >2.5万+</span >
                                </a >

                                <a href = "#"
                                   class = "flex items-center p-2 rounded-lg hover:bg-neutral-50 transition-custom" >
                                    <i class = "fa-solid fa-fire text-primary mr-3 w-5 text-center" ></i >
                                    <span >纯银情侣手链</span >
                                    <span class = "ml-auto text-xs font-medium text-primary" >1.8万+</span >
                                </a >

                                <a href = "#"
                                   class = "flex items-center p-2 rounded-lg hover:bg-neutral-50 transition-custom" >
                                    <i class = "fa-solid fa-fire text-primary mr-3 w-5 text-center" ></i >
                                    <span >情侣保温杯</span >
                                    <span class = "ml-auto text-xs font-medium text-primary" >1.2万+</span >
                                </a >

                                <a href = "#"
                                   class = "flex items-center p-2 rounded-lg hover:bg-neutral-50 transition-custom" >
                                    <i class = "fa-solid fa-star text-yellow-400 mr-3 w-5 text-center" ></i >
                                    <span >情侣手机壳定制</span >
                                    <span class = "ml-auto text-xs font-medium text-primary" >9.8千+</span >
                                </a >

                                <a href = "#"
                                   class = "flex items-center p-2 rounded-lg hover:bg-neutral-50 transition-custom" >
                                    <i class = "fa-solid fa-star text-yellow-400 mr-3 w-5 text-center" ></i >
                                    <span >情侣睡衣套装</span >
                                    <span class = "ml-auto text-xs font-medium text-primary" >8.7千+</span >
                                </a >
                            </div >

                            <div class = "border-t border-neutral-100 my-3 pt-3" >
                                <h4 class = "font-medium text-neutral-800 mb-2" >搜索历史</h4 >
                                <div class = "space-y-2" >
                                    <a href = "#"
                                       class = "flex items-center p-2 rounded-lg hover:bg-neutral-50 transition-custom" >
                                        <i class = "fa-solid fa-clock-rotate-left text-neutral-400 mr-3 w-5 text-center" ></i >
                                        <span >情侣手表</span >
                                    </a >

                                    <a href = "#"
                                       class = "flex items-center p-2 rounded-lg hover:bg-neutral-50 transition-custom" >
                                        <i class = "fa-solid fa-clock-rotate-left text-neutral-400 mr-3 w-5 text-center" ></i >
                                        <span >情侣马克杯</span >
                                    </a >

                                    <a href = "#"
                                       class = "flex items-center p-2 rounded-lg hover:bg-neutral-50 transition-custom" >
                                        <i class = "fa-solid fa-clock-rotate-left text-neutral-400 mr-3 w-5 text-center" ></i >
                                        <span >情侣睡衣</span >
                                    </a >
                                </div >
                            </div >
                        </div >
                    </div >
                </div >
            </div >


            <!-- 用户操作区 -->
            <div class = "flex items-center space-x-4" >
                <!-- 商城按钮-->
                <a href="{% url 'mall' %}"
                   class="hidden md:flex items-center space-x-2 px-5 py-2 rounded-full bg-primary text-white hover:bg-primary/90 transition-custom shadow-sm hover:shadow-md">
                    <i class="fa-solid fa-shopping-bag"></i>
                    <span>返回商城</span>
                </a>

                <!-- 收藏按钮 -->
                <a href = "{% url 'mallmark' %}"
                   class = "hidden md:flex items-center space-x-2 px-5 py-2 rounded-full bg-neutral-100 text-neutral-700 hover:bg-neutral-200 transition-custom shadow-sm hover:shadow-md" >
                    <i class = "fa-solid fa-heart" ></i >
                    <span class = "relative" >
                        <span class = "absolute -top-2 -right-3 bg-primary text-white text-xs w-5 h-5 rounded-full flex items-center justify-center"
                              id = "favoriteCount" >3</span >
                    </span >
                </a >

                <!-- 购物车按钮 -->
                <a href = "{% url 'mallcart' %}"
                   class = "hidden md:flex items-center space-x-2 px-5 py-2 rounded-full bg-neutral-100 text-neutral-700 hover:bg-neutral-200 transition-custom shadow-sm hover:shadow-md" >
                    <i class = "fa-solid fa-shopping-cart" ></i >
                    <span class = "relative" >
                        <span class = "absolute -top-2 -right-3 bg-primary text-white text-xs w-5 h-5 rounded-full flex items-center justify-center"
                              id = "cartCount" >5</span >
                    </span >
                </a >

                <!-- 用户头像与下拉菜单 -->
                <div class = "relative" id = "userDropdown" >
                    <div class = "w-10 h-10 rounded-full overflow-hidden border-2 border-primary cursor-pointer shadow-sm"
                         id = "userAvatar" >
                        <img src = "{{ user.profile.userAvatar.url }}" alt = "用户头像"
                             class = "w-full h-full object-cover" >
                    </div >
                    <div class = "absolute right-0 mt-2 w-48 bg-white rounded-lg shadow-xl py-2 z-50 hidden"
                         id = "userOptions" >
                        <a href = "{% url 'personal_center' %}"
                           class = "block px-4 py-2 text-neutral-700 hover:bg-neutral-50 transition-custom flex items-center" >
                            <i class = "fa-solid fa-user mr-2 w-5 text-center" ></i >主页
                        </a >
                        <a href = "{% url 'message' %}"
                           class = "block px-4 py-2 text-neutral-700 hover:bg-neutral-50 transition-custom flex items-center" >
                            <i class = "fa-solid fa-bookmark mr-2 w-5 text-center" ></i >消息
                        </a >
                        <a href = "{% url 'settings' %}"
                           class = "block px-4 py-2 text-neutral-700 hover:bg-neutral-50 transition-custom flex items-center" >
                            <i class = "fa-solid fa-cog mr-2 w-5 text-center" ></i >设置
                        </a >
                        <div class = "border-t border-neutral-200 my-1" ></div >
                        <a href = "{% url 'logout' %}"
                           class = "block px-4 py-2 text-red-500 hover:bg-red-50 transition-custom flex items-center" >
                            <i class = "fa-solid fa-sign-out mr-2 w-5 text-center" ></i >退出登录
                        </a >
                    </div >
                </div >

                <!-- 移动端菜单按钮 -->
                <button class = "md:hidden text-neutral-700 focus:outline-none" id = "menu-toggle" >
                    <i class = "fa-solid fa-bars text-xl" ></i >
                </button >
            </div >
        </div >

        <!-- 移动端菜单 -->
        <div id = "mobile-menu"
             class = "hidden md:hidden bg-white shadow-lg absolute w-full transform -translate-y-2 opacity-0 transition-all duration-200 ease-in-out"
             style = "top: 100%;" >
            <div class = "container mx-auto px-4 py-3 flex flex-col space-y-3" >
                <a href = "{% url 'community' %}"
                   class = "text-neutral-700 hover:text-primary py-2 transition-custom font-medium flex items-center" >
                    <i class = "fa-solid fa-users mr-3 w-5 text-center" ></i >爱享公社
                </a >
                <a href = "{% url 'moments' %}"
                   class = "text-neutral-700 hover:text-primary py-2 transition-custom font-medium flex items-center" >
                    <i class = "fa-solid fa-bolt mr-3 w-5 text-center" ></i >心动轨迹
                </a >
                <a href = "{% url 'photo_album' %}"
                   class = "text-neutral-700 hover:text-primary py-2 transition-custom font-medium flex items-center" >
                    <i class = "fa-solid fa-images mr-3 w-5 text-center" ></i >心跳相簿
                </a >
                <a href = "{% url 'lovesync' %}"
                   class = "text-neutral-700 hover:text-primary py-2 transition-custom font-medium flex items-center" >
                    <i class = "fa-solid fa-bookmark mr-3 w-5 text-center" ></i >双人日记
                </a >
                <div class = "border-t border-neutral-200 my-1" ></div >
                <a href = "#" class = "text-neutral-700 py-2 transition-custom flex items-center" >
                    <i class = "fa-solid fa-calendar-heart mr-3 w-5 text-center" ></i >纪念日提醒
                </a >
                <a href = "#" class = "text-neutral-700 py-2 transition-custom flex items-center" >
                    <i class = "fa-solid fa-gift mr-3 w-5 text-center" ></i >礼物推荐
                </a >
                <a href = "#" class = "text-neutral-700 py-2 transition-custom flex items-center" >
                    <i class = "fa-solid fa-map-marker-heart mr-3 w-5 text-center" ></i >情侣地点
                </a >
                <a href = "#" class = "text-neutral-700 py-2 transition-custom flex items-center" >
                    <i class = "fa-solid fa-question-circle mr-3 w-5 text-center" ></i >爱情测试
                </a >
                <div class = "border-t border-neutral-200 my-1" ></div >
                <a href = "{% url 'personal_center' %}"
                   class = "text-neutral-700 py-2 transition-custom flex items-center" >
                    <i class = "fa-solid fa-user mr-3 w-5 text-center" ></i >主页
                </a >
                <a href = "{% url 'message' %}" class = "text-neutral-700 py-2 transition-custom flex items-center" >
                    <i class = "fa-solid fa-bookmark mr-3 w-5 text-center" ></i >消息
                </a >
                <a href = "{% url 'settings' %}" class = "text-neutral-700 py-2 transition-custom flex items-center" >
                    <i class = "fa-solid fa-cog mr-3 w-5 text-center" ></i >设置
                </a >
                <div class = "border-t border-neutral-200 my-1" ></div >
                <a href = "{% url 'logout' %}" class = "text-red-500 py-2 transition-custom flex items-center" >
                    <i class = "fa-solid fa-sign-out mr-3 w-5 text-center" ></i >退出登录
                </a >
            </div >
        </div >
    </header >

    <!-- 主内容区 -->
    <main class = "flex-grow pt-32 pb-16 relative z-10" >
        <div class = "container mx-auto px-4" >
            <!-- 页面标题 -->
            <div class = "mb-8" >
                <h1 class = "text-[clamp(1.5rem,3vw,2.5rem)] font-bold text-neutral-800" >我的购物车</h1 >
            </div >

            <!-- 购物车内容 -->
            <div class = "grid grid-cols-1 lg:grid-cols-3 gap-8" >
                <!-- 商品列表 -->
                <div class = "lg:col-span-2" >
                    <div class = "bg-white rounded-xl shadow-sm overflow-hidden" >
                        <!-- 购物车头部 -->
                        <div class = "px-6 py-4 border-b border-neutral-200 flex items-center justify-between" >
                            <h2 class = "font-semibold text-lg" >已选商品</h2 >
                            <p class = "text-neutral-600 mt-2" id = "cartItemCount" >共0件商品</p >
                            <div class = "flex items-center space-x-4" >
                            </div >
                        </div >

                        <!-- 空购物车状态 -->
                        <div id = "emptyCart" class = "py-16 text-center" >
                            <div class = "w-20 h-20 mx-auto bg-neutral-100 rounded-full flex items-center justify-center" >
                                <i class = "fa-solid fa-shopping-cart text-2xl text-neutral-400" ></i >
                            </div >
                            <h3 class = "mt-4 text-lg font-medium text-neutral-800" >购物车是空的</h3 >
                            <p class = "mt-2 text-neutral-500" >快去添加心仪的商品吧</p >
                            <a href="{% url 'mall' %}" class="mt-6 px-6 py-2 bg-primary text-white rounded-lg hover:bg-primary/90 transition-custom shadow-sm inline-block text-center" role="button">
                                继续购物
                            </a>
                        </div >

                        <!-- 商品列表容器 -->
                        <div id = "cartItemsList" class = "divide-y divide-neutral-200 hidden" ></div >

                        <!-- 购物车底部 -->
                        <div class = "px-6 py-4 bg-neutral-50 flex items-center justify-between" >
                            <div class = "flex items-center space-x-4" >
                                <button class = "text-neutral-500 hover:text-primary transition-custom"
                                        id = "addToFavoritesBtn" >
                                    <i class = "fa-solid fa-heart mr-1" ></i > 加入收藏
                                </button >
                                <button class = "text-neutral-500 hover:text-red-500 transition-custom"
                                        id = "removeSelectedBtn" >
                                    <i class = "fa-solid fa-trash mr-1" ></i > 删除选中
                                </button >
                            </div >
                            <div class = "flex items-center space-x-4" >
                                <span class = "text-neutral-600" >已选 <span class = "text-primary font-medium"
                                                                             id = "selectedCount" >0</span > 件</span >
                                <label class = "flex items-center cursor-pointer" >
                                    <input type = "checkbox"
                                           class = "form-checkbox h-5 w-5 text-primary rounded border-neutral-300 focus:ring-primary"
                                           id = "selectAll" >
                                    <span class = "ml-2 text-sm" >全选</span >
                                </label >
                            </div >
                        </div >
                    </div >

                    <!-- 推荐商品 -->
                    <div class = "mt-8 bg-white rounded-xl shadow-sm overflow-hidden" >
                        <div class = "px-6 py-4 border-b border-neutral-200" >
                            <h2 class = "font-semibold text-lg" >猜你喜欢</h2 >
                        </div >
                        <div class = "p-4" >
                            <div class = "grid grid-cols-2 sm:grid-cols-3 md:grid-cols-4 gap-4" >
                                <!-- 推荐商品1 -->
                                <div class = "rounded-lg overflow-hidden hover-scale" >
                                    <div class = "relative" >
                                        <img src = "https://picsum.photos/id/1074/200/200" alt = "情侣纯棉睡衣套装"
                                             class = "w-full h-36 object-cover" >
                                        <div class = "absolute top-2 right-2" >
                                            <button class = "w-7 h-7 rounded-full bg-white/80 backdrop-blur-sm flex items-center justify-center text-neutral-500 hover:text-primary transition-custom add-to-favorite"
                                                    data-id = "p101" >
                                                <i class = "fa-regular fa-heart" ></i >
                                            </button >
                                        </div >
                                    </div >
                                    <div class = "p-2" >
                                        <h3 class = "font-medium text-sm line-clamp-1" >情侣纯棉睡衣套装</h3 >
                                        <div class = "flex items-center justify-between mt-1" >
                                            <span class = "text-primary font-bold text-sm" >¥259</span >
                                            <button class = "w-7 h-7 rounded-full bg-primary/10 text-primary flex items-center justify-center hover:bg-primary hover:text-white transition-custom add-to-cart"
                                                    data-id = "p101" data-name = "情侣纯棉睡衣套装" data-price = "259" >
                                                <i class = "fa-solid fa-shopping-cart" ></i >
                                            </button >
                                        </div >
                                    </div >
                                </div >

                                <!-- 推荐商品2 -->
                                <div class = "rounded-lg overflow-hidden hover-scale" >
                                    <div class = "relative" >
                                        <img src = "https://picsum.photos/id/1080/200/200" alt = "情侣手表"
                                             class = "w-full h-36 object-cover" >
                                        <div class = "absolute top-2 right-2" >
                                            <button class = "w-7 h-7 rounded-full bg-white/80 backdrop-blur-sm flex items-center justify-center text-neutral-500 hover:text-primary transition-custom add-to-favorite"
                                                    data-id = "p102" >
                                                <i class = "fa-regular fa-heart" ></i >
                                            </button >
                                        </div >
                                    </div >
                                    <div class = "p-2" >
                                        <h3 class = "font-medium text-sm line-clamp-1" >情侣手表</h3 >
                                        <div class = "flex items-center justify-between mt-1" >
                                            <span class = "text-primary font-bold text-sm" >¥599</span >
                                            <button class = "w-7 h-7 rounded-full bg-primary/10 text-primary flex items-center justify-center hover:bg-primary hover:text-white transition-custom add-to-cart"
                                                    data-id = "p102" data-name = "情侣手表" data-price = "599" >
                                                <i class = "fa-solid fa-shopping-cart" ></i >
                                            </button >
                                        </div >
                                    </div >
                                </div >

                                <!-- 推荐商品3 -->
                                <div class = "rounded-lg overflow-hidden hover-scale" >
                                    <div class = "relative" >
                                        <img src = "https://picsum.photos/id/1082/200/200" alt = "情侣蓝牙音箱"
                                             class = "w-full h-36 object-cover" >
                                        <div class = "absolute top-2 right-2" >
                                            <button class = "w-7 h-7 rounded-full bg-white/80 backdrop-blur-sm flex items-center justify-center text-neutral-500 hover:text-primary transition-custom add-to-favorite"
                                                    data-id = "p103" >
                                                <i class = "fa-regular fa-heart" ></i >
                                            </button >
                                        </div >
                                    </div >
                                    <div class = "p-2" >
                                        <h3 class = "font-medium text-sm line-clamp-1" >情侣蓝牙音箱</h3 >
                                        <div class = "flex items-center justify-between mt-1" >
                                            <span class = "text-primary font-bold text-sm" >¥399</span >
                                            <button class = "w-7 h-7 rounded-full bg-primary/10 text-primary flex items-center justify-center hover:bg-primary hover:text-white transition-custom add-to-cart"
                                                    data-id = "p103" data-name = "情侣蓝牙音箱" data-price = "399" >
                                                <i class = "fa-solid fa-shopping-cart" ></i >
                                            </button >
                                        </div >
                                    </div >
                                </div >

                                <!-- 推荐商品4 -->
                                <div class = "rounded-lg overflow-hidden hover-scale" >
                                    <div class = "relative" >
                                        <img src = "https://picsum.photos/id/1083/200/200" alt = "情侣保温杯"
                                             class = "w-full h-36 object-cover" >
                                        <div class = "absolute top-2 right-2" >
                                            <button class = "w-7 h-7 rounded-full bg-white/80 backdrop-blur-sm flex items-center justify-center text-neutral-500 hover:text-primary transition-custom add-to-favorite"
                                                    data-id = "p104" >
                                                <i class = "fa-regular fa-heart" ></i >
                                            </button >
                                        </div >
                                    </div >
                                    <div class = "p-2" >
                                        <h3 class = "font-medium text-sm line-clamp-1" >情侣保温杯</h3 >
                                        <div class = "flex items-center justify-between mt-1" >
                                            <span class = "text-primary font-bold text-sm" >¥159</span >
                                            <button class = "w-7 h-7 rounded-full bg-primary/10 text-primary flex items-center justify-center hover:bg-primary hover:text-white transition-custom add-to-cart"
                                                    data-id = "p104" data-name = "情侣保温杯" data-price = "159" >
                                                <i class = "fa-solid fa-shopping-cart" ></i >
                                            </button >
                                        </div >
                                    </div >
                                </div >
                            </div >
                        </div >
                    </div >
                </div >

                <!-- 订单摘要 -->
                <div class = "lg:col-span-1" >
                    <div class = "bg-white rounded-xl shadow-sm overflow-hidden sticky top-24" >
                        <div class = "px-6 py-4 border-b border-neutral-200" >
                            <h2 class = "font-semibold text-lg" >订单摘要</h2 >
                        </div >

                        <div class = "px-6 py-4 space-y-3" >
                            <div class = "flex justify-between" >
                                <span class = "text-neutral-600" >商品总价</span >
                                <span class = "font-medium" id = "subtotal" >¥0.00</span >
                            </div >
                            <div class = "flex justify-between" >
                                <span class = "text-neutral-600" >优惠折扣</span >
                                <span class = "font-medium text-red-500" id = "discount" >-¥0.00</span >
                            </div >
                            <div class = "flex justify-between" >
                                <span class = "text-neutral-600" >运费</span >
                                <span class = "font-medium text-green-500" id = "shipping" >免运费</span >
                            </div >
                            <div class = "flex justify-between" >
                                <span class = "text-neutral-600" >税费</span >
                                <span class = "font-medium" id = "tax" >¥0.00</span >
                            </div >
                            <div class = "border-t border-neutral-200 pt-4" >
                                <div class = "flex justify-between" >
                                    <span class = "font-semibold" >实付款</span >
                                    <span class = "font-bold text-xl text-primary" id = "total" >¥0.00</span >
                                </div >
                            </div >

                            <div class = "mt-4" >
                                <button class = "w-full py-3 bg-gradient-love text-white rounded-lg font-medium hover:opacity-90 transition-custom shadow-sm btn-pulse"
                                        id = "checkoutBtn" disabled >
                                    提交订单
                                </button >
                            </div >

                            <div class = "mt-3 text-center" >
                                <span class = "text-neutral-500 text-sm" >支持多种支付方式</span >
                                <div class = "flex justify-center space-x-3 mt-2" >
                                    <i class = "fa-brands fa-alipay text-blue-500 text-xl" ></i >
                                    <i class = "fa-brands fa-alipay text-blue-500 text-xl" ></i >
                                    <i class = "fa-brands fa-weixin text-green-500 text-xl ml-2" ></i >
                                    <i class = "fa-brands fa-cc-visa text-blue-700 text-xl ml-2" ></i >
                                    <i class = "fa-brands fa-apple-pay text-neutral-800 text-xl ml-2" ></i >
                                </div >
                            </div >
                        </div >
                    </div >
                </div >
            </div >
        </div >
    </main >

    <!-- 页脚 -->
    <footer class = "bg-white border-t border-neutral-200 py-10" >
        <div class = "container mx-auto px-4" >
            <div class = "grid grid-cols-1 md:grid-cols-4 gap-8" >
                <div >
                    <div class = "flex items-center space-x-2 mb-4" >
                        <div class = "w-8 h-8 rounded-full bg-gradient-love flex items-center justify-center text-white" >
                            <i class = "fa-solid fa-heart" ></i >
                        </div >
                        <span class = "text-lg font-bold text-neutral-800" >LoveSync</span >
                    </div >
                    <p class = "text-neutral-600 text-sm mb-4" >
                        为爱打造的专属空间，记录每一刻心动与甜蜜，让爱情同步。
                    </p >
                    <div class = "flex space-x-4" >
                        <a href = "#" class = "text-neutral-400 hover:text-primary transition-custom" >
                            <i class = "fa-brands fa-weibo" ></i >
                        </a >
                        <a href = "#" class = "text-neutral-400 hover:text-primary transition-custom" >
                            <i class = "fa-brands fa-weixin" ></i >
                        </a >
                        <a href = "#" class = "text-neutral-400 hover:text-primary transition-custom" >
                            <i class = "fa-brands fa-instagram" ></i >
                        </a >
                        <a href = "#" class = "text-neutral-400 hover:text-primary transition-custom" >
                            <i class = "fa-brands fa-twitter" ></i >
                        </a >
                    </div >
                </div >

                <div >
                    <h3 class = "font-semibold text-neutral-800 mb-4" >快速链接</h3 >
                    <ul class = "space-y-2 text-sm" >
                        <li ><a href = "{% url 'community' %}"
                                class = "text-neutral-600 hover:text-primary transition-custom" >爱享公社</a ></li >
                        <li ><a href = "{% url 'moments' %}"
                                class = "text-neutral-600 hover:text-primary transition-custom" >心动轨迹</a ></li >
                        <li ><a href = "{% url 'photo_album' %}"
                                class = "text-neutral-600 hover:text-primary transition-custom" >心跳相簿</a ></li >
                        <li ><a href = "{% url 'lovesync' %}"
                                class = "text-neutral-600 hover:text-primary transition-custom" >双人日记</a ></li >
                    </ul >
                </div >

                <div >
                    <h3 class = "font-semibold text-neutral-800 mb-4" >帮助中心</h3 >
                    <ul class = "space-y-2 text-sm" >
                        <li ><a href = "#"
                                class = "text-neutral-600 hover:text-primary transition-custom" >常见问题</a ></li >
                        <li ><a href = "#"
                                class = "text-neutral-600 hover:text-primary transition-custom" >联系我们</a ></li >
                        <li ><a href = "#"
                                class = "text-neutral-600 hover:text-primary transition-custom" >隐私政策</a ></li >
                        <li ><a href = "#"
                                class = "text-neutral-600 hover:text-primary transition-custom" >用户协议</a ></li >
                    </ul >
                </div >

                <div >
                    <h3 class = "font-semibold text-neutral-800 mb-4" >联系我们</h3 >
                    <ul class = "space-y-2 text-sm" >
                        <li class = "flex items-start" >
                            <i class = "fa-solid fa-map-marker-alt mt-1 mr-3 text-neutral-400" ></i >
                            <span class = "text-neutral-600" >北京市朝阳区爱情大厦1001室</span >
                        </li >
                        <li class = "flex items-center" >
                            <i class = "fa-solid fa-phone mr-3 text-neutral-400" ></i >
                            <span class = "text-neutral-600" >400-1314-520</span >
                        </li >
                        <li class = "flex items-center" >
                            <i class = "fa-solid fa-envelope mr-3 text-neutral-400" ></i >
                            <span class = "text-neutral-600" >support@lovesync.com</span >
                        </li >
                    </ul >
                </div >
            </div >

            <div class = "border-t border-neutral-200 mt-8 pt-6 text-center text-sm text-neutral-500" >
                <p >© 2025 LoveSync. 保留所有权利。</p >
            </div >
        </div >
    </footer >

    <script >
        const userAvatar = document.getElementById('userAvatar');
        const userOptions = document.getElementById('userOptions');
        const userDropdown = document.getElementById('userDropdown');

        let closeTimer;

        // 鼠标经过头像时打开菜单
        userAvatar.addEventListener('mouseenter', function () {
            clearTimeout(closeTimer); // 清除之前的定时器
            userOptions.classList.remove('hidden');
        });

        // 鼠标悬停在下拉菜单时保持菜单打开
        userDropdown.addEventListener('mouseenter', function () {
            clearTimeout(closeTimer); // 清除之前的定时器
            userOptions.classList.remove('hidden');
        });

        // 鼠标离开下拉菜单时关闭菜单
        userDropdown.addEventListener('mouseleave', function () {
            closeTimer = setTimeout(() => {
                userOptions.classList.add('hidden');
            }, 500);
        });

        document.addEventListener('DOMContentLoaded', function () {
            const moreButton = document.getElementById('moreButton');
            const moreOptions = document.getElementById('moreOptions');
            const moreDropdown = document.getElementById('moreDropdown');

            let closeTimer;

            // 鼠标经过按钮时打开菜单
            moreButton.addEventListener('mouseenter', function () {
                clearTimeout(closeTimer); // 清除之前的定时器
                moreOptions.classList.remove('hidden');
            });

            // 鼠标悬停在下拉菜单时保持菜单打开
            moreDropdown.addEventListener('mouseenter', function () {
                clearTimeout(closeTimer); // 清除之前的定时器
                moreOptions.classList.remove('hidden');
            });

            // 鼠标离开下拉菜单时关闭菜单
            moreDropdown.addEventListener('mouseleave', function () {
                closeTimer = setTimeout(() => {
                    moreOptions.classList.add('hidden');
                }, 500); // 延迟200毫秒
            });
        });

        // 类别下拉菜单切换
        document.addEventListener('DOMContentLoaded', function () {
            // 搜索建议下拉菜单
            const searchInput = document.querySelector('input[placeholder="搜索情侣商品..."]');
            const searchSuggestions = document.getElementById('searchSuggestions');

            if (searchInput && searchSuggestions) {
                searchInput.addEventListener('focus', function () {
                    searchSuggestions.classList.remove('invisible', 'opacity-0', '-translate-y-2');
                    searchSuggestions.classList.add('opacity-100', 'translate-y-0');
                });

                searchInput.addEventListener('blur', function () {
                    setTimeout(() => {
                        searchSuggestions.classList.add('invisible', 'opacity-0', '-translate-y-2');
                        searchSuggestions.classList.remove('opacity-100', 'translate-y-0');
                    }, 200);
                });

                // 搜索建议项点击
                const searchItems = searchSuggestions.querySelectorAll('a');
                searchItems.forEach(item => {
                    item.addEventListener('click', function () {
                        const searchText = this.querySelector('span').textContent;
                        searchInput.value = searchText;

                        searchSuggestions.classList.add('invisible', 'opacity-0', '-translate-y-2');
                        searchSuggestions.classList.remove('opacity-100', 'translate-y-0');
                    });
                });

                // 清除历史按钮
                const clearHistoryBtn = searchSuggestions.querySelector('button');
                if (clearHistoryBtn) {
                    clearHistoryBtn.addEventListener('click', function (e) {
                        e.stopPropagation();
                        // 这里可以添加清除搜索历史的逻辑
                        const historyItems = searchSuggestions.querySelectorAll('.fa-clock-rotate-left').forEach(item => {
                            item.closest('a').remove();
                        });
                    });
                }
            }
        });

        // 模拟购物车功能
        const cartItemsList = document.getElementById('cartItemsList');
        const emptyCart = document.getElementById('emptyCart');
        const cartItemCount = document.getElementById('cartItemCount');
        const cartCount = document.getElementById('cartCount');
        const selectedCount = document.getElementById('selectedCount');
        const subtotal = document.getElementById('subtotal');
        const discount = document.getElementById('discount');
        const shipping = document.getElementById('shipping');
        const tax = document.getElementById('tax');
        const total = document.getElementById('total');
        const checkoutBtn = document.getElementById('checkoutBtn');
        const selectAllCheckbox = document.getElementById('selectAll');
        const addToFavoritesBtn = document.getElementById('addToFavoritesBtn');
        const removeSelectedBtn = document.getElementById('removeSelectedBtn');
        const favoriteCount = document.getElementById('favoriteCount');

        // 示例购物车数据
        let cartItems = [
            {
                id: 'p1',
                name: '情侣纯棉T恤',
                price: 199,
                quantity: 1,
                image: 'https://picsum.photos/id/1074/200/200',
                selected: true
            },
            {
                id: 'p2',
                name: '情侣定制手机壳',
                price: 89,
                quantity: 1,
                image: 'https://picsum.photos/id/1080/200/200',
                selected: true
            },
            {
                id: 'p3',
                name: '情侣手链',
                price: 299,
                quantity: 1,
                image: 'https://picsum.photos/id/1082/200/200',
                selected: false
            }
        ];

        function updateCart() {
            cartItemsList.innerHTML = '';

            if (cartItems.length === 0) {
                // 显示空购物车
                emptyCart.classList.remove('hidden');
                cartItemsList.classList.add('hidden');
                cartItemCount.textContent = '共0件商品';
                document.getElementById('cartCount').textContent = '0'; // 使用getElementById避免未定义错误
            } else {
                // 显示商品列表（原有逻辑）
                emptyCart.classList.add('hidden');
                cartItemsList.classList.remove('hidden');
                cartItemCount.textContent = `共${cartItems.length}件商品`;
                document.getElementById('cartCount').textContent = cartItems.length;

                // 添加商品到购物车列表
                cartItems.forEach(item => {
                    const itemElement = document.createElement('div');
                    itemElement.className = 'p-4 flex items-center';
                    itemElement.innerHTML = `
                        <div class="flex-shrink-0 mr-4">
                            <label class="flex items-center cursor-pointer">
                                <input type="checkbox" class="form-checkbox h-5 w-5 text-primary rounded border-neutral-300 focus:ring-primary cart-item-checkbox" ${item.selected ? 'checked' : ''} data-id="${item.id}">
                            </label>
                        </div>
                        <div class="flex-shrink-0 w-20 h-20 rounded-lg overflow-hidden">
                            <img src="${item.image}" alt="${item.name}" class="w-full h-full object-cover">
                        </div>
                        <div class="ml-4 flex-grow">
                            <div class="flex flex-col md:flex-row md:items-center justify-between">
                                <div>
                                    <h3 class="font-medium">${item.name}</h3>
                                    <div class="flex items-center mt-1">
                                        <span class="text-primary font-bold">¥${item.price}</span>
                                        <span class="text-neutral-500 text-sm ml-2">x${item.quantity}</span>
                                    </div>
                                </div>
                                <div class="mt-2 md:mt-0 flex items-center space-x-2">
                                    <button class="w-7 h-7 rounded-full bg-neutral-100 flex items-center justify-center text-neutral-600 hover:bg-neutral-200 transition-custom cart-quantity-minus" data-id="${item.id}">
                                        <i class="fa-solid fa-minus text-xs"></i>
                                    </button>
                                    <span class="w-8 text-center font-medium">${item.quantity}</span>
                                    <button class="w-7 h-7 rounded-full bg-neutral-100 flex items-center justify-center text-neutral-600 hover:bg-neutral-200 transition-custom cart-quantity-plus" data-id="${item.id}">
                                        <i class="fa-solid fa-plus text-xs"></i>
                                    </button>
                                </div>
                            </div>
                            <div class="flex items-center justify-between mt-3">
                                <div class="text-primary font-bold">¥${item.price * item.quantity}</div>
                                <button class="text-neutral-500 hover:text-red-500 transition-custom cart-remove" data-id="${item.id}">
                                    <i class="fa-solid fa-trash"></i>
                                </button>
                            </div>
                        </div>
                    `;
                    cartItemsList.appendChild(itemElement);
                });

                // 为购物车商品复选框添加事件监听
                document.querySelectorAll('.cart-item-checkbox').forEach(checkbox => {
                    checkbox.addEventListener('change', function () {
                        const itemId = this.getAttribute('data-id');
                        const item = cartItems.find(item => item.id === itemId);
                        if (item) {
                            item.selected = this.checked;
                            updateCartSummary();
                        }
                    });
                });

                // 为数量加减按钮添加事件监听
                document.querySelectorAll('.cart-quantity-plus').forEach(button => {
                    button.addEventListener('click', function () {
                        const itemId = this.getAttribute('data-id');
                        const item = cartItems.find(item => item.id === itemId);
                        if (item) {
                            item.quantity++;
                            updateCart();
                        }
                    });
                });

                document.querySelectorAll('.cart-quantity-minus').forEach(button => {
                    button.addEventListener('click', function () {
                        const itemId = this.getAttribute('data-id');
                        const item = cartItems.find(item => item.id === itemId);
                        if (item && item.quantity > 1) {
                            item.quantity--;
                            updateCart();
                        }
                    });
                });

                // 为删除按钮添加事件监听
                document.querySelectorAll('.cart-remove').forEach(button => {
                    button.addEventListener('click', function () {
                        const itemId = this.getAttribute('data-id');
                        cartItems = cartItems.filter(item => item.id !== itemId);
                        updateCart();
                    });
                });
            }

            // 更新购物车摘要
            updateCartSummary();
        }

        // 更新购物车摘要信息
        function updateCartSummary() {
            const selectedItems = cartItems.filter(item => item.selected);
            const selectedItemCount = selectedItems.length;
            const subtotalValue = selectedItems.reduce((total, item) => total + (item.price * item.quantity), 0);
            const discountValue = subtotalValue > 0 ? 20 : 0; // 模拟20元优惠
            const taxValue = subtotalValue > 0 ? Math.round(subtotalValue * 0.09 * 100) / 100 : 0; // 模拟9%税费
            const shippingValue = subtotalValue > 0 ? '免运费' : '¥0.00';
            const totalValue = subtotalValue > 0 ? subtotalValue - discountValue + taxValue : 0;

            selectedCount.textContent = selectedItemCount;
            subtotal.textContent = `¥${subtotalValue.toFixed(2)}`;
            discount.textContent = `-¥${discountValue.toFixed(2)}`;
            shipping.textContent = shippingValue;
            tax.textContent = `¥${taxValue.toFixed(2)}`;
            total.textContent = `¥${totalValue.toFixed(2)}`;

            // 启用或禁用结算按钮
            checkoutBtn.disabled = selectedItemCount === 0;
            if (selectedItemCount === 0) {
                checkoutBtn.classList.remove('btn-pulse');
            } else {
                checkoutBtn.classList.add('btn-pulse');
            }

            // 全选复选框状态
            selectAllCheckbox.checked = selectedItemCount === cartItems.length && cartItems.length > 0;
        }

        // 全选/取消全选
        selectAllCheckbox.addEventListener('change', function () {
            const isChecked = this.checked;
            cartItems.forEach(item => {
                item.selected = isChecked;
            });
            updateCart();
        });

        // 添加到收藏夹
        addToFavoritesBtn.addEventListener('click', function () {
            const selectedItems = cartItems.filter(item => item.selected);
            if (selectedItems.length > 0) {
                // 模拟添加到收藏夹
                const currentFavorites = parseInt(favoriteCount.textContent);
                favoriteCount.textContent = currentFavorites + selectedItems.length;

                // 从购物车移除已添加到收藏夹的商品
                cartItems = cartItems.filter(item => !item.selected);

                // 显示成功提示
                showToast('已添加到收藏夹');

                // 更新购物车
                updateCart();
            }
        });

        // 移除选中商品
        removeSelectedBtn.addEventListener('click', function () {
            cartItems = cartItems.filter(item => !item.selected);
            updateCart();
            showToast('已删除选中商品');
        });

        // 添加到购物车按钮
        document.querySelectorAll('.add-to-cart').forEach(button => {
            button.addEventListener('click', function () {
                const id = this.getAttribute('data-id');
                const name = this.getAttribute('data-name');
                const price = parseInt(this.getAttribute('data-price'));

                // 检查商品是否已在购物车中
                const existingItem = cartItems.find(item => item.id === id);

                if (existingItem) {
                    existingItem.quantity++;
                } else {
                    cartItems.push({
                        id,
                        name,
                        price,
                        quantity: 1,
                        image: this.closest('div').querySelector('img').src,
                        selected: true
                    });
                }

                updateCart();
                showToast('已添加到购物车');

                // 按钮状态变化
                this.innerHTML = '<i class="fa-solid fa-check"></i>';
                this.classList.add('bg-green-100', 'text-green-600');
                this.classList.remove('bg-primary/10', 'text-primary', 'hover:bg-primary', 'hover:text-white');

                // 3秒后恢复原状
                setTimeout(() => {
                    this.innerHTML = '<i class="fa-solid fa-shopping-cart"></i>';
                    this.classList.remove('bg-green-100', 'text-green-600');
                    this.classList.add('bg-primary/10', 'text-primary', 'hover:bg-primary', 'hover:text-white');
                }, 3000);
            });
        });

        // 添加到收藏夹按钮
        document.querySelectorAll('.add-to-favorite').forEach(button => {
            button.addEventListener('click', function () {
                const id = this.getAttribute('data-id');

                // 切换收藏状态
                if (this.querySelector('i').classList.contains('fa-regular')) {
                    this.querySelector('i').classList.remove('fa-regular');
                    this.querySelector('i').classList.add('fa-solid');
                    this.classList.add('text-primary');
                    this.classList.remove('text-neutral-500');

                    // 更新收藏数量
                    const currentFavorites = parseInt(favoriteCount.textContent);
                    favoriteCount.textContent = currentFavorites + 1;

                    showToast('已添加到收藏夹');
                } else {
                    this.querySelector('i').classList.remove('fa-solid');
                    this.querySelector('i').classList.add('fa-regular');
                    this.classList.remove('text-primary');
                    this.classList.add('text-neutral-500');

                    // 更新收藏数量
                    const currentFavorites = parseInt(favoriteCount.textContent);
                    favoriteCount.textContent = Math.max(0, currentFavorites - 1);

                    showToast('已从收藏夹移除');
                }
            });
        });

        // 结算按钮
        checkoutBtn.addEventListener('click', function () {
            // 模拟结算流程
            showToast('正在处理订单...');

            // 3秒后跳转到订单确认页
            setTimeout(() => {
                window.location.href = '#'; // 替换为实际的订单确认页URL
            }, 3000);
        });

        // 显示提示消息
        function showToast(message) {
            // 检查是否已存在toast元素
            let toast = document.querySelector('.toast-notification');

            if (!toast) {
                // 创建toast元素
                toast = document.createElement('div');
                toast.className = 'toast-notification fixed bottom-6 left-1/2 -translate-x-1/2 bg-neutral-800 text-white px-6 py-3 rounded-lg shadow-lg z-50 transform transition-all duration-300 opacity-0 translate-y-10';
                document.body.appendChild(toast);
            }

            // 设置消息内容
            toast.textContent = message;

            // 显示toast
            setTimeout(() => {
                toast.classList.remove('opacity-0', 'translate-y-10');
            }, 10);

            // 3秒后隐藏toast
            setTimeout(() => {
                toast.classList.add('opacity-0', 'translate-y-10');

                // 5秒后移除toast元素
                setTimeout(() => {
                    if (toast && toast.parentNode) {
                        toast.parentNode.removeChild(toast);
                    }
                }, 500);
            }, 3000);
        }

        // 初始化购物车
        updateCart();
    </script >
</body >
</html >