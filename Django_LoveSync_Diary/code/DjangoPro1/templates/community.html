<!DOCTYPE html>
<html lang = "zh-CN" >

<head >
    <meta charset = "UTF-8" >
    <meta name = "viewport" content = "width=device-width, initial-scale=1.0" >
    <title >LoveSync</title >
    <script src = "https://cdn.tailwindcss.com" ></script >
    <link href = "https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.7.2/css/all.min.css" rel = "stylesheet" >
    <link href = "https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap"
          rel = "stylesheet" >
    <script >
        tailwind.config = {
            theme: {
                extend: {
                    colors: {
                        primary: '#FF6B8B', // 爱情粉色作为主色调
                        secondary: '#722ED1', // 紫色作为辅助色
                        neutral: {
                            100: '#F9F9F9',
                            200: '#F0F0F0',
                            300: '#E0E0E0',
                            400: '#BDBDBD',
                            500: '#9E9E9E',
                            600: '#757575',
                            700: '#616161',
                            800: '#424242',
                            900: '#212121',
                        }
                    },
                    fontFamily: {
                        inter: ['Inter', 'sans-serif'],
                    },
                },
            }
        }
    </script >
    <style type = "text/tailwindcss" >
        @layer utilities {
            .content-auto {
                content-visibility: auto;
            }

            .text-shadow {
                text-shadow: 0 2px 4px rgba(0, 0, 0, 0.1);
            }

            #sidebar::-webkit-scrollbar {
                width: 8px;
            }

            #sidebar::-webkit-scrollbar-track {
                background: #f1f1f1;
                border-radius: 10px;
            }

            #sidebar::-webkit-scrollbar-thumb {
                background: #e0e0e0;
                border-radius: 10px;
            }

            #sidebar::-webkit-scrollbar-thumb:hover {
                background: #d0d0d0;
            }

            #sidebar::-webkit-scrollbar-thumb:active {
                background: #c0c0c0;
            }

            .transition-custom {
                transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
            }

            .bg-gradient-love {
                background: linear-gradient(135deg, #FF6B8B 0%, #722ED1 100%);
            }

            .hover-scale {
                transition: transform 0.3s ease;
            }

            .hover-scale:hover {
                transform: scale(1.03);
            }

            .form-input-focus {
                transition: all 0.3s ease;
            }

            .form-input-focus:focus {
                transform: translateY(-2px);
                box-shadow: 0 10px 25px -5px rgba(255, 107, 139, 0.1), 0 10px 10px -5px rgba(255, 107, 139, 0.04);
            }

            .btn-pulse {
                animation: pulse 2s infinite;
            }

            /* 聊天窗口样式 */
            .chat-widget {
                font-family: 'Segoe UI', system-ui, sans-serif;
            }

            /* 消息样式 */
            .message {
                animation: fadeIn 0.3s ease-in-out;
            }

            .user-message {
                flex-direction: row-reverse;
            }

            .user-message .message-content {
                background: #4F46E5; /* 主色调，可替换为你的primary色值 */
                color: white;
                border-radius: 18px;
                border-tr-none: none;
            }

            /* 强化滚动体验的样式 */
            .chat-messages {
                /* 确保文本换行正常 */
                white-space: normal;
                word-break: break-word;
            }

            /* 美化滚动条（可选，提升视觉效果） */
            .chat-messages::-webkit-scrollbar {
                width: 6px; /* 滚动条宽度 */
            }

            .chat-messages::-webkit-scrollbar-track {
                background: #f1f1f1; /* 滚动条轨道颜色 */
                border-radius: 10px;
            }

            .chat-messages::-webkit-scrollbar-thumb {
                background: #ccc; /* 滚动条滑块颜色 */
                border-radius: 10px;
            }

            .chat-messages::-webkit-scrollbar-thumb:hover {
                background: #aaa; /* 滑块 hover 颜色 */
            }

            .assistant-message .message-content {
                background: #F3F4F6;
                border-radius: 18px;
                border-tl-none: none;
            }

            .system-message .message-content {
                background: #EEF2FF;
                color: #3B82F6;
            }

            .message-content {
                padding: 8px 14px;
                line-height: 1.5;
                word-break: break-word;
            }

            .avatar {
                width: 36px;
                height: 36px;
            }

            /* 动画效果 */
            @keyframes fadeIn {
                from {
                    opacity: 0;
                    transform: translateY(10px);
                }
                to {
                    opacity: 1;
                    transform: translateY(0);
                }
            }

            /* 输入框聚焦效果 */
            #userInput:focus {
                box-shadow: 0 0 0 2px rgba(79, 70, 229, 0.2); /* 主色调透明阴影 */
            }

            /* 最小化/展开动画 */
            .chat-collapsed .chat-messages,
            .chat-collapsed .chat-input {
                display: none;
            }

            .chat-collapsed {
                max-height: 60px;
                overflow: hidden;
            }

            @keyframes pulse {
                0% {
                    box-shadow: 0 0 0 0 rgba(255, 107, 139, 0.4);
                }
                70% {
                    box-shadow: 0 0 0 10px rgba(255, 107, 139, 0);
                }
                100% {
                    box-shadow: 0 0 0 0 rgba(255, 107, 139, 0);
                }
            }
            .float-animation {
                animation: float 6s ease-in-out infinite;
            }

            @keyframes float {
                0% {
                    transform: translateY(0px);
                }
                50% {
                    transform: translateY(-20px);
                }
                100% {
                    transform: translateY(0px);
                }
            }
            .post-card {
                transition: all 0.3s ease;
            }

            .post-card:hover {
                box-shadow: 0 20px 25px -5px rgba(0, 0, 0, 0.1), 0 10px 10px -5px rgba(0, 0, 0, 0.04);
                transform: translateY(-2px);
            }

            .like-animation {
                animation: like 0.5s ease;
            }

            @keyframes like {
                0% {
                    transform: scale(1);
                }
                50% {
                    transform: scale(1.3);
                }
                100% {
                    transform: scale(1);
                }
            }
            /* 缓慢呼吸动画 */
            @keyframes pulse-slow {
                0%, 100% {
                    transform: scale(1);
                    opacity: 1;
                }
                50% {
                    transform: scale(1.05);
                    opacity: 0.9;
                }
            }
            .animate-pulse-slow {
                animation: pulse-slow 3s infinite ease-in-out;
            }

            /* 状态点闪烁动画 */
            @keyframes pulse {
                0%, 100% {
                    opacity: 1;
                }
                50% {
                    opacity: 0.5;
                }
            }
            .animate-pulse {
                animation: pulse 2s infinite ease-in-out;
            }

            /* 毛玻璃效果增强 */
            .backdrop-blur-sm {
                backdrop-filter: blur(4px);
                -webkit-backdrop-filter: blur(4px);
            }

            .comment-slide {
                animation: slideUp 0.3s ease;
            }

            @keyframes slideUp {
                from {
                    transform: translateY(20px);
                    opacity: 0;
                }
                to {
                    transform: translateY(0);
                    opacity: 1;
                }
            }
            .scroll-smooth {
                scroll-behavior: smooth;
            }

            .skew-x-15 {
                transform: skewX(15deg);
            }

            .skew-x--15 {
                transform: skewX(-15deg);
            }

            .mask-custom {
                mask-image: linear-gradient(to bottom, transparent 0%, black 100%);
            }
        }
    </style >
</head >

<body
        class = "font-inter bg-neutral-100 text-neutral-800 min-h-screen flex flex-col overflow-x-hidden relative scroll-smooth" >
    <!-- 背景装饰元素 -->
    <div class = "absolute top-0 left-0 w-full h-full overflow-hidden pointer-events-none" >
        <div class = "absolute -top-40 -left-40 w-80 h-80 bg-primary/10 rounded-full filter blur-3xl float-animation" >
        </div >
        <div class = "absolute -bottom-20 -right-20 w-80 h-80 bg-secondary/10 rounded-full filter blur-3xl float-animation"
             style = "animation-delay: -2s;" ></div >
        <div class = "absolute top-1/3 right-1/4 w-40 h-40 bg-primary/5 rounded-full filter blur-2xl float-animation"
             style = "animation-delay: -4s;" ></div >
    </div >

    <!-- 导航栏 -->
    <header class = "fixed w-full top-0 z-50 transition-all duration-300 bg-white/95 backdrop-blur-md shadow-sm py-3" >
        <div class = "container mx-auto px-4 flex items-center justify-between" >
            <!-- 品牌标识 -->
            <a href = "{% url 'index' %}" class = "flex items-center space-x-2" >
                <div
                        class = "w-10 h-10 rounded-full bg-gradient-love flex items-center justify-center text-white shadow-md" >
                    <i class = "fa-solid fa-heart text-xl" ></i >
                </div >
                <span class = "text-xl font-bold text-neutral-800 tracking-tight" >LoveSync</span >
            </a >
            <!-- 桌面端导航菜单 -->
            <nav class = "hidden md:flex items-center space-x-6" >
                <a href = "{% url 'community' %}"
                   class = "text-neutral-700 hover:text-primary transition-custom font-medium px-1 py-2 border-b-2 border-transparent hover:border-primary" >爱享公社</a >
                <a href = "{% url 'moments' %}"
                   class = "text-neutral-700 hover:text-primary transition-custom font-medium px-1 py-2 border-b-2 border-transparent hover:border-primary" >心动轨迹</a >
                <a href = "{% url 'photo_album' %}"
                   class = "text-neutral-700 hover:text-primary transition-custom font-medium px-1 py-2 border-b-2 border-transparent hover:border-primary" >心跳相簿</a >
                <a href = "{% url 'lovesync' %}"
                   class = "text-neutral-700 hover:text-primary transition-custom font-medium px-1 py-2 border-b-2 border-transparent hover:border-primary" >双人日记</a >

                <!-- 更多下拉菜单 -->
                <div class = "relative" id = "moreDropdown" >
                    <button
                            class = "text-neutral-700 hover:text-primary transition-custom font-medium flex items-center px-1 py-2"
                            id = "moreButton" >
                        更多 <i class = "fa-solid fa-chevron-down ml-1 text-xs" ></i >
                    </button >
                    <div class = "absolute right-0 mt-2 w-48 bg-white rounded-lg shadow-xl py-2 z-50 hidden"
                         id = "moreOptions" >
                        <a href = "{% url 'couple' %}"
                           class = "block px-4 py-2 text-neutral-700 hover:bg-neutral-50 transition-custom flex items-center" >
                            <i class = "fa-solid fa-calendar-heart mr-2 w-5 text-center" ></i >情侣设置
                        </a >
                        <a href = "{% url 'couple_recommendation' %}"
                           class = "block px-4 py-2 text-neutral-700 hover:bg-neutral-50 transition-custom flex items-center" >
                            <i class = "fa-solid fa-gift mr-2 w-5 text-center" ></i >情侣推荐
                        </a >
                        <a href = "{% url 'couple_places' %}"
                           class = "block px-4 py-2 text-neutral-700 hover:bg-neutral-50 transition-custom flex items-center" >
                            <i class = "fa-solid fa-map-marker-heart mr-2 w-5 text-center" ></i >情侣地点
                        </a >
                        <a href = "{% url 'couple_test' %}"
                           class = "block px-4 py-2 text-neutral-700 hover:bg-neutral-50 transition-custom flex items-center" >
                            <i class = "fa-solid fa-question-circle mr-2 w-5 text-center" ></i >爱情测试
                        </a >
                    </div >
                </div >
            </nav >

            <!-- 内容过滤器 -->
            <div
                    class = "bg-white/95 backdrop-blur-md rounded-xl shadow-lg p-2 flex justify-between items-center hover-scale" >
                <div class = "flex space-x-2" >
                    <button class = "px-4 py-2 rounded-full bg-primary text-white text-sm font-medium" >
                        推荐
                    </button >
                    <button
                            class = "px-4 py-2 rounded-full bg-neutral-100 text-neutral-700 text-sm font-medium hover:bg-neutral-200 transition-custom" >
                        最新
                    </button >
                    <button
                            class = "px-4 py-2 rounded-full bg-neutral-100 text-neutral-700 text-sm font-medium hover:bg-neutral-200 transition-custom" >
                        热门
                    </button >
                </div >
                <div class = "relative" >
                    <input type = "text" placeholder = "LoveSync: 搜索..."
                           class = "pl-10 pr-4 py-2 rounded-full border border-neutral-200 focus:outline-none focus:ring-2 focus:ring-primary/50 form-input-focus text-sm" >
                    <i class = "fa-solid fa-search absolute left-4 top-1/2 -translate-y-1/2 text-neutral-400" ></i >
                </div >
            </div >

            <!-- 用户操作区 -->
            <div class = "flex items-center space-x-4" >
                <a href = "{% url 'moments' %}" id = "createPostLink"
                   class = "hidden md:flex items-center space-x-2 px-5 py-2 rounded-full bg-gradient-love text-white hover:opacity-90 transition-custom shadow-md hover:shadow-lg" >
                    <i class = "fa-solid fa-pencil" ></i >
                    <span >发布动态</span >
                </a >

                <!-- 用户头像与下拉菜单 -->
                <div class = "relative" id = "userDropdown" >
                    <div class = "w-10 h-10 rounded-full overflow-hidden border-2 border-primary cursor-pointer shadow-sm"
                         id = "userAvatar" >
                        <img src = "{{ user.profile.userAvatar.url }}" alt = "用户头像"
                             class = "w-full h-full object-cover" >
                    </div >
                    <div class = "absolute right-0 mt-2 w-48 bg-white rounded-lg shadow-xl py-2 z-50 hidden"
                         id = "userOptions" >
                        <a href = "{% url 'personal_center' %}"
                           class = "block px-4 py-2 text-neutral-700 hover:bg-neutral-50 transition-custom flex items-center" >
                            <i class = "fa-solid fa-user mr-2 w-5 text-center" ></i >主页
                        </a >
                        <a href = "{% url 'message' %}"
                           class = "block px-4 py-2 text-neutral-700 hover:bg-neutral-50 transition-custom flex items-center" >
                            <i class = "fa-solid fa-bookmark mr-2 w-5 text-center" ></i >消息
                        </a >
                        <a href = "{% url 'settings' %}"
                           class = "block px-4 py-2 text-neutral-700 hover:bg-neutral-50 transition-custom flex items-center" >
                            <i class = "fa-solid fa-cog mr-2 w-5 text-center" ></i >设置
                        </a >
                        <div class = "border-t border-neutral-200 my-1" ></div >
                        <a href = "{% url 'logout' %}"
                           class = "block px-4 py-2 text-red-500 hover:bg-red-50 transition-custom flex items-center" >
                            <i class = "fa-solid fa-sign-out mr-2 w-5 text-center" ></i >退出登录
                        </a >
                    </div >
                </div >

                <!-- 移动端菜单按钮 -->
                <button class = "md:hidden text-neutral-700 focus:outline-none" id = "menu-toggle" >
                    <i class = "fa-solid fa-bars text-xl" ></i >
                </button >
            </div >
        </div >

        <!-- 移动端菜单 -->
        <div id = "mobile-menu"
             class = "hidden md:hidden bg-white shadow-lg absolute w-full transform -translate-y-2 opacity-0 transition-all duration-200 ease-in-out"
             style = "top: 100%;" >
            <div class = "container mx-auto px-4 py-3 flex flex-col space-y-3" >
                <a href = "{% url 'community' %}"
                   class = "text-neutral-700 hover:text-primary py-2 transition-custom font-medium flex items-center" >
                    <i class = "fa-solid fa-users mr-3 w-5 text-center" ></i >爱享公社
                </a >
                <a href = "{% url 'moments' %}"
                   class = "text-neutral-700 hover:text-primary py-2 transition-custom font-medium flex items-center" >
                    <i class = "fa-solid fa-bolt mr-3 w-5 text-center" ></i >心动轨迹
                </a >
                <a href = "{% url 'photo_album' %}"
                   class = "text-neutral-700 hover:text-primary py-2 transition-custom font-medium flex items-center" >
                    <i class = "fa-solid fa-images mr-3 w-5 text-center" ></i >心跳相簿
                </a >
                <a href = "{% url 'lovesync' %}"
                   class = "text-neutral-700 hover:text-primary py-2 transition-custom font-medium flex items-center" >
                    <i class = "fa-solid fa-bookmark mr-3 w-5 text-center" ></i >双人日记
                </a >
                <div class = "border-t border-neutral-200 my-1" ></div >
                <a href = "#" class = "text-neutral-700 py-2 transition-custom flex items-center" >
                    <i class = "fa-solid fa-calendar-heart mr-3 w-5 text-center" ></i >纪念日提醒
                </a >
                <a href = "#" class = "text-neutral-700 py-2 transition-custom flex items-center" >
                    <i class = "fa-solid fa-gift mr-3 w-5 text-center" ></i >礼物推荐
                </a >
                <a href = "#" class = "text-neutral-700 py-2 transition-custom flex items-center" >
                    <i class = "fa-solid fa-map-marker-heart mr-3 w-5 text-center" ></i >情侣地点
                </a >
                <a href = "#" class = "text-neutral-700 py-2 transition-custom flex items-center" >
                    <i class = "fa-solid fa-question-circle mr-3 w-5 text-center" ></i >爱情测试
                </a >
                <div class = "border-t border-neutral-200 my-1" ></div >
                <a href = "{% url 'personal_center' %}"
                   class = "text-neutral-700 py-2 transition-custom flex items-center" >
                    <i class = "fa-solid fa-user mr-3 w-5 text-center" ></i >主页
                </a >
                <a href = "{% url 'message' %}" class = "text-neutral-700 py-2 transition-custom flex items-center" >
                    <i class = "fa-solid fa-bookmark mr-3 w-5 text-center" ></i >消息
                </a >
                <a href = "{% url 'message' %}" class = "text-neutral-700 py-2 transition-custom flex items-center" >
                    <i class = "fa-solid fa-cog mr-3 w-5 text-center" ></i >设置
                </a >
                <div class = "border-t border-neutral-200 my-1" ></div >
                <a href = "{% url 'logout' %}" class = "text-red-500 py-2 transition-custom flex items-center" >
                    <i class = "fa-solid fa-sign-out mr-3 w-5 text-center" ></i >退出登录
                </a >
            </div >
        </div >
    </header >

    <!-- 新增固定导航栏 -->
    <div class = "fixed left-0 top-0 h-full w-64 bg-white shadow-lg z-40 overflow-y-auto md:block hidden border-r border-neutral-200 transition-all duration-300"
         id = "sidebar" >
        <div class = "p-4 flex justify-between items-center border-b border-neutral-200" >
            <div class = "flex items-center space-x-2" >
                <div
                        class = "w-9 h-9 rounded-full bg-gradient-to-br from-primary to-secondary flex items-center justify-center text-white shadow-sm transform hover:rotate-12 transition-all duration-300" >
                    <i class = "fa-solid fa-heart text-lg" ></i >
                </div >
                <span class = "font-bold text-neutral-800 text-lg" >LoveSync</span >
            </div >
            <!-- 导航栏关闭开启按钮 -->
            <button id = "toggleSidebar"
                    class = "text-neutral-700 hover:text-primary transition-all duration-200 p-2 rounded-full hover:bg-neutral-100 active:scale-95" >
                <i class = "fa-solid fa-bars" ></i >
            </button >
        </div >
        <div class = "p-4 space-y-4" >
            <div class = "space-y-1" >
                <a href = "{% url 'index' %}"
                   class = "flex items-center space-x-3 text-primary bg-primary/5 border-l-4 border-primary px-2 py-3 rounded-r-lg transition-all duration-200 group hover:translate-x-1" >
                    <i class = "fa-solid fa-house w-5 text-center group-hover:scale-110 transition-transform" ></i >
                    <span >双人日记</span >
                </a >
                <a href = "{% url 'personal_center' %}"
                   class = "flex items-center space-x-3 text-neutral-700 hover:text-primary hover:bg-neutral-50 px-2 py-3 rounded-r-lg transition-all duration-200 group hover:translate-x-1" >
                    <i class = "fa-solid fa-blog w-5 text-center group-hover:scale-110 transition-transform" ></i >
                    <span >主页</span >
                </a >
                <a href = "{% url 'message' %}"
                   class = "flex items-center space-x-3 text-neutral-700 hover:text-primary hover:bg-neutral-50 px-2 py-3 rounded-r-lg transition-all duration-200 group hover:translate-x-1" >
                    <i class = "fa-solid fa-download w-5 text-center group-hover:scale-110 transition-transform" ></i >
                    <span >消息</span >
                </a >
                <a href = "#"
                   class = "flex items-center space-x-3 text-neutral-700 hover:text-primary hover:bg-neutral-50 px-2 py-3 rounded-r-lg transition-all duration-200 group hover:translate-x-1" >
                    <i class = "fa-solid fa-list-ol w-5 text-center group-hover:scale-110 transition-transform" ></i >
                    <span >排行榜</span >
                </a >
                <a href = "#"
                   class = "flex items-center space-x-3 text-neutral-700 hover:text-primary hover:bg-neutral-50 px-2 py-3 rounded-r-lg transition-all duration-200 group hover:translate-x-1" >
                    <i class = "fa-solid fa-bell w-5 text-center group-hover:scale-110 transition-transform" ></i >
                    <span >订阅</span >
                </a >
                <a href = "#"
                   class = "flex items-center space-x-3 text-neutral-700 hover:text-primary hover:bg-neutral-50 px-2 py-3 rounded-r-lg transition-all duration-200 group hover:translate-x-1" >
                    <i class = "fa-solid fa-user-plus w-5 text-center group-hover:scale-110 transition-transform" ></i >
                    <span >关注</span >
                </a >
                <a href = "{% url 'favorites' %}"
                   class = "flex items-center space-x-3 text-neutral-700 hover:text-primary hover:bg-neutral-50 px-2 py-3 rounded-r-lg transition-all duration-200 group hover:translate-x-1" >
                    <i class = "fa-solid fa-bookmark w-5 text-center group-hover:scale-110 transition-transform" ></i >
                    <span >收藏</span >
                </a >
                <a href = "#"
                   class = "flex items-center space-x-3 text-neutral-700 hover:text-primary hover:bg-neutral-50 px-2 py-3 rounded-r-lg transition-all duration-200 group hover:translate-x-1" >
                    <i class = "fa-solid fa-history w-5 text-center group-hover:scale-110 transition-transform" ></i >
                    <span >历史</span >
                </a >
                <a href = "#"
                   class = "flex items-center space-x-3 text-neutral-700 hover:text-primary hover:bg-neutral-50 px-2 py-3 rounded-r-lg transition-all duration-200 group hover:translate-x-1" >
                    <i class = "fa-solid fa-crown w-5 text-center group-hover:scale-110 transition-transform" ></i >
                    <span >会员中心</span >
                </a >
                <a href = "{% url 'mall' %}"
                   class = "flex items-center space-x-3 text-neutral-700 hover:text-primary hover:bg-neutral-50 px-2 py-3 rounded-r-lg transition-all duration-200 group hover:translate-x-1" >
                    <i class = "fa-solid fa-shopping-bag w-5 text-center group-hover:scale-110 transition-transform" ></i >
                    <span >购物商城</span >
                </a >
            </div >
            <div class = "border-t border-neutral-200 mt-4 pt-4" >
                <a href = "#"
                   class = "flex items-center space-x-3 text-neutral-700 hover:text-primary hover:bg-neutral-50 px-2 py-3 rounded-r-lg transition-all duration-200 group hover:translate-x-1" >
                    <i class = "fa-solid fa-envelope w-5 text-center group-hover:scale-110 transition-transform" ></i >
                    <span >联系我们</span >
                </a >
                <div class = "mt-3 space-y-2 text-xs text-neutral-500 pl-2" >
                    <p >工作时间: 8:30 - 22:00</p >
                    <p >客服电话: 187-0022-2185</p >
                    <p ><a href = "#" class = "hover:text-primary transition-custom" >关于我们</a >
                        <a href = "#" class = "hover:text-primary transition-custom" >招贤纳士</a >
                    </p >
                    <p ><a href = "#" class = "hover:text-primary transition-custom" >商务合作</a >
                        <a href = "#" class = "hover:text-primary transition-custom" >寻求报道</a >
                    </p >
                    <p >18700222185@163.com在线客服</p >
                    <p >京ICP备19004658号</p >
                    <p >经营性网站备案信息</p >
                    <p >公安备案号110110110110
                        营业执照</p >
                    <p >互联网违法和不良信息举报中心</p >
                    <p >家长监护
                        中国互联网举报中心</p >
                    <p >网络110报警服务
                        账号管理规范</p >
                    <p >版权与免责声明
                        出版物许可证</p >
                </div >
            </div >
            <div class = "border-t border-neutral-200 mt-4 pt-4" >
                <div class = "flex items-center justify-center mb-4" >
                    <div class = "w-24 h-24 relative" >
                        <div
                                class = "w-24 h-24 rounded-full bg-gradient-love flex items-center justify-center text-white  hover:scale-110 hover:rotate-12 transition-all duration-300" >
                            <i class = "fa-solid fa-heart text-gradient text-6xl" ></i >
                        </div >
                    </div >
                </div >
                <p class = "text-xs text-neutral-500 text-center" >©2003-2025 陕西文刀水寿网络技术有限责任公司</p >
            </div >
        </div >
    </div >

    <!-- 主内容区 -->
    <main class = "flex-grow pt-24 pb-16 relative z-10 pl-64" >
        <div class = "container mx-auto px-4" >
            <!-- 小屏幕下换行显示 -->
            <div class = "flex flex-col md:flex-row flex-wrap" >
                <!-- 中间内容区 -->
                <div class = "w-full md:w-3/4 md:px-6 space-y-6" >
                    <!-- 轮播图 -->
                    <div class = "bg-white rounded-xl shadow-lg overflow-hidden hover-scale" >
                        <div class = "relative aspect-video h-full " >
                            <div class = "absolute inset-0 carousel-container" >
                                <!-- 轮播图项 1 -->
                                <div class = "w-full h-full bg-cover bg-center carousel-item" >
                                    <img id = "dynamicImage" src = "" alt = "动态图片"
                                         class = "w-full h-full object-cover" >
                                    <div class = "absolute inset-0 bg-black opacity-30" ></div >
                                    <div class = "absolute inset-0 flex items-center justify-center" >
                                        <h3 class = "text-2xl font-bold text-white text-shadow" >情侣专属活动</h3 >
                                    </div >
                                </div >
                            </div >
                            <!-- 轮播图导航按钮 -->
                            <button
                                    class = "absolute left-4 top-1/2 transform -translate-y-1/2 text-white hover:text-primary transition-custom carousel-prev" >
                                <i class = "fa-solid fa-chevron-left text-2xl" ></i >
                            </button >
                            <button
                                    class = "absolute right-4 top-1/2 transform -translate-y-1/2 text-white hover:text-primary transition-custom carousel-next" >
                                <i class = "fa-solid fa-chevron-right text-2xl" ></i >
                            </button >
                        </div >
                    </div >

                    <!-- 动态内容列表 -->
                    {% for moment in moments %}
                    <!-- 动态1 -->
                        <div class = "bg-white rounded-xl shadow-lg overflow-hidden post-card w-full" >
                        <div class = "p-8" >
                            <div class = "flex items-center justify-between" >
                                <div class = "flex items-center space-x-3" >
                                    <div class = "w-10 h-10 rounded-full overflow-hidden" >
                                        <img src = "{{ moment.user.profile.userAvatar.url }}" alt = "发布者头像"
                                             class = "w-full h-full object-cover" >
                                    </div >
                                    <div >
                                        <h4 class = "font-semibold text-neutral-900" >{{ moment.user.name }}</h4 >
                                        <p class = "text-neutral-500 text-xs" >{{ moment.created_at|date:"Y-m-d H:i" }}</p >
                                    </div >
                                </div >
                                <button class = "text-neutral-400 hover:text-neutral-700 transition-custom" >
                                    <i class = "fa-solid fa-ellipsis-h" ></i >
                                </button >
                            </div >

                            <div class = "mt-4" >
                                <p class = "text-neutral-800" >{{ moment.content }}</p >
                            </div >

                            <!-- 动态图片 -->
                            <div class = "mt-4 grid gap-2
                                        sm:grid-cols-2
                                        md:grid-cols-3
                                        lg:grid-cols-4" >
                                {% for image in moment.moment_images.all %}
                                    <img src = "{{ image.image.url }}" alt = "动态图片"
                                         class = "rounded-lg w-full h-40 object-cover hover-scale" >
                                {% endfor %}
                            </div >

                            <div class = "mt-4 flex justify-between items-center" >
                                <div class = "flex space-x-4" >
                                    <button
                                            class = "flex items-center space-x-1 text-neutral-500 hover:text-primary transition-custom like-btn" >
                                        <i class = "fa-regular fa-heart" ></i >
                                        <span >{{ moment.likes }}</span >
                                    </button >
                                    <button
                                            class = "flex items-center space-x-1 text-neutral-500 hover:text-primary transition-custom comment-btn" >
                                        <i class = "fa-regular fa-comment" ></i >
                                        <span >{{ moment.comments }}</span >
                                    </button >
                                </div >
                                <button
                                        class = "flex items-center space-x-1 text-neutral-500 hover:text-primary transition-custom" >
                                    <i class = "fa-regular fa-share-from-square" ></i >
                                    <span >分享</span >
                                </button >
                            </div >
                        </div >
                            <!-- 评论区域 -->
                        <div class = "bg-neutral-50 p-4 border-t border-neutral-100 hidden comment-section" >
                            <div class = "space-y-4" >
                                <!-- 评论1 -->
                                <div class = "flex space-x-3 comment-slide" >
                                    <div class = "w-8 h-8 rounded-full overflow-hidden" >
                                        <img src = "https://picsum.photos/200/200?random=6" alt = "评论者头像"
                                             class = "w-full h-full object-cover" >
                                    </div >
                                    <div class = "flex-1" >
                                        <div class = "bg-white rounded-lg p-3" >
                                            <div class = "flex justify-between items-center" >
                                                <h5 class = "font-medium text-sm text-neutral-900" >恋爱小助手</h5 >
                                                <span class = "text-neutral-400 text-xs" >1小时前</span >
                                            </div >
                                            <p class = "text-neutral-700 text-sm mt-1" >一周年快乐！好羡慕你们呀，希望你们能一直幸福下去~</p >
                                        </div >
                                        <div class = "flex space-x-3 mt-2" >
                                            <button
                                                    class = "text-neutral-500 hover:text-primary text-xs transition-custom" >
                                                <i class = "fa-regular fa-heart" ></i > 16
                                            </button >
                                            <button
                                                    class = "text-neutral-500 hover:text-primary text-xs transition-custom" >
                                                回复
                                            </button >
                                        </div >
                                    </div >
                                </div >
                                <!-- 评论2 -->
                                <div class = "flex space-x-3 comment-slide" style = "animation-delay: 0.1s;" >
                                    <div class = "w-8 h-8 rounded-full overflow-hidden" >
                                        <img src = "https://picsum.photos/200/200?random=7" alt = "评论者头像"
                                             class = "w-full h-full object-cover" >
                                    </div >
                                    <div class = "flex-1" >
                                        <div class = "bg-white rounded-lg p-3" >
                                            <div class = "flex justify-between items-center" >
                                                <h5 class = "font-medium text-sm text-neutral-900" >爱情故事</h5 >
                                                <span class = "text-neutral-400 text-xs" >50分钟前</span >
                                            </div >
                                            <p class = "text-neutral-700 text-sm mt-1" >餐厅看起来很不错啊，是哪家呢？也想和另一半去体验一下~</p >
                                        </div >
                                        <div class = "flex space-x-3 mt-2" >
                                            <button
                                                    class = "text-neutral-500 hover:text-primary text-xs transition-custom" >
                                                <i class = "fa-regular fa-heart" ></i > 8
                                            </button >
                                            <button
                                                    class = "text-neutral-500 hover:text-primary text-xs transition-custom" >
                                                回复
                                            </button >
                                        </div >
                                    </div >
                                </div >
                                <!-- 发表评论 -->
                                <div class = "flex space-x-3 mt-2" >
                                    <div class = "w-8 h-8 rounded-full overflow-hidden" >
                                        <img src = "https://picsum.photos/200/200?random=1" alt = "用户头像"
                                             class = "w-full h-full object-cover" >
                                    </div >
                                    <div class = "flex-1 relative" >
                                        <input type = "text" placeholder = "写下你的评论..."
                                               class = "w-full border border-neutral-200 rounded-full pl-4 pr-10 py-2 focus:outline-none focus:ring-2 focus:ring-primary/50 form-input-focus text-sm" >
                                        <button class = "absolute right-2 top-1/2 -translate-y-1/2 text-primary" >
                                            <i class = "fa-solid fa-paper-plane" ></i >
                                        </button >
                                    </div >
                                </div >
                            </div >
                        </div >
                    </div >
                    {% endfor %}

                    <!-- 加载更多 -->
                    <button
                            class = "w-full py-3 bg-white rounded-xl shadow-lg text-primary font-medium hover:bg-neutral-50 transition-custom" >
                        加载更多
                    </button >
                </div >

                <!-- 右侧内容区 -->
                <div class = "w-full md:w-1/4 space-y-6 mt-6 md:mt-0" >

                    <!-- 智能体聊天窗口 -->
                    <div class = "chat-widget fixed bottom-6 right-4 z-50 max-w-sm w-full bg-white rounded-2xl shadow-xl overflow-hidden transition-all duration-300 transform hover:shadow-2xl" >
                        <!-- 聊天窗口头部 -->
                        <div class = "chat-header bg-gradient-to-r from-primary to-primary/50 text-white p-3 cursor-pointer transition-all duration-300 hover:from-primary/90 hover:to-primary/60"
                             onclick = "toggleChatWindow()" >
                            <div class = "flex items-center justify-between gap-3" >

                                <!-- 标题区域：增强文字层次 -->
                                <div class = "flex-1 min-w-0 " >
                                    <h3 class = "text-base font-semibold truncate" >LoveSync-AI</h3 >
                                    <p class = "text-xs text-white/80 mt-0.5" >双人日记小助手</p >
                                </div >

                                <!-- 状态标签：优化样式 -->
                                <span class = "text-xs bg-white/15 backdrop-blur-sm px-2.5 py-0.5 rounded-full flex items-center gap-1.5" >
                                    <span class = "w-2 h-2 rounded-full bg-green-300 animate-pulse" ></span >
                                    在线
                                </span >
                            </div >
                        </div >

                        <!-- 聊天消息区域 -->
                        <div class = "chat-messages h-[400px] overflow-y-auto p-4 space-y-4" id = "chatMessages" >
                        </div >

                        <!-- 输入区域 -->
                        <div class = "chat-input p-4 border-t border-neutral-100" >
                            <div class = "flex gap-2" >
                                <input
                                        type = "text"
                                        id = "userInput"
                                        placeholder = "和我说说你的需求吧..."
                                        class = "flex-1 px-4 py-2 border border-neutral-200 rounded-full focus:outline-none focus:ring-2 focus:ring-primary/50 focus:border-primary transition-all"
                                        onkeydown = "if(event.key === 'Enter') sendMessage()"
                                >
                                <button
                                        onclick = "sendMessage()"
                                        class = "bg-primary hover:bg-primary/90 text-white rounded-full w-10 h-10 flex items-center justify-center transition-all transform hover:scale-105 active:scale-95"
                                >
                                    <i class = "fa-solid fa-paper-plane" ></i >
                                </button >
                            </div >
                        </div >
                    </div >

                    <!-- 热门话题 -->
                    <div class = "bg-white rounded-xl shadow-lg p-6 hover-scale" >
                        <h3 class = "text-lg font-semibold text-neutral-900 mb-4 flex items-center" >
                            <i class = "fa-solid fa-fire text-primary mr-2" ></i >
                            热门话题
                        </h3 >
                        <ul class = "space-y-3" >
                            <li >
                                <a href = "#"
                                   class = "flex items-center p-2 rounded-lg hover:bg-neutral-50 transition-custom" >
                                    <span
                                            class = "bg-primary/10 text-primary text-xs font-medium px-2 py-1 rounded-full mr-2" >#情人节计划#</span >
                                    <span class = "text-neutral-700 text-sm" >2.4k 动态</span >
                                </a >
                            </li >
                            <li >
                                <a href = "#"
                                   class = "flex items-center p-2 rounded-lg hover:bg-neutral-50 transition-custom" >
                                    <span
                                            class = "bg-primary/10 text-primary text-xs font-medium px-2 py-1 rounded-full mr-2" >#情侣穿搭#</span >
                                    <span class = "text-neutral-700 text-sm" >1.8k 动态</span >
                                </a >
                            </li >
                            <li >
                                <a href = "#"
                                   class = "flex items-center p-2 rounded-lg hover:bg-neutral-50 transition-custom" >
                                    <span
                                            class = "bg-primary/10 text-primary text-xs font-medium px-2 py-1 rounded-full mr-2" >#爱情保鲜秘诀#</span >
                                    <span class = "text-neutral-700 text-sm" >1.5k 动态</span >
                                </a >
                            </li >
                            <li >
                                <a href = "#"
                                   class = "flex items-center p-2 rounded-lg hover:bg-neutral-50 transition-custom" >
                                    <span
                                            class = "bg-primary/10 text-primary text-xs font-medium px-2 py-1 rounded-full mr-2" >#情侣旅行#</span >
                                    <span class = "text-neutral-700 text-sm" >1.2k 动态</span >
                                </a >
                            </li >
                            <li >
                                <a href = "#"
                                   class = "flex items-center p-2 rounded-lg hover:bg-neutral-50 transition-custom" >
                                    <span
                                            class = "bg-primary/10 text-primary text-xs font-medium px-2 py-1 rounded-full mr-2" >#恋爱周年纪念#</span >
                                    <span class = "text-neutral-700 text-sm" >980 动态</span >
                                </a >
                            </li >
                        </ul >
                    </div >

                    <!-- 推荐关注模块 -->
                    <div class = "bg-white rounded-xl shadow-lg p-6 hover-scale" >
                        <h3 class = "text-lg font-semibold text-neutral-900 mb-4 flex items-center" >
                            <i class = "fa-solid fa-user-plus text-primary mr-2" ></i >
                            推荐关注
                        </h3 >
                        <ul class = "space-y-4" >
                            <li >
                                <div class = "flex items-center" >
                                    <div class = "w-10 h-10 rounded-full overflow-hidden mr-3" >
                                        <img src = "https://picsum.photos/200/200?random=21" alt = "推荐用户头像"
                                             class = "w-full h-full object-cover" >
                                    </div >
                                    <div class = "flex-1" >
                                        <h4 class = "text-neutral-900 font-medium text-sm" >甜甜的小两口</h4 >
                                        <p class = "text-neutral-500 text-xs" >分享日常甜蜜瞬间</p >
                                    </div >
                                    <button
                                            class = "text-primary text-sm border border-primary rounded-full px-3 py-1 hover:bg-primary hover:text-white transition-custom" >
                                        关注
                                    </button >
                                </div >
                            </li >
                            <li >
                                <div class = "flex items-center" >
                                    <div class = "w-10 h-10 rounded-full overflow-hidden mr-3" >
                                        <img src = "https://picsum.photos/200/200?random=3" alt = "推荐用户头像"
                                             class = "w-full h-full object-cover" >
                                    </div >
                                    <div class = "flex-1" >
                                        <h4 class = "text-neutral-900 font-medium text-sm" >情侣摄影师</h4 >
                                        <p class = "text-neutral-500 text-xs" >记录爱情的每一刻</p >
                                    </div >
                                    <button
                                            class = "text-primary text-sm border border-primary rounded-full px-3 py-1 hover:bg-primary hover:text-white transition-custom" >
                                        关注
                                    </button >
                                </div >
                            </li >
                            <li >
                                <div class = "flex items-center" >
                                    <div class = "w-10 h-10 rounded-full overflow-hidden mr-3" >
                                        <img src = "https://picsum.photos/200/200?random=4" alt = "推荐用户头像"
                                             class = "w-full h-full object-cover" >
                                    </div >
                                    <div class = "flex-1" >
                                        <h4 class = "text-neutral-900 font-medium text-sm" >恋爱导师</h4 >
                                        <p class = "text-neutral-500 text-xs" >分享恋爱技巧与建议</p >
                                    </div >
                                    <button
                                            class = "text-primary text-sm border border-primary rounded-full px-3 py-1 hover:bg-primary hover:text-white transition-custom" >
                                        关注
                                    </button >
                                </div >
                            </li >
                        </ul >
                    </div >

                    <!-- 社区活动 -->
                    <div class = "bg-white rounded-xl shadow-lg overflow-hidden hover-scale" >
                        <div class = "p-6" >
                            <h3 class = "text-lg font-semibold text-neutral-900 mb-4" >社区活动</h3 >
                            <div class = "space-y-4" >
                                <div class = "bg-gradient-love rounded-lg p-4 text-white" >
                                    <h4 class = "font-semibold" >七夕情侣摄影大赛</h4 >
                                    <p class = "text-white/80 text-sm mt-1" >分享你们的甜蜜照片，赢取浪漫奖品</p >
                                    <div class = "mt-3 text-xs bg-white/20 inline-block px-3 py-1 rounded-full" >
                                        还有3天结束
                                    </div >
                                </div >
                                <div
                                        class = "border border-neutral-200 rounded-lg p-4 hover:border-primary transition-custom" >
                                    <h4 class = "font-medium text-neutral-900" >情侣默契大考验</h4 >
                                    <p class = "text-neutral-600 text-sm mt-1" >测试你们的默契程度，看看是否心灵相通</p >
                                    <div
                                            class = "mt-3 text-xs bg-primary/10 text-primary inline-block px-3 py-1 rounded-full" >
                                        进行中
                                    </div >
                                </div >
                                <div
                                        class = "border border-neutral-200 rounded-lg p-4 hover:border-primary transition-custom" >
                                    <h4 class = "font-medium text-neutral-900" >爱情故事征集</h4 >
                                    <p class = "text-neutral-600 text-sm mt-1" >分享你们的爱情故事，让更多人感受幸福</p >
                                    <div
                                            class = "mt-3 text-xs bg-neutral-100 text-neutral-600 inline-block px-3 py-1 rounded-full" >
                                        即将开始
                                    </div >
                                </div >
                            </div >
                        </div >
                    </div >

                    <!-- 热门情侣 -->
                    <div class = "bg-white rounded-xl shadow-lg p-6 hover-scale" >
                        <h3 class = "text-lg font-semibold text-neutral-900 mb-4" >热门情侣</h3 >
                        <div class = "space-y-4" >
                            <div class = "flex items-center justify-between" >
                                <div class = "flex items-center space-x-3" >
                                    <div class = "flex -space-x-2" >
                                        <div class = "w-8 h-8 rounded-full overflow-hidden border-2 border-white" >
                                            <img src = "https://picsum.photos/200/200?random=12" alt = "情侣头像1"
                                                 class = "w-full h-full object-cover" >
                                        </div >
                                        <div class = "w-8 h-8 rounded-full overflow-hidden border-2 border-white" >
                                            <img src = "https://picsum.photos/200/200?random=13" alt = "情侣头像2"
                                                 class = "w-full h-full object-cover" >
                                        </div >
                                    </div >
                                    <div >
                                        <h4 class = "font-medium text-sm text-neutral-900" >甜蜜二人组</h4 >
                                        <p class = "text-neutral-500 text-xs" >3.2k 粉丝</p >
                                    </div >
                                </div >
                                <button
                                        class = "text-primary text-xs border border-primary rounded-full px-3 py-1 hover:bg-primary hover:text-white transition-custom" >
                                    关注
                                </button >
                            </div >
                            <div class = "flex items-center justify-between" >
                                <div class = "flex items-center space-x-3" >
                                    <div class = "flex -space-x-2" >
                                        <div class = "w-8 h-8 rounded-full overflow-hidden border-2 border-white" >
                                            <img src = "https://picsum.photos/200/200?random=14" alt = "情侣头像1"
                                                 class = "w-full h-full object-cover" >
                                        </div >
                                        <div class = "w-8 h-8 rounded-full overflow-hidden border-2 border-white" >
                                            <img src = "https://picsum.photos/200/200?random=15" alt = "情侣头像2"
                                                 class = "w-full h-full object-cover" >
                                        </div >
                                    </div >
                                    <div >
                                        <h4 class = "font-medium text-sm text-neutral-900" >旅行伴侣</h4 >
                                        <p class = "text-neutral-500 text-xs" >2.8k 粉丝</p >
                                    </div >
                                </div >
                                <button
                                        class = "text-primary text-xs border border-primary rounded-full px-3 py-1 hover:bg-primary hover:text-white transition-custom" >
                                    关注
                                </button >
                            </div >
                            <div class = "flex items-center justify-between" >
                                <div class = "flex items-center space-x-3" >
                                    <div class = "flex -space-x-2" >
                                        <div class = "w-8 h-8 rounded-full overflow-hidden border-2 border-white" >
                                            <img src = "https://picsum.photos/200/200?random=16" alt = "情侣头像1"
                                                 class = "w-full h-full object-cover" >
                                        </div >
                                        <div class = "w-8 h-8 rounded-full overflow-hidden border-2 border-white" >
                                            <img src = "https://picsum.photos/200/200?random=17" alt = "情侣头像2"
                                                 class = "w-full h-full object-cover" >
                                        </div >
                                    </div >
                                    <div >
                                        <h4 class = "font-medium text-sm text-neutral-900" >美食爱好者</h4 >
                                        <p class = "text-neutral-500 text-xs" >2.5k 粉丝</p >
                                    </div >
                                </div >
                                <button
                                        class = "text-primary text-xs border border-primary rounded-full px-3 py-1 hover:bg-primary hover:text-white transition-custom" >
                                    关注
                                </button >
                            </div >
                        </div >
                        <button
                                class = "w-full mt-4 py-2 text-center text-primary text-sm border border-primary rounded-lg hover:bg-primary hover:text-white transition-custom" >
                            查看更多
                        </button >
                    </div >

                    <!-- 应用下载 -->
                    <div class = "bg-gradient-love rounded-xl shadow-lg p-6 text-white hover-scale" >
                        <h3 class = "text-lg font-semibold mb-2" >下载 LoveSync 应用</h3 >
                        <p class = "text-white/80 text-sm mb-4" >随时随地记录你们的爱情故事</p >
                        <div class = "flex space-x-3" >
                            <a href = "#"
                               class = "bg-white/20 hover:bg-white/30 transition-custom rounded-lg px-3 py-2 flex items-center space-x-2" >
                                <i class = "fa-brands fa-apple text-lg" ></i >
                                <div >
                                    <div class = "text-xs" >下载</div >
                                    <div class = "text-sm font-medium" >App Store</div >
                                </div >
                            </a >
                            <a href = "#"
                               class = "bg-white/20 hover:bg-white/30 transition-custom rounded-lg px-3 py-2 flex items-center space-x-2" >
                                <i class = "fa-brands fa-android text-lg" ></i >
                                <div >
                                    <div class = "text-xs" >下载</div >
                                    <div class = "text-sm font-medium" >Google Play</div >
                                </div >
                            </a >
                        </div >
                    </div >
                </div >
            </div >
        </div >
    </main >

    <!-- 页脚 -->
    <!-- <footer class="bg-white border-t border-neutral-200 py-8">
        <div class="container mx-auto px-4">
            <div class="flex flex-col md:flex-row justify-between items-center">
                <a href="#" class="flex items-center space-x-2">
                    <div
                        class="w-10 h-10 rounded-full bg-gradient-love flex items-center justify-center text-white shadow-md">
                        <i class="fa-solid fa-heart text-xl"></i>
                    </div>
                    <span class="text-xl font-bold text-neutral-800 tracking-tight">LoveSync</span>
                </a>
                <div class="text-neutral-500 text-sm">
                    &copy; 2025 LoveSync. All rights reserved.
                </div>
            </div>
        </div>
    </footer> -->

    <script >

        // 轮播
        document.addEventListener('DOMContentLoaded', function () {
            const imageElement = document.getElementById('dynamicImage');
            let a = 1; // 初始化变量 a
            const maxImageNumber = 16; // 假设图片编号从 1 到 5，可根据实际情况修改

            // 定义函数用于更新图片地址
            function updateImage() {
                a++;
                if (a > maxImageNumber) {
                    a = 1; // 如果 a 超过最大图片编号，则重置为 1
                }
                imageElement.src = `../static/images/${a}.jpg`;
            }

            // 初始调用一次更新图片地址
            updateImage();

            // 设置定时器，每 5 秒更新一次图片地址，可根据需要调整时间间隔
            setInterval(updateImage, 1000);
        });

        document.addEventListener('DOMContentLoaded', function () {
            const toggleSidebarButton = document.getElementById('toggleSidebar');
            const sidebar = document.getElementById('sidebar');

            toggleSidebarButton.addEventListener('click', function () {
                sidebar.classList.toggle('hidden');
            });
        });

        // 移动端菜单切换
        document.getElementById('menu-toggle').addEventListener('click', function () {
            const mobileMenu = document.getElementById('mobile-menu');
            if (mobileMenu.classList.contains('hidden')) {
                mobileMenu.classList.remove('hidden');
                // 添加动画类
                setTimeout(() => {
                    mobileMenu.classList.add('translate-y-0', 'opacity-100');
                }, 50);
            } else {
                // 移除动画类
                mobileMenu.classList.remove('translate-y-0', 'opacity-100');
                // 等待动画完成后隐藏菜单
                setTimeout(() => {
                    mobileMenu.classList.add('hidden');
                }, 200);
            }
        });

        // 点赞功能
        document.querySelectorAll('.like-btn').forEach(btn => {
            btn.addEventListener('click', function () {
                const icon = this.querySelector('i');
                const count = this.querySelector('span');

                if (icon.classList.contains('fa-regular')) {
                    icon.classList.remove('fa-regular');
                    icon.classList.add('fa-solid');
                    icon.style.color = '#FF6B8B';
                    count.textContent = parseInt(count.textContent) + 1;
                } else {
                    icon.classList.remove('fa-solid');
                    icon.classList.add('fa-regular');
                    icon.style.color = '';
                    count.textContent = parseInt(count.textContent) - 1;
                }
            });
        });

        // 评论功能（模拟打开评论框）
        document.querySelectorAll('.comment-btn').forEach(btn => {
            btn.addEventListener('click', function () {
                alert('打开评论区（功能开发中）');
            });
        });

        const userAvatar = document.getElementById('userAvatar');
        const userOptions = document.getElementById('userOptions');
        const userDropdown = document.getElementById('userDropdown');

        let closeTimer;

        // 鼠标经过头像时打开菜单
        userAvatar.addEventListener('mouseenter', function () {
            clearTimeout(closeTimer); // 清除之前的定时器
            userOptions.classList.remove('hidden');
        });

        // 鼠标悬停在下拉菜单时保持菜单打开
        userDropdown.addEventListener('mouseenter', function () {
            clearTimeout(closeTimer); // 清除之前的定时器
            userOptions.classList.remove('hidden');
        });

        // 鼠标离开下拉菜单时关闭菜单
        userDropdown.addEventListener('mouseleave', function () {
            closeTimer = setTimeout(() => {
                userOptions.classList.add('hidden');
            }, 500);
        });

        document.addEventListener('DOMContentLoaded', function () {
            const moreButton = document.getElementById('moreButton');
            const moreOptions = document.getElementById('moreOptions');
            const moreDropdown = document.getElementById('moreDropdown');

            let closeTimer;

            // 鼠标经过按钮时打开菜单
            moreButton.addEventListener('mouseenter', function () {
                clearTimeout(closeTimer); // 清除之前的定时器
                moreOptions.classList.remove('hidden');
            });

            // 鼠标悬停在下拉菜单时保持菜单打开
            moreDropdown.addEventListener('mouseenter', function () {
                clearTimeout(closeTimer); // 清除之前的定时器
                moreOptions.classList.remove('hidden');
            });

            // 鼠标离开下拉菜单时关闭菜单
            moreDropdown.addEventListener('mouseleave', function () {
                closeTimer = setTimeout(() => {
                    moreOptions.classList.add('hidden');
                }, 500); // 延迟200毫秒
            });
        });

        // 页面加载完成时将页面滚动到顶部
        window.onload = function () {
            window.scrollTo(0, 0);
        };
        // 会话状态管理
        let chatSession = {
            sessionId: null,
            isInitialized: false
        };

        // 初始化聊天
        async function initChat() {
            try {
                const response = await fetch("/AI/api/chat/init/", {
                    method: "POST",
                    headers: {
                        "Content-Type": "application/json",
                        "X-CSRFToken": getCSRFToken()
                    }
                });
                const data = await response.json();
                if (data.success) {
                    chatSession.sessionId = data.session_id;
                    chatSession.isInitialized = true;
                    // 显示初始回复（如果接口返回）
                    if (data.response) {
                        addMessageToUI("assistant", data.response);
                    }
                } else {
                    addMessageToUI("system", "小助手暂时有点忙，稍后再试试吧~");
                }
            } catch (error) {
                console.error("初始化聊天失败:", error);
                addMessageToUI("system", "连接失败，请刷新页面重试");
            }
        }

        // 发送消息
        async function sendMessage() {
            const input = document.getElementById("userInput");
            const message = input.value.trim();
            if (!message || !chatSession.isInitialized) return;

            // 显示用户消息
            addMessageToUI("user", message);
            input.value = "";

            try {
                const response = await fetch("/AI/api/chat/message/", {
                    method: "POST",
                    headers: {
                        "Content-Type": "application/json",
                        "X-CSRFToken": getCSRFToken()
                    },
                    body: JSON.stringify({
                        session_id: chatSession.sessionId,
                        message: message
                    })
                });
                const data = await response.json();
                if (data.success) {
                    addMessageToUI("assistant", data.response);
                } else {
                    addMessageToUI("system", "消息发送失败: " + data.error);
                }
            } catch (error) {
                console.error("发送消息失败:", error);
                addMessageToUI("system", "发送失败，请重试");
            }
        }

        // 添加消息到界面
        function addMessageToUI(role, content) {
            const messagesDiv = document.getElementById("chatMessages");
            const messageDiv = document.createElement("div");
            messageDiv.className = `message ${role}-message flex items-start`;

            // 根据角色显示不同头像
            let avatar = "";
            if (role === "assistant") {
                avatar = `<div class = "w-8 h-8 rounded-full bg-gradient-love flex items-center justify-center text-white shadow-md  animate-pulse-slow" >
                                  <i class = "fa-solid fa-heart text-xl" ></i >
                            </div >`
            } else if (role === "user") {
                avatar = `<div class="avatar w-8 h-8 rounded-full bg-neutral-200 flex items-center justify-center text-neutral-700 ml-3 flex-shrink-0">
                    <img src = "{{ user.profile.userAvatar.url }}" alt = "用户头像"
                             class = "w-full h-full object-cover" >
                  </div>`;
            }

            messageDiv.innerHTML = `
        ${avatar}
        <div class="message-content px-4 py-2 max-w-[80%]">${content}</div>
    `;
            messagesDiv.appendChild(messageDiv);
            // 滚动到底部
            messagesDiv.scrollTop = messagesDiv.scrollHeight;
        }

        // 切换聊天窗口展开/折叠
        function toggleChatWindow() {
            const widget = document.querySelector(".chat-widget");
            widget.classList.toggle("chat-collapsed");
        }

        // 获取CSRF令牌（从cookie中）
        function getCSRFToken() {
            const cookieValue = document.cookie
                .split('; ')
                .find(row => row.startsWith('csrftoken='))
                ?.split('=')[1];
            return cookieValue || '';
        }

        // 页面加载时初始化
        window.addEventListener("load", initChat);

    </script >
</body >

</html >