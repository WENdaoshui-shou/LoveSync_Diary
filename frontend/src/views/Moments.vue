<template>
  <div
    class="font-inter bg-neutral-100 text-neutral-800 min-h-screen flex flex-col overflow-x-hidden relative scroll-smooth">
    <!-- ËÉåÊôØË£ÖÈ•∞ÂÖÉÁ¥† -->
    <div class="absolute top-0 left-0 w-full h-full overflow-hidden pointer-events-none">
      <div class="absolute -top-40 -left-40 w-80 h-80 bg-primary/10 rounded-full filter blur-3xl float-animation"></div>
      <div class="absolute -bottom-20 -right-20 w-80 h-80 bg-secondary/10 rounded-full filter blur-3xl float-animation"
        style="animation-delay: -2s;"></div>
    </div>

    <!-- ÂØºËà™Ê†è -->
    <header class="fixed w-full top-0 z-50 transition-all duration-300 bg-white/95 backdrop-blur-md shadow-sm py-3">
      <div class="container mx-auto px-4 flex items-center justify-between">
        <!-- ÂìÅÁâåÊ†áËØÜ -->
        <router-link to="/" class="flex items-center space-x-2">
          <div class="w-10 h-10 rounded-full bg-gradient-love flex items-center justify-center text-white shadow-md">
            <i class="fa-solid fa-heart text-xl"></i>
          </div>
          <span class="text-xl font-bold text-neutral-800 tracking-tight">LoveSync</span>
        </router-link>
        <!-- Ê°åÈù¢Á´ØÂØºËà™ËèúÂçï -->
        <nav class="hidden md:flex items-center space-x-6">
          <router-link to="/community"
            class="text-neutral-700 hover:text-primary transition-custom font-medium px-1 py-2 border-b-2 border-transparent hover:border-primary">Áà±‰∫´ÂÖ¨Á§æ</router-link>
          <router-link to="/moments"
            class="text-primary font-medium px-1 py-2 border-b-2 border-primary">ÂøÉÂä®ËΩ®Ëøπ</router-link>
          <router-link to="/photo-album"
            class="text-neutral-700 hover:text-primary transition-custom font-medium px-1 py-2 border-b-2 border-transparent hover:border-primary">ÂøÉË∑≥Áõ∏Á∞ø</router-link>
          <router-link to="/lovesync"
            class="text-neutral-700 hover:text-primary transition-custom font-medium px-1 py-2 border-b-2 border-transparent hover:border-primary">Âèå‰∫∫Êó•ËÆ∞</router-link>
        </nav>
        <!-- Áî®Êà∑Êìç‰ΩúÂå∫ -->
        <div class="flex items-center space-x-4">
          <button
            class="flex items-center space-x-2 px-5 py-2 rounded-full bg-gradient-love text-white hover:opacity-90 transition-custom shadow-md hover:shadow-lg">
            <i class="fa-solid fa-pencil"></i>
            <span>ÂèëÂ∏ÉÂä®ÊÄÅ</span>
          </button>
          <!-- Áî®Êà∑Â§¥ÂÉè‰∏é‰∏ãÊãâËèúÂçï -->
          <div class="relative" id="userDropdown">
            <div class="w-10 h-10 rounded-full overflow-hidden border-2 border-primary cursor-pointer shadow-sm"
              id="userAvatar">
              <img :src="userAvatar" alt="Áî®Êà∑Â§¥ÂÉè" class="w-full h-full object-cover">
            </div>
            <div class="absolute right-0 mt-2 w-48 bg-white rounded-lg shadow-xl py-2 z-50 hidden" id="userOptions">
              <router-link to="/personal-center"
                class="block px-4 py-2 text-neutral-700 hover:bg-neutral-50 transition-custom flex items-center">
                <i class="fa-solid fa-user mr-2 w-5 text-center"></i>‰∏ªÈ°µ
              </router-link>
              <router-link to="/message"
                class="block px-4 py-2 text-neutral-700 hover:bg-neutral-50 transition-custom flex items-center">
                <i class="fa-solid fa-bookmark mr-2 w-5 text-center"></i>Ê∂àÊÅØ
              </router-link>
              <router-link to="/settings"
                class="block px-4 py-2 text-neutral-700 hover:bg-neutral-50 transition-custom flex items-center">
                <i class="fa-solid fa-cog mr-2 w-5 text-center"></i>ËÆæÁΩÆ
              </router-link>
              <div class="border-t border-neutral-200 my-1"></div>
              <a href="#" @click="logout"
                class="block px-4 py-2 text-red-500 hover:bg-red-50 transition-custom flex items-center">
                <i class="fa-solid fa-sign-out mr-2 w-5 text-center"></i>ÈÄÄÂá∫ÁôªÂΩï
              </a>
            </div>
          </div>
        </div>
      </div>
    </header>

    <!-- ‰∏ªÂÜÖÂÆπÂå∫ -->
    <main class="flex-grow pt-24 pb-16 relative z-10">
      <div class="container mx-auto px-4">
        <div class="grid grid-cols-1 md:grid-cols-3 gap-6">
          <!-- Â∑¶‰æßËæπÊ†è -->
          <div class="md:col-span-1">
            <!-- ÂèëÂ∏ÉÂä®ÊÄÅÂç°Áâá -->
            <div class="bg-white rounded-xl shadow-lg p-4 hover-scale">
              <div class="flex items-start space-x-3">
                <div class="w-10 h-10 rounded-full overflow-hidden">
                  <img :src="userAvatar" alt="Áî®Êà∑Â§¥ÂÉè" class="w-full h-full object-cover">
                </div>
                <div class="flex-1">
                  <button
                    class="w-full text-left p-3 rounded-full bg-neutral-100 hover:bg-neutral-200 transition-custom text-sm text-neutral-700">
                    ÂàÜ‰∫´‰Ω†ÁöÑÂøÉÂä®Êó∂Âàª...
                  </button>
                  <div class="flex justify-between mt-3">
                    <button
                      class="flex items-center space-x-1 text-primary/70 hover:text-primary transition-custom px-3 py-1 rounded-full text-sm">
                      <i class="fa-solid fa-image"></i>
                      <span>ÂõæÁâá</span>
                    </button>
                    <button
                      class="flex items-center space-x-1 text-primary/70 hover:text-primary transition-custom px-3 py-1 rounded-full text-sm">
                      <i class="fa-solid fa-video"></i>
                      <span>ËßÜÈ¢ë</span>
                    </button>
                    <button
                      class="flex items-center space-x-1 text-primary/70 hover:text-primary transition-custom px-3 py-1 rounded-full text-sm">
                      <i class="fa-solid fa-music"></i>
                      <span>Èü≥‰πê</span>
                    </button>
                  </div>
                </div>
              </div>
            </div>

            <!-- ÁÉ≠Èó®ËØùÈ¢ò -->
            <div class="bg-white rounded-xl shadow-lg p-4 mt-6 hover-scale">
              <h3 class="text-lg font-semibold text-neutral-900 mb-4">ÁÉ≠Èó®ËØùÈ¢ò</h3>
              <div class="space-y-3">
                <div class="flex items-center justify-between p-2 hover:bg-neutral-50 rounded-lg transition-custom">
                  <div class="flex items-center space-x-2">
                    <i class="fa-solid fa-fire text-primary"></i>
                    <span class="text-neutral-800">#ÊÅãÁà±‰∏ÄÂë®Âπ¥</span>
                  </div>
                  <span class="text-xs text-neutral-500">1.2k</span>
                </div>
                <div class="flex items-center justify-between p-2 hover:bg-neutral-50 rounded-lg transition-custom">
                  <div class="flex items-center space-x-2">
                    <i class="fa-solid fa-fire text-primary"></i>
                    <span class="text-neutral-800">#ÊÉÖ‰æ£ÊóÖË°å</span>
                  </div>
                  <span class="text-xs text-neutral-500">892</span>
                </div>
                <div class="flex items-center justify-between p-2 hover:bg-neutral-50 rounded-lg transition-custom">
                  <div class="flex items-center space-x-2">
                    <i class="fa-solid fa-fire text-primary"></i>
                    <span class="text-neutral-800">#Áà±ÊÉÖË™ìË®Ä</span>
                  </div>
                  <span class="text-xs text-neutral-500">645</span>
                </div>
                <div class="flex items-center justify-between p-2 hover:bg-neutral-50 rounded-lg transition-custom">
                  <div class="flex items-center space-x-2">
                    <i class="fa-solid fa-fire text-primary"></i>
                    <span class="text-neutral-800">#Âèå‰∫∫Êó•ËÆ∞</span>
                  </div>
                  <span class="text-xs text-neutral-500">512</span>
                </div>
              </div>
            </div>
          </div>

          <!-- ‰∏≠Èó¥ÂÜÖÂÆπÂå∫ -->
          <div class="md:col-span-2">
            <!-- Âä®ÊÄÅÂàóË°® -->
            <div class="space-y-6">
              <!-- Âä®ÊÄÅ1 -->
              <div class="bg-white rounded-xl shadow-lg overflow-hidden post-card" v-for="moment in moments"
                :key="moment.id">
                <div class="p-6">
                  <div class="flex items-center justify-between">
                    <div class="flex items-center space-x-3">
                      <div class="w-10 h-10 rounded-full overflow-hidden">
                        <img :src="moment.avatar" alt="ÂèëÂ∏ÉËÄÖÂ§¥ÂÉè" class="w-full h-full object-cover">
                      </div>
                      <div>
                        <h4 class="font-semibold text-neutral-900">{{ moment.author }}</h4>
                        <p class="text-neutral-500 text-xs">{{ moment.time }}</p>
                      </div>
                    </div>
                    <button class="text-neutral-400 hover:text-neutral-700 transition-custom">
                      <i class="fa-solid fa-ellipsis-h"></i>
                    </button>
                  </div>
                  <div class="mt-4">
                    <p class="text-neutral-800">{{ moment.content }}</p>
                  </div>
                  <div class="mt-4 grid grid-cols-2 gap-2">
                    <img v-for="(img, index) in moment.images" :key="index" :src="img" alt="Âä®ÊÄÅÂõæÁâá"
                      class="rounded-lg w-full h-40 object-cover hover-scale">
                  </div>
                  <div class="mt-4 flex justify-between items-center">
                    <div class="flex space-x-4">
                      <button
                        class="flex items-center space-x-1 text-neutral-500 hover:text-primary transition-custom like-btn">
                        <i class="fa-regular fa-heart"></i>
                        <span>{{ moment.likes }}</span>
                      </button>
                      <button @click="toggleComments(moment.id)"
                        class="flex items-center space-x-1 text-neutral-500 hover:text-primary transition-custom comment-btn">
                        <i class="fa-regular fa-comment"></i>
                        <span>{{ moment.commentsCount }}</span>
                      </button>
                    </div>
                    <button class="flex items-center space-x-1 text-neutral-500 hover:text-primary transition-custom">
                      <i class="fa-regular fa-share-from-square"></i>
                      <span>ÂàÜ‰∫´</span>
                    </button>
                  </div>
                </div>
                <!-- ËØÑËÆ∫Âå∫Âüü -->
                <div v-if="moment.showComments" class="bg-neutral-50 p-4 border-t border-neutral-100 comment-section">
                  <div class="space-y-4">
                    <!-- ËØÑËÆ∫1 -->
                    <div class="flex space-x-3 comment-slide" v-for="comment in moment.comments" :key="comment.id">
                      <div class="w-8 h-8 rounded-full overflow-hidden">
                        <img :src="comment.avatar" alt="ËØÑËÆ∫ËÄÖÂ§¥ÂÉè" class="w-full h-full object-cover">
                      </div>
                      <div class="flex-1">
                        <div class="bg-white rounded-lg p-3">
                          <div class="flex justify-between items-center">
                            <h5 class="font-medium text-sm text-neutral-900">{{ comment.author }}</h5>
                            <span class="text-neutral-400 text-xs">{{ comment.time }}</span>
                          </div>
                          <p class="text-neutral-700 text-sm mt-1">{{ comment.content }}</p>
                        </div>
                        <div class="flex space-x-3 mt-2">
                          <button class="text-neutral-500 hover:text-primary text-xs transition-custom">
                            <i class="fa-regular fa-heart"></i> {{ comment.likes }}
                          </button>
                          <button class="text-neutral-500 hover:text-primary text-xs transition-custom">
                            ÂõûÂ§ç
                          </button>
                        </div>
                      </div>
                    </div>
                    <!-- ÂèëË°®ËØÑËÆ∫ -->
                    <div class="flex space-x-3 mt-2">
                      <div class="w-8 h-8 rounded-full overflow-hidden">
                        <img :src="userAvatar" alt="Áî®Êà∑Â§¥ÂÉè" class="w-full h-full object-cover">
                      </div>
                      <div class="flex-1 relative">
                        <input type="text" placeholder="ÂÜô‰∏ã‰Ω†ÁöÑËØÑËÆ∫..."
                          class="w-full border border-neutral-200 rounded-full pl-4 pr-10 py-2 focus:outline-none focus:ring-2 focus:ring-primary/50 form-input-focus text-sm">
                        <button class="absolute right-2 top-1/2 -translate-y-1/2 text-primary">
                          <i class="fa-solid fa-paper-plane"></i>
                        </button>
                      </div>
                    </div>
                  </div>
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>
    </main>

    <!-- È°µËÑö -->
    <footer class="bg-white border-t border-neutral-200 py-8">
      <div class="container mx-auto px-4">
        <div class="flex flex-col md:flex-row justify-between items-center">
          <a href="#" class="flex items-center space-x-2">
            <div class="w-10 h-10 rounded-full bg-gradient-love flex items-center justify-center text-white shadow-md">
              <i class="fa-solid fa-heart text-xl"></i>
            </div>
            <span class="text-xl font-bold text-neutral-800 tracking-tight">LoveSync</span>
          </a>
          <div class="text-neutral-500 text-sm">
            &copy; 2025 LoveSync. All rights reserved.
          </div>
        </div>
      </div>
    </footer>
  </div>
</template>

<script>
export default {
  name: 'Moments',
  data () {
    return {
      userAvatar: 'https://picsum.photos/200/200?random=1',
      moments: [
        {
          id: 1,
          author: 'Â∞èÁîúÁîúÂíåÂ∞èÂ∏ÖÂ∏Ö',
          avatar: 'https://picsum.photos/200/200?random=5',
          time: '2Â∞èÊó∂Ââç',
          content: '‰ªäÂ§©ÊòØÊàë‰ª¨ÊÅãÁà±‰∏ÄÂë®Âπ¥ÁöÑÊó•Â≠êÔºå‰∏ÄËµ∑Âéª‰∫ÜÊàë‰ª¨Á¨¨‰∏ÄÊ¨°Á∫¶‰ºöÁöÑÈ§êÂéÖÔºåÂõûÂøÜÊª°Êª°üíï #ÊÅãÁà±‰∏ÄÂë®Âπ¥Á∫™Âøµ#',
          images: [
            'https://picsum.photos/600/400?random=10',
            'https://picsum.photos/600/400?random=11'
          ],
          likes: 128,
          commentsCount: 24,
          comments: [
            {
              id: 1,
              author: 'ÊÅãÁà±Â∞èÂä©Êâã',
              avatar: 'https://picsum.photos/200/200?random=6',
              time: '1Â∞èÊó∂Ââç',
              content: '‰∏ÄÂë®Âπ¥Âø´‰πêÔºÅÂ•ΩÁæ°ÊÖï‰Ω†‰ª¨ÂëÄÔºåÂ∏åÊúõ‰Ω†‰ª¨ËÉΩ‰∏ÄÁõ¥Âπ∏Á¶è‰∏ãÂéª~',
              likes: 16
            },
            {
              id: 2,
              author: 'Áà±ÊÉÖÊïÖ‰∫ã',
              avatar: 'https://picsum.photos/200/200?random=7',
              time: '50ÂàÜÈíüÂâç',
              content: 'È§êÂéÖÁúãËµ∑Êù•Âæà‰∏çÈîôÂïäÔºåÊòØÂì™ÂÆ∂Âë¢Ôºü‰πüÊÉ≥ÂíåÂè¶‰∏ÄÂçäÂéª‰ΩìÈ™å‰∏Ä‰∏ã~',
              likes: 8
            }
          ],
          showComments: false
        },
        {
          id: 2,
          author: 'ÊóÖË°åÊÉÖ‰æ£',
          avatar: 'https://picsum.photos/200/200?random=8',
          time: 'Êò®Â§©',
          content: 'Á¨¨‰∏ÄÊ¨°‰∏ÄËµ∑Âá∫ÂõΩÊóÖË°åÔºåÊ≥∞ÂõΩÊôÆÂêâÂ≤õÁúüÁöÑÂ§™Áæé‰∫ÜÔºÅÂíå‰Ω†‰∏ÄËµ∑ÁúãÊµ∑Ôºå‰∏ÄËµ∑Êé¢Á¥¢Êñ∞ÁöÑÂú∞ÊñπÔºåËøôÂ∞±ÊòØÊàëÊÉ≥Ë¶ÅÁöÑÁîüÊ¥ª~ #ÊÉÖ‰æ£ÊóÖË°å#',
          images: [
            'https://picsum.photos/600/400?random=20',
            'https://picsum.photos/600/400?random=21',
            'https://picsum.photos/600/400?random=22'
          ],
          likes: 256,
          commentsCount: 42,
          comments: [
            {
              id: 3,
              author: 'ÁéØÁêÉÊóÖË°åËÄÖ',
              avatar: 'https://picsum.photos/200/200?random=9',
              time: '18Â∞èÊó∂Ââç',
              content: 'ÊôÆÂêâÂ≤õÁ°ÆÂÆûÊòØ‰∏™Â•ΩÂú∞ÊñπÔºÅÊúâ‰ªÄ‰πàÊé®ËçêÁöÑÈ§êÂéÖÊàñÊôØÁÇπÂêóÔºü',
              likes: 12
            },
            {
              id: 4,
              author: 'Êµ∑ËæπÊº´Ê≠•',
              avatar: 'https://picsum.photos/200/200?random=10',
              time: '16Â∞èÊó∂Ââç',
              content: 'ÁÖßÁâáÊãçÂæóÁúüÁæéÔºÅ‰Ω†‰ª¨ÊòØËá™Áî±Ë°åËøòÊòØË∑üÂõ¢Âë¢Ôºü',
              likes: 9
            }
          ],
          showComments: false
        },
        {
          id: 3,
          author: 'ÁæéÈ£üÁà±Â•ΩËÄÖ',
          avatar: 'https://picsum.photos/200/200?random=11',
          time: '3Â§©Ââç',
          content: 'Âë®Êú´‰∏ÄËµ∑ÂÅö‰∫Ü‰∏ÄÈ°ø‰∏∞ÁõõÁöÑÊôöÈ§êÔºåËôΩÁÑ∂ËøáÁ®ãÊúâ‰∫õÊõ≤ÊäòÔºå‰ΩÜÁªìÊûúÂæàÂÆåÁæé~ ‰∏§‰∏™‰∫∫‰∏ÄËµ∑ÂÅöÈ•≠ÁöÑÊÑüËßâÁúüÂ•ΩÔºÅ #ÊÉÖ‰æ£Âé®Ëâ∫Â§ßÊØîÊãº#',
          images: [
            'https://picsum.photos/600/400?random=30',
            'https://picsum.photos/600/400?random=31'
          ],
          likes: 89,
          commentsCount: 15,
          comments: [
            {
              id: 5,
              author: 'Âé®Ëâ∫Ëææ‰∫∫',
              avatar: 'https://picsum.photos/200/200?random=12',
              time: '2Â§©Ââç',
              content: 'ÁúãËµ∑Êù•Â•ΩÁæéÂë≥ÔºÅËÉΩÂàÜ‰∫´‰∏Ä‰∏ãÈ£üË∞±ÂêóÔºü',
              likes: 23
            }
          ],
          showComments: false
        }
      ]
    }
  },
  methods: {
    logout () {
      // Ë∞ÉÁî®VuexÁöÑÁôªÂá∫action
      this.$store.dispatch('logout')
      this.$router.push('/login')
    },
    toggleComments (momentId) {
      const moment = this.moments.find(m => m.id === momentId)
      if (moment) {
        moment.showComments = !moment.showComments
      }
    }
  }
}
</script>
