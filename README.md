### 双人日记 (LoveSync Diary)



> 一款专为情侣设计的实时协作日记应用，让双方能够共享生活点滴、同步心情记录，打造属于两人的私密空间。支持实时编辑、内容同步、心情统计与互动功能，让情感记录更有温度。还有商城购物、秒杀、本地生活服务(正在开发中)
> 🌟 
### 核心功能

实时协作编辑：基于 Operational Transformation 算法，支持双人同时编辑同一篇日记，内容实时同步且无冲突
心情记录与统计：用不同颜色标记每日心情，自动生成每周 / 每月心情趋势图表
内容分享与权限管理：可选择日记是否对伴侣可见，保护隐私的同时增进了解
历史记录与版本回溯：自动保存编辑历史，支持查看和恢复过往版本
响应式设计：适配手机、平板和电脑，随时随地记录生活

### 🚀 快速开始

### 环境要求

查看requirement.txt

### 本地部署步骤

克隆仓库
bash
git clone https://github.com/yourusername/lovesync-diary.git
cd lovesync-diary

### 创建虚拟环境并安装依赖

bash
python -m venv venv
source venv/bin/activate  # Windows: venv\Scripts\activate
pip install -r requirements.txt

### 配置环境变量

创建 .env 文件，填写必要配置：
ini
DEBUG=True
SECRET_KEY=your_secret_key
DATABASE_URL=postgres://user:password@localhost:5432/lovesync
REDIS_URL=redis://localhost:6379/0

### 初始化数据库

bash
python manage.py migrate
python manage.py createsuperuser  # 创建管理员账号

### 启动服务

bash
# 启动 Django 开发服务器
python manage.py runserver

# 启动 Channels 实时通信服务
daphne lovesync.asgi:application

### 访问应用
主应用：http://127.0.0.1:8000
管理后台：http://127.0.0.1:8000/admin

### 📱 功能使用指南

1. 账号绑定
注册账号后，通过「设置 → 伴侣绑定」生成邀请码
对方输入邀请码完成绑定，双方即可共享权限内的日记内容

绑定后可在「设置 → 隐私权限」中调整默认分享权限
2. 核心功能详情
✏️ 日记
点击首页「+ 写日记」按钮，选择心情标签（快乐 / 心动 / 大笑 / 悲伤 / 愤怒 / 平静）
编辑内容时，可上传图片（支持多图）
勾选「分享给伴侣」可实时同步给对方，未勾选则为私密日记
实时协作：双方同时编辑时内容实时同步（延迟 < 500ms），冲突自动处理

📷 相册
「相册 → 新建相册」可创建主题相册（如 "第一次旅行"、"日常点滴"）
支持批量上传照片，自动按拍摄时间排序
可设置相册权限：私密（仅自己可见）、仅伴侣可见、公开到社区
照片可添加备注和定位，点击照片可直接关联到日记

📝 博客
「发现 → 博客」可发布长文内容（支持排版编辑、多图插入）
与日记的区别：博客 - 日记：侧重私密记录，按时间线组织
博客：侧重主题性创作（如旅行攻略、感情感悟），支持标签分类
支持设置 "仅自己可见"、"仅伴侣可见" 或 "公开到社区"
可关联相关日记内容，形成完整故事线

🌐 社区
「发现 → 社区」浏览浏览其他情侣分享的公开内容（博客、相册精选）
支持关注喜欢的情侣账号，首页动态会在首页推送
可对内容进行点赞、评论（评论仅双方可见，保护隐私）
社区内容按 "热门"、"最新"、"附近" 分类展示，支持标签筛选（如 #异地恋 #恋爱技巧）

📢 动态
记录情侣间的重要时刻，支持文字、图片、短视频形式
动态会自动同步到双方首页时间线，显示 "XX 分钟前" 等时间标记
可设置 "仅双方可见" 或 "隐藏动态"（如小秘密）


⭐ 收藏
「我的 → 收藏」可保存喜欢的内容：
自己或伴侣的日记 / 博客片段
社区中看到的优质内容
商城链接的重要对话截图
支持创建收藏夹分类（如 "约会灵感"、"礼物清单"、"感情语录"）
收藏内容更新时（如原作者修改）会收到提醒
可直接将收藏内容分享到双方聊天窗口

3. 数据统计
首页展示「本周心情」统计，用颜色分布直观呈现双方情绪变化
「历史回顾」页面可查看月度 / 年度记录统计，生成互动频率图表
支持按心情筛选查看相关日记，生成 "共同回忆" 时间线
年度报告：自动生成恋爱关键词、互动热力图、共同经历总结
4. 情侣商城
通过「发现 → 情侣商城」进入功能页面，包含以下特色：

专属好物：精选情侣用品，支持一键购买双方同款
愿望清单：可添加心仪商品，对方可见并可直接购买作为惊喜
纪念礼物：根据恋爱时长推荐专属纪念礼品（如 100 天、周年纪念等）
共享购物车：双方可共同添加、编辑购物项，支持分工购买
消费统计：自动生成情侣消费分析，合理消费习惯和共同支出比例

### 🔧 技术架构

后端框架：Django + Django REST Framework
实时通信：Channels + WebSocket（基于 Redis 作为通道层）
数据同步：Operational Transformation (OT) 算法处理并发编辑
缓存策略：Redis 双层缓存（用户会话 + 权限数据）
数据库：MYSQL（主数据）+ Redis（缓存 / 排行榜 / 验证码 / JWT登录 / ）
前端框架：Vue 3 + Element Plus + MinIO
状态管理：Pinia
UI 组件：自定义主题 + Tailwind CSS
实时编辑：基于 OT 算法的自定义编辑器

### 核心算法

运用multithreading优化实时编辑体验，结合 Operational Transformation 算法，降低情侣内容同步延迟，防止多
线程同时操作共享内容时的数据一致性问题与同步延迟问题
基于 Redis 实现双层缓存架构，存储用户会话信息(结合 JWT 令牌)，缓存情侣账号绑定关系与权限数据，将接口响
应时间降低 ，实现热门话题排行榜的实时更新，避免了缓存击穿、接口响应缓慢导致的用户体验下降，以及权限数
据访问效率低的问题
通过观察者模式实时监听日记编辑、商场操作等用户行为，触发埋点数据采集，再由工厂模式统一生成标准化埋点
事件，调用接口完成数据存储，结合用户行为优化推荐精准度

### 🤝 贡献指南

欢迎参与项目开发！无论是功能优化、Bug 修复还是文档完善，都可以通过以下步骤贡献：

请确保代码符合项目编码规范，并添加必要的测试用例。

### 📄 开源协议

本项目采用 MIT 协议 开源，允许自由使用、修改和分发，详情见 LICENSE 文件。

### 💬 联系我们

项目地址：https://gitee.com/liutao-888/python_-django_-love-sync-diary.git

问题反馈：提交 Issues
开发者：[你的名字 / 团队名]（邮箱：your@email.com）